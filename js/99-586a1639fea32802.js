(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99],{72735:function(e,t,n){"use strict";let r;n.d(t,{TRh:function(){return tZ},ZpI:function(){return iM},krz:function(){return iF},SsU:function(){return ik},IYM:function(){return iE},gGi:function(){return ek},rqX:function(){return e$},d_N:function(){return eJ},H__:function(){return l.H_},WUB:function(){return eo},dtM:function(){return eA},eVA:function(){return t7},Rl:function(){return function e(t){return"string"==typeof t?O(t):Array.isArray(t)?t.map(t=>e(t)):"object"!=typeof t||null===t||[eA,m.PublicKey,eg,p.BN,ei,eb,eT,ek].some(e=>"object"==typeof e&&t instanceof e)?t:Object.fromEntries(Object.entries(t).map(([t,n])=>[t,e(n)]))}}});var i,o,s,a,u,c=n(53940),l=n(38669),d=n(42819),m=n(37355),f=n(57862),p=n(34108),h=n.n(p);let g="1.1.0-beta.6",w=!1,y=!1,b={debug:1,default:2,info:2,warning:3,error:4,off:5},A={},S=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw Error("bad normalize")}catch(n){e.push(t)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(e){if(e instanceof Error)return e.message}return""}();(tJ=t3||(t3={})).DEBUG="DEBUG",tJ.INFO="INFO",tJ.WARNING="WARNING",tJ.ERROR="ERROR",tJ.OFF="OFF",(t$=t5||(t5={})).UNKNOWN_ERROR="UNKNOWN_ERROR",t$.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t$.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t$.NETWORK_ERROR="NETWORK_ERROR",t$.RPC_ERROR="RPC_ERROR",t$.TIMEOUT="TIMEOUT",t$.BUFFER_OVERRUN="BUFFER_OVERRUN",t$.NUMERIC_FAULT="NUMERIC_FAULT",t$.MISSING_NEW="MISSING_NEW",t$.INVALID_ARGUMENT="INVALID_ARGUMENT",t$.MISSING_ARGUMENT="MISSING_ARGUMENT",t$.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t$.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS";let k="0123456789abcdef";class I{constructor(e){this.version=g,this.moduleName=e}_log(e,t){let n=e.toLowerCase();null==b[n]&&this.throwArgumentError("invalid log level name","logLevel",e),(A[this.moduleName]||b.default)>b[n]||console.log(...t)}debug(...e){this._log(I.levels.DEBUG,["[DEBUG]",...e])}info(...e){this._log(I.levels.INFO,["[INFO]",...e])}warn(...e){this._log(I.levels.WARNING,["[WARN]",...e])}makeError(e,t,n){if(y)return this.makeError("censored error",t,{});t||(t=I.errors.UNKNOWN_ERROR),n||(n={});let r=[];Object.entries(n).forEach(([e,t])=>{r.push(`${e}=${function e(t,n=!1){let r=t;try{if(t instanceof Uint8Array){let e="";for(let n=0;n<t.length;n++)e+=k[t[n]>>4]+k[15&t[n]];r=`Uint8Array(0x${e})`}else if(t instanceof m.PublicKey)r=`PublicKey(${t.toBase58()})`;else if(t instanceof Object&&!n){let n={};Object.entries(t).forEach(([t,r])=>{n[t]=e(r,!0)}),r=JSON.stringify(n)}else n||(r=JSON.stringify(t))}catch(e){r=JSON.stringify(t.toString())}return r}(t)})`)}),r.push(`code=${t}`),r.push(`module=${this.moduleName}`),r.push(`version=${this.version}`);let i=e;r.length&&(e+=" ("+r.join(", ")+")");let o=Error(e);return o.reason=i,o.code=t,Object.entries(n).forEach(([e,t])=>{o[e]=t}),o}throwError(e,t,n){throw this.makeError(e,t,n)}throwArgumentError(e,t,n){return this.throwError(e,I.errors.INVALID_ARGUMENT,{argument:t,value:n})}assert(e,t,n,r){e||this.throwError(t,n,r)}assertArgument(e,t,n,r){e||this.throwArgumentError(t,n,r)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),S&&this.throwError("platform missing String.prototype.normalize",I.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:S})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,I.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,I.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,n){n=n?": "+n:"",e<t&&this.throwError("missing argument"+n,I.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+n,I.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||null==e)&&this.throwError("missing new",I.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",I.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",I.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return r||(r=new I(g)),r}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",I.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),w){if(!e)return;this.globalLogger().throwError("error censorship permanent",I.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}y=!!e,w=!!t}static setLogLevel(e,t){let n=b[t.toLowerCase()];if(null==n){I.globalLogger().warn("invalid log level - "+t);return}A[e]=n}static from(e){return new I(e)}}I.errors=t5,I.levels=t3;let T=I.from("common/pubkey"),v=m.SystemProgram.programId,E=new m.PublicKey("MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr"),P=new m.PublicKey("SysvarRent111111111111111111111111111111111"),L=new m.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),C=new m.PublicKey("Sysvar1nstructions1111111111111111111111111");function O(e){if(e instanceof m.PublicKey)return e;if("string"==typeof e)try{return new m.PublicKey(e)}catch{}return T.throwArgumentError("invalid public key","publicKey",e)}function x(e,t){let[n,r]=m.PublicKey.findProgramAddressSync(e,t);return{publicKey:n,nonce:r}}function B(e,t){return{pubkey:e,isWritable:!0,isSigner:t}}function R(e,t){return{pubkey:e,isWritable:!1,isSigner:t}}function U(e,t=1,n=[]){let r=[...e];if(t<=0)return n;for(;r.length;)n.push(r.splice(0,t));return n}var D=n(23663).Buffer;let _=I.from("common/web3");async function q(e,t,n){let{batchRequest:r,commitment:i}={batchRequest:!1,...n},o=U(t,100),s=Array(o.length).fill([]);if(r){let t=U(o.map(t=>({methodName:"getMultipleAccounts",args:e._buildArgs([t.map(e=>e.toBase58())],i,"base64")})),10);s=(await (await Promise.all(t.map(async t=>await e._rpcBatchRequest(t)))).flat()).map(e=>e.error?_.throwError("failed to get info for multiple accounts",I.errors.RPC_ERROR,{message:e.error.message}):e.result.value.map(e=>{if(!e)return null;{let{data:t,executable:n,lamports:r,owner:i,rentEpoch:o}=e;return 2!==t.length&&"base64"!==t[1]?_.throwError("info must be base64 encoded",I.errors.RPC_ERROR):{data:D.from(t[0],"base64"),executable:n,lamports:r,owner:new m.PublicKey(i),rentEpoch:o}}}))}else try{s=await Promise.all(o.map(t=>e.getMultipleAccountsInfo(t,i)))}catch(e){if(e instanceof Error)return _.throwError("failed to get info for multiple accounts",I.errors.RPC_ERROR,{message:e.message})}return s.flat()}async function N(e,t,n){let r=await q(e,t.map(e=>e.pubkey),n);return t.map((e,t)=>({...e,accountInfo:r[t]}))}function V(e,t){if(e.length<1)return _.throwArgumentError("no instructions provided","instructions",e);if(t.length<1)return _.throwArgumentError("no signers provided","signers",t);let n=new m.Transaction({recentBlockhash:"11111111111111111111111111111111",feePayer:t[0]});n.add(...e);try{return D.from(n.serialize({verifySignatures:!1})).toString("base64").length<Y}catch(e){return!1}}async function M(e,t,n,r=!0){let i=new m.PublicKey("RaydiumSimuLateTransaction11111111111111111"),o=[],s=new m.Transaction;for(let e of(s.feePayer=i,t))V([...s.instructions,e],[i])||(o.push(s),(s=new m.Transaction).feePayer=i),s.add(e);s.instructions.length>0&&o.push(s);let a=[];try{if((a=await W(e,o,r)).find(e=>null!==e.err))throw Error("rpc simulateTransaction error")}catch(e){if(e instanceof Error)return _.throwError("failed to simulate for instructions",I.errors.RPC_ERROR,{message:e.message})}let u=[];for(let e of a)if(_.debug("simulate result:",e),e.logs){let t=e.logs.filter(e=>e&&e.includes(n));_.debug("filteredLog:",u),_.assertArgument(0!==t.length,"simulate log not match keyword","keyword",n),u.push(...t)}return u}function F(e,t){let n=RegExp(`"${t}":(\\d+)`,"g").exec(e);return n&&2===n.length?n[1]:_.throwArgumentError("simulate log fail to match key","key",t)}async function W(e,t,n){let r=[];if(n){let n=await e.getLatestBlockhash(),i=[];for(let e of t){e.recentBlockhash=n.blockhash,e.lastValidBlockHeight=n.lastValidBlockHeight;let t=e._compile().serialize(),r=e._serialize(t).toString("base64");i.push(r)}let o=i.map(t=>({methodName:"simulateTransaction",args:e._buildArgs([t],void 0,"base64")})),s=[];for(let e=0;e<Math.ceil(o.length/20);e++)s.push(o.slice(20*e,(e+1)*20));r=await (await Promise.all(s.map(async t=>(await e._rpcBatchRequest(t)).map(e=>e.result.value)))).flat()}else try{r=await Promise.all(t.map(async t=>await (await e.simulateTransaction(t)).value))}catch(e){if(e instanceof Error)return _.throwError("failed to get info for multiple accounts",I.errors.RPC_ERROR,{message:e.message})}return r}async function K({connection:e,makeTxVersion:t,innerTransaction:n,lookupTableCache:r,computeBudgetConfig:i,payer:o}){let s=r??{},a=[...new Set(n.map(e=>(e.lookupTableAddress??[]).map(e=>e.toString())).flat())],u=[];for(let e of a)void 0===s[e]&&u.push(new m.PublicKey(e));for(let[t,n]of Object.entries(await G({connection:e,address:u})))s[t]=n;let c=i?function(e){let t=[],n=[];return e.microLamports&&(t.push(m.ComputeBudgetProgram.setComputeUnitPrice({microLamports:e.microLamports})),n.push(ne.setComputeUnitPrice)),e.units&&(t.push(m.ComputeBudgetProgram.setComputeUnitLimit({units:e.units})),n.push(ne.setComputeUnitLimit)),{address:{},innerTransaction:{instructions:t,signers:[],instructionTypes:n}}}(i).innerTransaction:void 0,l=[],d=[];for(let e of n){if(0===e.instructions.length)continue;let n=[...d,e],r=c?[c,...n]:n;if(d.length<12&&(H({makeTxVersion:t,innerIns:r,payer:o,lookupTableAddressAccount:s})||H({makeTxVersion:t,innerIns:n,payer:o,lookupTableAddressAccount:s})))d.push(e);else{let n;if(0===d.length)throw Error(" item ins too big ");if(t===t7.V0)for(let e of(n={},[...new Set(d.map(e=>e.lookupTableAddress??[]).flat().map(e=>e.toString()))]))void 0!==s[e]&&(n[e]=s[e]);if(H({makeTxVersion:t,innerIns:c?[c,...d]:d,payer:o,lookupTableAddressAccount:s})){let e=c?[c,...d]:d;l.push({instructionTypes:e.map(e=>e.instructionTypes).flat(),instructions:e.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:n})}else l.push({instructionTypes:d.map(e=>e.instructionTypes).flat(),instructions:d.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:n});d=[e]}}if(d.length>0){let e;if(t===t7.V0)for(let t of(e={},[...new Set(d.map(e=>e.lookupTableAddress??[]).flat().map(e=>e.toString()))]))void 0!==s[t]&&(e[t]=s[t]);if(H({makeTxVersion:t,innerIns:c?[c,...d]:d,payer:o,lookupTableAddressAccount:s})){let t=c?[c,...d]:d;l.push({instructionTypes:t.map(e=>e.instructionTypes).flat(),instructions:t.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:e})}else l.push({instructionTypes:d.map(e=>e.instructionTypes).flat(),instructions:d.map(e=>e.instructions).flat(),signers:d.map(e=>e.signers).flat(),lookupTableAddress:e})}return l}function H({makeTxVersion:e,innerIns:t,payer:n,lookupTableAddressAccount:r}){let i=t.map(e=>e.instructions).flat(),o=[...new Set(t.map(e=>e.signers).flat().map(e=>e.publicKey.toString()))].map(e=>new m.PublicKey(e)),s=t.map(e=>e.lookupTableAddress??[]).flat().map(e=>e.toString()),a={},u=r??{};for(let e of s)void 0!==u[e]&&(a[e]=u[e]);return e===t7.V0?function({instructions:e,payer:t,lookupTableAddressAccount:n}){let r=new m.TransactionMessage({payerKey:t,recentBlockhash:m.Keypair.generate().publicKey.toString(),instructions:e}).compileToV0Message(Object.values(n??{}));try{return D.from(r.serialize()).toString("base64").length<Y}catch(e){return!1}}({instructions:i,payer:n,lookupTableAddressAccount:a}):function({instructions:e,payer:t,signers:n}){return V(e,[t,...n])}({instructions:i,payer:n,signers:o})}let Y=1644;async function G({connection:e,address:t}){let n=await q(e,[...new Set(t.map(e=>e.toString()))].map(e=>new m.PublicKey(e))),r={};for(let e=0;e<t.length;e++){let i=n[e],o=t[e];i&&(r[o.toString()]=new m.AddressLookupTableAccount({key:o,state:m.AddressLookupTableAccount.deserialize(i.data)}))}return r}(t0=t8||(t8={}))[t0.ROUND_DOWN=0]="ROUND_DOWN",t0[t0.ROUND_HALF_UP=1]="ROUND_HALF_UP",t0[t0.ROUND_UP=2]="ROUND_UP";let X=new(h())(0),z=new(h())(1);new(h())(2),new(h())(3),new(h())(5);let j=new(h())(10),Z=new(h())(100);new(h())(1e3),new(h())(1e4);let Q=I.from("entity/bignumber");function J(e){return e instanceof h()?e:"string"==typeof e?e.match(/^-?[0-9]+$/)?new(h())(e):Q.throwArgumentError("invalid BigNumberish string","value",e):"number"==typeof e?e%1?Q.throwArgumentError("BigNumberish number underflow","value",e):e>=9007199254740991||e<=-9007199254740991?Q.throwArgumentError("BigNumberish number overflow","value",e):new(h())(String(e)):"bigint"==typeof e?new(h())(e.toString()):Q.throwArgumentError("invalid BigNumberish value","value",e)}function $(e,t){let n=e.divmod(t);return n.mod.isZero()?n.div:n.div.isNeg()?n.div.isubn(1):n.div.iaddn(1)}let ee={symbol:"SOL",name:"Solana",decimals:9},et={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}};({...et});let en={WSOL:{...et},BTC:{symbol:"BTC",name:"Bitcoin",mint:"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E",decimals:6,extensions:{coingeckoId:"bitcoin"}},ETH:{symbol:"ETH",name:"Ethereum",mint:"2FPyTwcZLUg1MDrwsyoP4D6s1tM7hAkHYRjkNb5w6Pxk",decimals:6,extensions:{coingeckoId:"ethereum"}},USDT:{symbol:"USDT",name:"Tether",mint:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",decimals:6,extensions:{coingeckoId:"tether"}},WUSDT:{symbol:"WUSDT",name:"Wrapped USDT",mint:"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4",decimals:6,extensions:{coingeckoId:"tether"}},USDC:{symbol:"USDC",name:"USD Coin",mint:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",decimals:6,extensions:{coingeckoId:"usd-coin"}},WUSDC:{symbol:"WUSDC",name:"Wrapped USDC",mint:"BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW",decimals:6,extensions:{coingeckoId:"usd-coin"}},YFI:{symbol:"YFI",name:"YFI",mint:"3JSf5tPeuscJGtaCp5giEiDhv51gQ4v3zWg8DGgyLfAB",decimals:6,extensions:{coingeckoId:"yearn-finance"}},LINK:{symbol:"LINK",name:"Chainlink",mint:"CWE8jPTUYhdCTZYWPTe1o5DFqfdjzWKc9WKz6rSjQUdG",decimals:6,extensions:{coingeckoId:"chainlink"}},XRP:{symbol:"XRP",name:"XRP",mint:"Ga2AXHpfAF6mv2ekZwcsJFqu7wB4NV331qNH7fW9Nst8",decimals:6,extensions:{coingeckoId:"ripple"}},SUSHI:{symbol:"SUSHI",name:"SUSHI",mint:"AR1Mtgh7zAtxuxGd2XPovXPVjcSdY3i4rQYisNadjfKy",decimals:6,extensions:{coingeckoId:"sushi"}},ALEPH:{symbol:"ALEPH",name:"ALEPH",mint:"CsZ5LZkDS7h9TDKjrbL7VAwQZ9nsRu8vJLhRYfmGaN8K",decimals:6,extensions:{coingeckoId:"aleph"}},SXP:{symbol:"SXP",name:"SXP",mint:"SF3oTvfWzEP3DTwGSvUXRrGTvr75pdZNnBLAH9bzMuX",decimals:6,extensions:{coingeckoId:"swipe"}},HGET:{symbol:"HGET",name:"HGET",mint:"BtZQfWqDGbk9Wf2rXEiWyQBdBY1etnUUn6zEphvVS7yN",decimals:6,extensions:{coingeckoId:"hedget"}},CREAM:{symbol:"CREAM",name:"CREAM",mint:"5Fu5UUgbjpUvdBveb3a1JTNirL8rXtiYeSMWvKjtUNQv",decimals:6,extensions:{coingeckoId:"cream-2"}},UNI:{symbol:"UNI",name:"UNI",mint:"DEhAasscXF4kEGxFgJ3bq4PpVGp5wyUxMRvn6TzGVHaw",decimals:6,extensions:{coingeckoId:"uniswap"}},SRM:{symbol:"SRM",name:"Serum",mint:"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt",decimals:6,extensions:{coingeckoId:"serum"}},FTT:{symbol:"FTT",name:"FTX Token",mint:"AGFEad2et2ZJif9jaGpdMixQqvW5i81aBdvKe7PHNfz3",decimals:6,extensions:{coingeckoId:"ftx-token"}},MSRM:{symbol:"MSRM",name:"MegaSerum",mint:"MSRMcoVyrFxnSgo5uXwone5SKcGhT1KEJMFEkMEWf9L",decimals:0,extensions:{coingeckoId:"megaserum"}},TOMO:{symbol:"TOMO",name:"TOMO",mint:"GXMvfY2jpQctDqZ9RoU3oWPhufKiCcFEfchvYumtX7jd",decimals:6,extensions:{coingeckoId:"tomochain"}},KARMA:{symbol:"KARMA",name:"KARMA",mint:"EcqExpGNFBve2i1cMJUTR4bPXj4ZoqmDD2rTkeCcaTFX",decimals:4,extensions:{coingeckoId:"karma-dao"}},LUA:{symbol:"LUA",name:"LUA",mint:"EqWCKXfs3x47uVosDpTRgFniThL9Y8iCztJaapxbEaVX",decimals:6,extensions:{coingeckoId:"lua-token"}},MATH:{symbol:"MATH",name:"MATH",mint:"GeDS162t9yGJuLEHPWXXGrb1zwkzinCgRwnT8vHYjKza",decimals:6,extensions:{coingeckoId:"math"}},KEEP:{symbol:"KEEP",name:"KEEP",mint:"GUohe4DJUA5FKPWo3joiPgsB7yzer7LpDmt1Vhzy3Zht",decimals:6,extensions:{coingeckoId:"keep-network"}},SWAG:{symbol:"SWAG",name:"SWAG",mint:"9F9fNTT6qwjsu4X4yWYKZpsbw5qT7o6yR2i57JF2jagy",decimals:6,extensions:{coingeckoId:"swag-finance"}},FIDA:{symbol:"FIDA",name:"Bonfida",mint:"EchesyfXePKdLtoiZSL8pBe8Myagyy8ZRqsACNCFGnvp",decimals:6,extensions:{coingeckoId:"bonfida"}},KIN:{symbol:"KIN",name:"Kin",mint:"kinXdEcpDQeHPEuQnqmUgtYykqKGVFq6CeVX5iAHJq6",decimals:5,extensions:{coingeckoId:"kin"}},MAPS:{symbol:"MAPS",name:"MAPS",mint:"MAPS41MDahZ9QdKXhVa4dWB9RuyfV4XqhyAZ8XcYepb",decimals:6,extensions:{coingeckoId:"maps"}},OXY:{symbol:"OXY",name:"Oxygen",mint:"z3dn17yLaGMKffVogeFHQ9zWVcXgqgf3PQnDsNs2g6M",decimals:6,extensions:{coingeckoId:"oxygen"}},RAY:{symbol:"RAY",name:"Raydium",mint:"4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R",decimals:6,extensions:{coingeckoId:"raydium"}},xCOPE:{symbol:"xCOPE",name:"xCOPE",mint:"3K6rftdAaQYMPunrtNRHgnK2UAtjm2JwyT2oCiTDouYE",decimals:0,extensions:{coingeckoId:"cope"}},COPE:{symbol:"COPE",name:"Cope",mint:"8HGyAAB1yoM1ttS7pXjHMa3dukTFGQggnFFH3hJZgzQh",decimals:6,extensions:{coingeckoId:"cope"}},STEP:{symbol:"STEP",name:"Step Finance",mint:"StepAscQoEioFxxWGnh2sLBDFp9d8rvKz2Yp39iDpyT",decimals:9,extensions:{coingeckoId:"step-finance"}},MEDIA:{symbol:"MEDIA",name:"Media Network",mint:"ETAtLmCmsoiEEKfNrHKJ2kYy3MoABhU6NQvpSfij5tDs",decimals:6,extensions:{coingeckoId:"media-network"}},ROPE:{symbol:"ROPE",name:"Rope Token",mint:"8PMHT4swUMtBzgHnh5U564N5sjPSiUz2cjEQzFnnP1Fo",decimals:9,extensions:{coingeckoId:"rope-token"}},MER:{symbol:"MER",name:"Mercurial",mint:"MERt85fc5boKw3BW1eYdxonEuJNvXbiMbs6hvheau5K",decimals:6,extensions:{coingeckoId:"mercurial"}},TULIP:{symbol:"TULIP",name:"Tulip Protocol",mint:"TuLipcqtGVXP9XR62wM8WWCm6a9vhLs7T1uoWBk6FDs",decimals:6,extensions:{coingeckoId:"solfarm"}},SNY:{symbol:"SNY",name:"SNY",mint:"4dmKkXNHdgYsXqBHCuMikNQWwVomZURhYvkkX5c4pQ7y",decimals:6,extensions:{coingeckoId:"synthetify-token"}},SLRS:{symbol:"SLRS",name:"SLRS",mint:"SLRSSpSLUTP7okbCUBYStWCo1vUgyt775faPqz8HUMr",decimals:6,extensions:{coingeckoId:"solrise-finance"}},WOO:{symbol:"WOO",name:"WOO Network",mint:"E5rk3nmgLUuKUiS94gg4bpWwWwyjCMtddsAXkTFLtHEy",decimals:6,extensions:{coingeckoId:"woo-network"}},BOP:{symbol:"BOP",name:"Boring Protocol",mint:"BLwTnYKqf7u4qjgZrrsKeNs2EzWkMLqVCu6j8iHyrNA3",decimals:8,extensions:{coingeckoId:"boring-protocol"}},SAMO:{symbol:"SAMO",name:"Samoyedcoin",mint:"7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU",decimals:9,extensions:{coingeckoId:"samoyedcoin"}},renBTC:{symbol:"renBTC",name:"renBTC",mint:"CDJWUqTcYTVAKXAVXoQZFes5JUFc7owSeq7eMQcDSbo5",decimals:8,extensions:{coingeckoId:"renbtc"}},renDOGE:{symbol:"renDOGE",name:"renDOGE",mint:"ArUkYE2XDKzqy77PRRGjo4wREWwqk6RXTfM9NeqzPvjU",decimals:8,extensions:{coingeckoId:"rendoge"}},LIKE:{symbol:"LIKE",name:"Only1",mint:"3bRTivrVsitbmCTGtqwp7hxXPsybkjn4XLNtPsHqa3zR",decimals:9,extensions:{coingeckoId:"only1"}},DXL:{symbol:"DXL",name:"Dexlab",mint:"GsNzxJfFn6zQdJGeYsupJWzUAm57Ba7335mfhWvFiE9Z",decimals:6,extensions:{coingeckoId:"dexlab"}},mSOL:{symbol:"mSOL",name:"Marinade staked SOL",mint:"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So",decimals:9,extensions:{coingeckoId:"msol"}},PAI:{symbol:"PAI",name:"Parrot USD",mint:"Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS",decimals:6,extensions:{coingeckoId:"parrot-usd"}},PORT:{symbol:"PORT",name:"Port Finance",mint:"PoRTjZMPXb9T7dyU7tpLEZRQj7e6ssfAE62j2oQuc6y",decimals:6,extensions:{coingeckoId:"port-finance"}},MNGO:{symbol:"MNGO",name:"Mango",mint:"MangoCzJ36AjZyKwVj3VnYU4GTonjfVEnJmvvWaxLac",decimals:6,extensions:{coingeckoId:"mango-markets"}},CRP:{symbol:"CRP",name:"CropperFinance",mint:"DubwWZNWiNGMMeeQHPnMATNj77YZPZSAz2WVR5WjLJqz",decimals:9,extensions:{coingeckoId:"cropperfinance"}},ATLAS:{symbol:"ATLAS",name:"Star Atlas",mint:"ATLASXmbPQxBUYbxPsV97usA3fPQYEqzQBUHgiFCUsXx",decimals:8,extensions:{coingeckoId:"star-atlas"}},POLIS:{symbol:"POLIS",name:"Star Atlas DAO",mint:"poLisWXnNRwC6oBu1vHiuKQzFjGL4XDSu4g9qjz9qVk",decimals:8,extensions:{coingeckoId:"star-atlas-dao"}},GRAPE:{symbol:"GRAPE",name:"Grape Protocol",mint:"8upjSpvjcdpuzhfR1zriwg5NXkwDruejqNE9WNbPRtyA",decimals:6,extensions:{coingeckoId:"grape-2"}},GENE:{symbol:"GENE",name:"Genopets",mint:"GENEtH5amGSi8kHAtQoezp1XEXwZJ8vcuePYnXdKrMYz",decimals:9,extensions:{coingeckoId:"genopets"}},DFL:{symbol:"DFL",name:"DeFi Land",mint:"DFL1zNkaGPWm1BqAVqRjCZvHmwTFrEaJtbzJWgseoNJh",decimals:9,extensions:{coingeckoId:"defi-land"}},CHEEMS:{symbol:"CHEEMS",name:"Cheems",mint:"3FoUAsGDbvTD6YZ4wVKJgTB76onJUKz7GPEBNiR5b8wc",decimals:4,extensions:{coingeckoId:"cheems"}},stSOL:{symbol:"stSOL",name:"Lido Staked SOL",mint:"7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj",decimals:9,extensions:{coingeckoId:"lido-staked-sol"}},LARIX:{symbol:"LARIX",name:"Larix",mint:"Lrxqnh6ZHKbGy3dcrCED43nsoLkM1LTzU2jRfWe8qUC",decimals:6,extensions:{coingeckoId:"larix"}},RIN:{symbol:"RIN",name:"Aldrin",mint:"E5ndSkaB17Dm7CsD22dvcjfrYSDLCxFcMd6z8ddCk5wp",decimals:9,extensions:{coingeckoId:"aldrin"}},APEX:{symbol:"APEX",name:"ApeXit Finance",mint:"51tMb3zBKDiQhNwGqpgwbavaGH54mk8fXFzxTc1xnasg",decimals:9,extensions:{coingeckoId:"apexit-finance"}},MNDE:{symbol:"MNDE",name:"Marinade",mint:"MNDEFzGvMt87ueuHvVU9VcTqsAP5b3fTGPsHuuPA5ey",decimals:9,extensions:{coingeckoId:"marinade"}},LIQ:{symbol:"LIQ",name:"LIQ Protocol",mint:"4wjPQJ6PrkC4dHhYghwJzGBVP78DkBzA2U3kHoFNBuhj",decimals:6,extensions:{coingeckoId:"liq-protocol"}},WAG:{symbol:"WAG",name:"Waggle Network",mint:"5tN42n9vMi6ubp67Uy4NnmM5DMZYN8aS8GeB3bEDHr6E",decimals:9,extensions:{coingeckoId:"waggle-network"}},wLDO:{symbol:"wLDO",name:"wLDO",mint:"HZRCwxP2Vq9PCpPXooayhJ2bxTpo5xfpQrwB1svh332p",decimals:8,extensions:{}},SLIM:{symbol:"SLIM",name:"Solanium",mint:"xxxxa1sKNGwFtw2kFn8XauW9xq8hBZ5kVtcSesTT9fW",decimals:6,extensions:{coingeckoId:"solanium"}},PRT:{symbol:"PRT",name:"Parrot Protocol",mint:"PRT88RkA4Kg5z7pKnezeNH4mafTvtQdfFgpQTGRjz44",decimals:6,extensions:{coingeckoId:"parrot-protocol"}},SBR:{symbol:"SBR",name:"SBR",mint:"Saber2gLauYim4Mvftnrasomsv6NvAuncvMEZwcLpD1",decimals:6,extensions:{}},FAB:{symbol:"FAB",name:"Fabric",mint:"EdAhkbj5nF9sRM7XN7ewuW8C9XEUMs8P7cnoQ57SYE96",decimals:9,extensions:{coingeckoId:"fabric"}},ABR:{symbol:"ABR",name:"Allbridge",mint:"a11bdAAuV8iB2fu7X6AxAvDTo1QZ8FXB3kk5eecdasp",decimals:9,extensions:{coingeckoId:"allbridge"}},IVN:{symbol:"IVN",name:"Investin",mint:"iVNcrNE9BRZBC9Aqf753iZiZfbszeAVUoikgT9yvr2a",decimals:6,extensions:{coingeckoId:"investin"}},CYS:{symbol:"CYS",name:"Cyclos",mint:"BRLsMczKuaR5w9vSubF4j8HwEGGprVAyyVgS4EX7DKEg",decimals:6,extensions:{coingeckoId:"cyclos"}},FRKT:{symbol:"FRKT",name:"FRAKT Token",mint:"ErGB9xa24Szxbk1M28u2Tx8rKPqzL6BroNkkzk5rG4zj",decimals:8,extensions:{coingeckoId:"frakt-token"}},AURY:{symbol:"AURY",name:"Aurory",mint:"AURYydfxJib1ZkTir1Jn1J9ECYUtjb6rKQVmtYaixWPP",decimals:9,extensions:{coingeckoId:"aurory"}},SYP:{symbol:"SYP",name:"Sypool",mint:"FnKE9n6aGjQoNWRBZXy4RW6LZVao7qwBonUbiD7edUmZ",decimals:9,extensions:{coingeckoId:"sypool"}},WOOF:{symbol:"WOOF",name:"WOOF",mint:"9nEqaUcb16sQ3Tn1psbkWqyhPdLmfHWjKGymREjsAgTE",decimals:6,extensions:{coingeckoId:"woof-token"}},ORCA:{symbol:"ORCA",name:"Orca",mint:"orcaEKTdK7LKz57vaAYr9QeNsVEPfiu6QeMU1kektZE",decimals:6,extensions:{coingeckoId:"orca"}},SLND:{symbol:"SLND",name:"Solend",mint:"SLNDpmoWTVADgEdndyvWzroNL7zSi1dF9PC3xHGtPwp",decimals:6,extensions:{coingeckoId:"solend"}},weWETH:{symbol:"weWETH",name:"weWETH",mint:"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs",decimals:8,extensions:{}},weUNI:{symbol:"weUNI",name:"weUNI",mint:"8FU95xFJhUUkyyCLU13HSzDLs7oC4QZdXQHL6SCeab36",decimals:8,extensions:{}},weSUSHI:{symbol:"weSUSHI",name:"weSUSHI",mint:"ChVzxWRmrTeSgwd3Ui3UumcN8KX7VK3WaD4KGeSKpypj",decimals:8,extensions:{}},GOFX:{symbol:"GOFX",name:"GooseFX",mint:"GFX1ZjR2P15tmrSwow6FjyDYcEkoFb4p4gJCpLBjaxHD",decimals:9,extensions:{coingeckoId:"goosefx"}},IN:{symbol:"IN",name:"Invictus",mint:"inL8PMVd6iiW3RCBJnr5AsrRN6nqr4BTrcNuQWQSkvY",decimals:9,extensions:{coingeckoId:"invictus"}},weDYDX:{symbol:"weDYDX",name:"weDYDX",mint:"4Hx6Bj56eGyw8EJrrheM6LBQAvVYRikYCWsALeTrwyRU",decimals:8,extensions:{}},STARS:{symbol:"STARS",name:"StarLaunch",mint:"HCgybxq5Upy8Mccihrp7EsmwwFqYZtrHrsmsKwtGXLgW",decimals:6,extensions:{coingeckoId:"starlaunch"}},weAXS:{symbol:"weAXS",name:"weAXS",mint:"HysWcbHiYY9888pHbaqhwLYZQeZrcQMXKQWRqS7zcPK5",decimals:8,extensions:{}},weSHIB:{symbol:"weSHIB",name:"weSHIB",mint:"CiKu4eHsVrc1eueVQeHn7qhXTcVu95gSQmBpX4utjL9z",decimals:8,extensions:{}},OXS:{symbol:"OXS",name:"Oxbull Solana",mint:"4TGxgCSJQx2GQk9oHZ8dC5m3JNXTYZHjXumKAW3vLnNx",decimals:9,extensions:{coingeckoId:"oxbull-solana"}},CWAR:{symbol:"CWAR",name:"Cryowar",mint:"HfYFjMKNZygfMC8LsQ8LtpPsPxEJoXJx4M6tqi75Hajo",decimals:9,extensions:{coingeckoId:"cryowar-token"}},UPS:{symbol:"UPS",name:"UPFI Network",mint:"EwJN2GqUGXXzYmoAciwuABtorHczTA5LqbukKXV1viH7",decimals:6,extensions:{coingeckoId:"upfi-network"}},weSAND:{symbol:"weSAND",name:"weSAND",mint:"49c7WuCZkQgc3M4qH8WuEUNXfgwupZf1xqWkDQ7gjRGt",decimals:8,extensions:{}},weMANA:{symbol:"weMANA",name:"weMANA",mint:"7dgHoN8wBZCc5wbnQ2C47TDnBMAxG4Q5L3KjP67z8kNi",decimals:8,extensions:{}},CAVE:{symbol:"CAVE",name:"Crypto Cavemen",mint:"4SZjjNABoqhbd4hnapbvoEPEqT8mnNkfbEoAwALf1V8t",decimals:6,extensions:{coingeckoId:"cave"}},JSOL:{symbol:"JSOL",name:"JPool",mint:"7Q2afV64in6N6SeZsAAB81TJzwDoD6zpqmHkzi9Dcavn",decimals:9,extensions:{coingeckoId:"jpool"}},APT:{symbol:"APT",name:"Apricot",mint:"APTtJyaRX5yGTsJU522N4VYWg3vCvSb65eam5GrPT5Rt",decimals:6,extensions:{coingeckoId:"apricot"}},SONAR:{symbol:"SONAR",name:"SonarWatch",mint:"sonarX4VtVkQemriJeLm6CKeW3GDMyiBnnAEMw1MRAE",decimals:9,extensions:{coingeckoId:"sonarwatch"}},SHILL:{symbol:"SHILL",name:"SHILL Token",mint:"6cVgJUqo4nmvQpbgrDZwyfd6RwWw5bfnCamS3M9N1fd",decimals:6,extensions:{coingeckoId:"shill-token"}},TTT:{symbol:"TTT",name:"TabTrader",mint:"FNFKRV3V8DtA3gVJN6UshMiLGYA8izxFwkNWmJbFjmRj",decimals:6,extensions:{coingeckoId:"tabtrader"}},BOKU:{symbol:"BOKU",name:"Boryoku Dragonz",mint:"CN7qFa5iYkHz99PTctvT4xXUHnxwjQ5MHxCuTJtPN5uS",decimals:9,extensions:{coingeckoId:"boku"}},MIMO:{symbol:"MIMO",name:"Million Monke",mint:"9TE7ebz1dsFo1uQ2T4oYAKSm39Y6fWuHrd6Uk6XaiD16",decimals:9,extensions:{coingeckoId:"million-monke"}},wbWBNB:{symbol:"wbWBNB",name:"wbWBNB",mint:"9gP2kCy3wA1ctvYWQk75guqXuHfrEomqydHLtcTCqiLa",decimals:8,extensions:{}},wePEOPLE:{symbol:"wePEOPLE",name:"wePEOPLE",mint:"CobcsUrt3p91FwvULYKorQejgsm5HoQdv5T8RUZ6PnLA",decimals:8,extensions:{}},XTAG:{symbol:"XTAG",name:"xHashtag",mint:"5gs8nf4wojB5EXgDUWNLwXpknzgV2YWDhveAeBZpVLbp",decimals:6,extensions:{coingeckoId:"xhashtag"}},KKO:{symbol:"KKO",name:"Kineko",mint:"kiNeKo77w1WBEzFFCXrTDRWGRWGP8yHvKC9rX6dqjQh",decimals:9,extensions:{coingeckoId:"kineko"}},VI:{symbol:"VI",name:"Vybit",mint:"7zBWymxbZt7PVHQzfi3i85frc1YRiQc23K7bh3gos8ZC",decimals:9,extensions:{coingeckoId:"vybit"}},SOLC:{symbol:"SOLC",name:"Solcubator",mint:"Bx1fDtvTN6NvE4kjdPHQXtmGSg582bZx9fGy4DQNMmAT",decimals:9,extensions:{coingeckoId:"solcubator"}},STR:{symbol:"STR",name:"Solster",mint:"9zoqdwEBKWEi9G5Ze8BSkdmppxGgVv1Kw4LuigDiNr9m",decimals:9,extensions:{coingeckoId:"solster"}},SPWN:{symbol:"SPWN",name:"Bitspawn",mint:"5U9QqCPhqXAJcEv9uyzFJd5zhN93vuPk1aNNkXnUfPnt",decimals:9,extensions:{coingeckoId:"bitspawn"}},ISOLA:{symbol:"ISOLA",name:"Intersola",mint:"333iHoRM2Awhf9uVZtSyTfU8AekdGrgQePZsKMFPgKmS",decimals:6,extensions:{coingeckoId:"intersola"}},RUN:{symbol:"RUN",name:"Run",mint:"6F9XriABHfWhit6zmMUYAQBSy6XK5VF1cHXuW5LDpRtC",decimals:9,extensions:{coingeckoId:"run"}},REAL:{symbol:"REAL",name:"Realy Metaverse",mint:"AD27ov5fVU2XzwsbvnFvb1JpCBaCB5dRXrczV9CqSVGb",decimals:9,extensions:{coingeckoId:"realy-metaverse"}},CRWNY:{symbol:"CRWNY",name:"CRWNY",mint:"CRWNYkqdgvhGGae9CKfNka58j6QQkaD5bLhKXvUYqnc1",decimals:6,extensions:{}},BLOCK:{symbol:"BLOCK",name:"Blockasset",mint:"NFTUkR4u7wKxy9QLaX2TGvd9oZSWoMo4jqSJqdMb7Nk",decimals:6,extensions:{coingeckoId:"blockasset"}},SOLAR:{symbol:"SOLAR",name:"Solar",mint:"2wmKXX1xsxLfrvjEPrt2UHiqj8Gbzwxvffr9qmNjsw8g",decimals:9,extensions:{coingeckoId:"solar"}},BASIS:{symbol:"BASIS",name:"basis.markets",mint:"Basis9oJw9j8cw53oMV7iqsgo6ihi9ALw4QR31rcjUJa",decimals:6,extensions:{coingeckoId:"basis-markets"}},SOLX:{symbol:"SOLX",name:"Soldex",mint:"CH74tuRLTYcxG7qNJCsV9rghfLXJCQJbsu7i52a8F1Gn",decimals:9,extensions:{coingeckoId:"soldex"}},CHICKS:{symbol:"CHICKS",name:"SolChicks Token",mint:"cxxShYRVcepDudXhe7U62QHvw8uBJoKFifmzggGKVC2",decimals:9,extensions:{coingeckoId:"solchicks-token"}},GST:{symbol:"GST",name:"GST",mint:"AFbX8oGjGpmVFywbVouvhQSRmiW2aR1mohfahi4Y2AdB",decimals:9,extensions:{coingeckoId:"gst"}},MBS:{symbol:"MBS",name:"MonkeyBall",mint:"Fm9rHUTF5v3hwMLbStjZXqNBBoZyGriQaFM6sTFz3K8A",decimals:6,extensions:{coingeckoId:"monkeyball"}},PRISM:{symbol:"PRISM",name:"Prism",mint:"PRSMNsEPqhGVCH1TtWiJqPjJyh2cKrLostPZTNy1o5x",decimals:6,extensions:{coingeckoId:"prism"}},MEAN:{symbol:"MEAN",name:"Meanfi",mint:"MEANeD3XDdUmNMsRGjASkSWdC8prLYsoRJ61pPeHctD",decimals:6,extensions:{coingeckoId:"meanfi"}},TINY:{symbol:"TINY",name:"Tiny Colony",mint:"HKfs24UEDQpHS5hUyKYkHd9q7GY5UQ679q2bokeL2whu",decimals:6,extensions:{coingeckoId:"tiny-colony"}},SHDW:{symbol:"SHDW",name:"GenesysGo Shadow",mint:"SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y",decimals:9,extensions:{coingeckoId:"genesysgo-shadow"}},SCY:{symbol:"SCY",name:"Synchrony",mint:"SCYfrGCw8aDiqdgcpdGjV6jp4UVVQLuphxTDLNWu36f",decimals:9,extensions:{coingeckoId:"synchrony"}},SLC:{symbol:"SLC",name:"Solice",mint:"METAmTMXwdb8gYzyCPfXXFmZZw4rUsXX58PNsDg7zjL",decimals:6,extensions:{coingeckoId:"solice"}}},er={FIDA_RAY_V4:{symbol:"FIDA-RAY",name:"FIDA-RAY V4 LP",mint:"DsBuznXRTmzvEdb36Dx3aVLVo1XmH7r1PRZUFugLPTFv",base:en.FIDA,quote:en.RAY,decimals:en.FIDA.decimals,version:4},OXY_RAY_V4:{symbol:"OXY-RAY",name:"OXY-RAY V4 LP",mint:"FwaX9W7iThTZH5MFeasxdLpxTVxRcM7ZHieTCnYog8Yb",base:en.OXY,quote:en.RAY,decimals:en.OXY.decimals,version:4},MAPS_RAY_V4:{symbol:"MAPS-RAY",name:"MAPS-RAY V4 LP",mint:"CcKK8srfVdTSsFGV3VLBb2YDbzF4T4NM2C3UEjC39RLP",base:en.MAPS,quote:en.RAY,decimals:en.MAPS.decimals,version:4},KIN_RAY_V4:{symbol:"KIN-RAY",name:"KIN-RAY V4 LP",mint:"CHT8sft3h3gpLYbCcZ9o27mT5s3Z6VifBVbUiDvprHPW",base:en.KIN,quote:en.RAY,decimals:6,version:4},RAY_USDT_V4:{symbol:"RAY-USDT",name:"RAY-USDT V4 LP",mint:"C3sT1R3nsw4AVdepvLTLKr5Gvszr7jufyBWUCvy4TUvT",base:en.RAY,quote:en.USDT,decimals:en.RAY.decimals,version:4},SOL_USDC_V4:{symbol:"SOL-USDC",name:"SOL-USDC V4 LP",mint:"8HoQnePLqPj4M7PUDzfw8e3Ymdwgc7NLGnaTUapubyvu",base:en.WSOL,quote:en.USDC,decimals:en.WSOL.decimals,version:4},YFI_USDC_V4:{symbol:"YFI-USDC",name:"YFI-USDC V4 LP",mint:"865j7iMmRRycSYUXzJ33ZcvLiX9JHvaLidasCyUyKaRE",base:en.YFI,quote:en.USDC,decimals:en.YFI.decimals,version:4},SRM_USDC_V4:{symbol:"SRM-USDC",name:"SRM-USDC V4 LP",mint:"9XnZd82j34KxNLgQfz29jGbYdxsYznTWRpvZE3SRE7JG",base:en.SRM,quote:en.USDC,decimals:en.SRM.decimals,version:4},FTT_USDC_V4:{symbol:"FTT-USDC",name:"FTT-USDC V4 LP",mint:"75dCoKfUHLUuZ4qEh46ovsxfgWhB4icc3SintzWRedT9",base:en.FTT,quote:en.USDC,decimals:en.FTT.decimals,version:4},BTC_USDC_V4:{symbol:"BTC-USDC",name:"BTC-USDC V4 LP",mint:"2hMdRdVWZqetQsaHG8kQjdZinEMBz75vsoWTCob1ijXu",base:en.BTC,quote:en.USDC,decimals:en.BTC.decimals,version:4},SUSHI_USDC_V4:{symbol:"SUSHI-USDC",name:"SUSHI-USDC V4 LP",mint:"2QVjeR9d2PbSf8em8NE8zWd8RYHjFtucDUdDgdbDD2h2",base:en.SUSHI,quote:en.USDC,decimals:en.SUSHI.decimals,version:4},TOMO_USDC_V4:{symbol:"TOMO-USDC",name:"TOMO-USDC V4 LP",mint:"CHyUpQFeW456zcr5XEh4RZiibH8Dzocs6Wbgz9aWpXnQ",base:en.TOMO,quote:en.USDC,decimals:en.TOMO.decimals,version:4},LINK_USDC_V4:{symbol:"LINK-USDC",name:"LINK-USDC V4 LP",mint:"BqjoYjqKrXtfBKXeaWeAT5sYCy7wsAYf3XjgDWsHSBRs",base:en.LINK,quote:en.USDC,decimals:en.LINK.decimals,version:4},ETH_USDC_V4:{symbol:"ETH-USDC",name:"ETH-USDC V4 LP",mint:"13PoKid6cZop4sj2GfoBeujnGfthUbTERdE5tpLCDLEY",base:en.ETH,quote:en.USDC,decimals:en.ETH.decimals,version:4},xCOPE_USDC_V4:{symbol:"xCOPE-USDC",name:"xCOPE-USDC V4 LP",mint:"2Vyyeuyd15Gp8aH6uKE72c4hxc8TVSLibxDP9vzspQWG",base:en.xCOPE,quote:en.USDC,decimals:en.xCOPE.decimals,version:4},SOL_USDT_V4:{symbol:"SOL-USDT",name:"SOL-USDT V4 LP",mint:"Epm4KfTj4DMrvqn6Bwg2Tr2N8vhQuNbuK8bESFp4k33K",base:en.WSOL,quote:en.USDT,decimals:en.WSOL.decimals,version:4},YFI_USDT_V4:{symbol:"YFI-USDT",name:"YFI-USDT V4 LP",mint:"FA1i7fej1pAbQbnY8NbyYUsTrWcasTyipKreDgy1Mgku",base:en.YFI,quote:en.USDT,decimals:en.YFI.decimals,version:4},SRM_USDT_V4:{symbol:"SRM-USDT",name:"SRM-USDT V4 LP",mint:"HYSAu42BFejBS77jZAZdNAWa3iVcbSRJSzp3wtqCbWwv",base:en.SRM,quote:en.USDT,decimals:en.SRM.decimals,version:4},FTT_USDT_V4:{symbol:"FTT-USDT",name:"FTT-USDT V4 LP",mint:"2cTCiUnect5Lap2sk19xLby7aajNDYseFhC9Pigou11z",base:en.FTT,quote:en.USDT,decimals:en.FTT.decimals,version:4},BTC_USDT_V4:{symbol:"BTC-USDT",name:"BTC-USDT V4 LP",mint:"DgGuvR9GSHimopo3Gc7gfkbKamLKrdyzWkq5yqA6LqYS",base:en.BTC,quote:en.USDT,decimals:en.BTC.decimals,version:4},SUSHI_USDT_V4:{symbol:"SUSHI-USDT",name:"SUSHI-USDT V4 LP",mint:"Ba26poEYDy6P2o95AJUsewXgZ8DM9BCsmnU9hmC9i4Ki",base:en.SUSHI,quote:en.USDT,decimals:en.SUSHI.decimals,version:4},TOMO_USDT_V4:{symbol:"TOMO-USDT",name:"TOMO-USDT V4 LP",mint:"D3iGro1vn6PWJXo9QAPj3dfta6dKkHHnmiiym2EfsAmi",base:en.TOMO,quote:en.USDT,decimals:en.TOMO.decimals,version:4},LINK_USDT_V4:{symbol:"LINK-USDT",name:"LINK-USDT V4 LP",mint:"Dr12Sgt9gkY8WU5tRkgZf1TkVWJbvjYuPAhR3aDCwiiX",base:en.LINK,quote:en.USDT,decimals:en.LINK.decimals,version:4},ETH_USDT_V4:{symbol:"ETH-USDT",name:"ETH-USDT V4 LP",mint:"nPrB78ETY8661fUgohpuVusNCZnedYCgghzRJzxWnVb",base:en.ETH,quote:en.USDT,decimals:en.ETH.decimals,version:4},YFI_SRM_V4:{symbol:"YFI-SRM",name:"YFI-SRM V4 LP",mint:"EGJht91R7dKpCj8wzALkjmNdUUUcQgodqWCYweyKcRcV",base:en.YFI,quote:en.SRM,decimals:en.YFI.decimals,version:4},FTT_SRM_V4:{symbol:"FTT-SRM",name:"FTT-SRM V4 LP",mint:"AsDuPg9MgPtt3jfoyctUCUgsvwqAN6RZPftqoeiPDefM",base:en.FTT,quote:en.SRM,decimals:en.FTT.decimals,version:4},BTC_SRM_V4:{symbol:"BTC-SRM",name:"BTC-SRM V4 LP",mint:"AGHQxXb3GSzeiLTcLtXMS2D5GGDZxsB2fZYZxSB5weqB",base:en.BTC,quote:en.SRM,decimals:en.BTC.decimals,version:4},SUSHI_SRM_V4:{symbol:"SUSHI-SRM",name:"SUSHI-SRM V4 LP",mint:"3HYhUnUdV67j1vn8fu7ExuVGy5dJozHEyWvqEstDbWwE",base:en.SUSHI,quote:en.SRM,decimals:en.SUSHI.decimals,version:4},TOMO_SRM_V4:{symbol:"TOMO-SRM",name:"TOMO-SRM V4 LP",mint:"GgH9RnKrQpaMQeqmdbMvs5oo1A24hERQ9wuY2pSkeG7x",base:en.TOMO,quote:en.SRM,decimals:en.TOMO.decimals,version:4},LINK_SRM_V4:{symbol:"LINK-SRM",name:"LINK-SRM V4 LP",mint:"GXN6yJv12o18skTmJXaeFXZVY1iqR18CHsmCT8VVCmDD",base:en.LINK,quote:en.SRM,decimals:en.LINK.decimals,version:4},ETH_SRM_V4:{symbol:"ETH-SRM",name:"ETH-SRM V4 LP",mint:"9VoY3VERETuc2FoadMSYYizF26mJinY514ZpEzkHMtwG",base:en.ETH,quote:en.SRM,decimals:en.ETH.decimals,version:4},SRM_SOL_V4:{symbol:"SRM-SOL",name:"SRM-SOL V4 LP",mint:"AKJHspCwDhABucCxNLXUSfEzb7Ny62RqFtC9uNjJi4fq",base:en.SRM,quote:en.WSOL,decimals:en.SRM.decimals,version:4},STEP_USDC_V4:{symbol:"STEP-USDC",name:"STEP-USDC V4 LP",mint:"3k8BDobgihmk72jVmXYLE168bxxQUhqqyESW4dQVktqC",base:en.STEP,quote:en.USDC,decimals:en.STEP.decimals,version:4},MEDIA_USDC_V4:{symbol:"MEDIA-USDC",name:"MEDIA-USDC V4 LP",mint:"A5zanvgtioZGiJMdEyaKN4XQmJsp1p7uVxaq2696REvQ",base:en.MEDIA,quote:en.USDC,decimals:en.MEDIA.decimals,version:4},ROPE_USDC_V4:{symbol:"ROPE-USDC",name:"ROPE-USDC V4 LP",mint:"Cq4HyW5xia37tKejPF2XfZeXQoPYW6KfbPvxvw5eRoUE",base:en.ROPE,quote:en.USDC,decimals:en.ROPE.decimals,version:4},MER_USDC_V4:{symbol:"MER-USDC",name:"MER-USDC V4 LP",mint:"3H9NxvaZoxMZZDZcbBDdWMKbrfNj7PCF5sbRwDr7SdDW",base:en.MER,quote:en.USDC,decimals:en.MER.decimals,version:4},COPE_USDC_V4:{symbol:"COPE-USDC",name:"COPE-USDC V4 LP",mint:"Cz1kUvHw98imKkrqqu95GQB9h1frY8RikxPojMwWKGXf",base:en.COPE,quote:en.USDC,decimals:en.COPE.decimals,version:4},ALEPH_USDC_V4:{symbol:"ALEPH-USDC",name:"ALEPH-USDC V4 LP",mint:"iUDasAP2nXm5wvTukAHEKSdSXn8vQkRtaiShs9ceGB7",base:en.ALEPH,quote:en.USDC,decimals:en.ALEPH.decimals,version:4},TULIP_USDC_V4:{symbol:"TULIP-USDC",name:"TULIP-USDC V4 LP",mint:"2doeZGLJyACtaG9DCUyqMLtswesfje1hjNA11hMdj6YU",base:en.TULIP,quote:en.USDC,decimals:en.TULIP.decimals,version:4},WOO_USDC_V4:{symbol:"WOO-USDC",name:"WOO-USDC V4 LP",mint:"7cu42ao8Jgrd5A3y3bNQsCxq5poyGZNmTydkGfJYQfzh",base:en.WOO,quote:en.USDC,decimals:en.WOO.decimals,version:4},SNY_USDC_V4:{symbol:"SNY-USDC",name:"SNY-USDC V4 LP",mint:"G8qcfeFqxwbCqpxv5LpLWxUCd1PyMB5nWb5e5YyxLMKg",base:en.SNY,quote:en.USDC,decimals:en.SNY.decimals,version:4},BOP_RAY_V4:{symbol:"BOP-RAY",name:"BOP-RAY V4 LP",mint:"9nQPYJvysyfnXhQ6nkK5V7sZG26hmDgusfdNQijRk5LD",base:en.BOP,quote:en.RAY,decimals:en.BOP.decimals,version:4},SLRS_USDC_V4:{symbol:"SLRS-USDC",name:"SLRS-USDC V4 LP",mint:"2Xxbm1hdv5wPeen5ponDSMT3VqhGMTQ7mH9stNXm9shU",base:en.SLRS,quote:en.USDC,decimals:en.SLRS.decimals,version:4},SAMO_RAY_V4:{symbol:"SAMO-RAY",name:"SAMO-RAY V4 LP",mint:"HwzkXyX8B45LsaHXwY8su92NoRBS5GQC32HzjQRDqPnr",base:en.SAMO,quote:en.RAY,decimals:en.SAMO.decimals,version:4},renBTC_USDC_V4:{symbol:"renBTC-USDC",name:"renBTC-USDC V4 LP",mint:"CTEpsih91ZLo5gunvryLpJ3pzMjmt5jbS6AnSQrzYw7V",base:en.renBTC,quote:en.USDC,decimals:en.renBTC.decimals,version:4},renDOGE_USDC_V4:{symbol:"renDOGE-USDC",name:"renDOGE-USDC V4 LP",mint:"Hb8KnZNKvRxu7pgMRWJgoMSMcepfvNiBFFDDrdf9o3wA",base:en.renDOGE,quote:en.USDC,decimals:en.renDOGE.decimals,version:4},RAY_USDC_V4:{symbol:"RAY-USDC",name:"RAY-USDC V4 LP",mint:"FbC6K13MzHvN42bXrtGaWsvZY9fxrackRSZcBGfjPc7m",base:en.RAY,quote:en.USDC,decimals:en.RAY.decimals,version:4},RAY_SRM_V4:{symbol:"RAY-SRM",name:"RAY-SRM V4 LP",mint:"7P5Thr9Egi2rvMmEuQkLn8x8e8Qro7u2U7yLD2tU2Hbe",base:en.RAY,quote:en.SRM,decimals:en.RAY.decimals,version:4},RAY_ETH_V4:{symbol:"RAY-ETH",name:"RAY-ETH V4 LP",mint:"mjQH33MqZv5aKAbKHi8dG3g3qXeRQqq1GFcXceZkNSr",base:en.RAY,quote:en.ETH,decimals:en.RAY.decimals,version:4},RAY_SOL_V4:{symbol:"RAY-SOL",name:"RAY-SOL V4 LP",mint:"89ZKE4aoyfLBe2RuV6jM3JGNhaV18Nxh8eNtjRcndBip",base:en.RAY,quote:en.WSOL,decimals:en.RAY.decimals,version:4},DXL_USDC_V4:{symbol:"DXL-USDC",name:"DXL-USDC V4 LP",mint:"4HFaSvfgskipvrzT1exoVKsUZ174JyExEsA8bDfsAdY5",base:en.DXL,quote:en.USDC,decimals:en.DXL.decimals,version:4},LIKE_USDC_V4:{symbol:"LIKE-USDC",name:"LIKE-USDC V4 LP",mint:"cjZmbt8sJgaoyWYUttomAu5LJYU44ZrcKTbzTSEPDVw",base:en.LIKE,quote:en.USDC,decimals:en.LIKE.decimals,version:4},mSOL_USDC_V4:{symbol:"mSOL-USDC",name:"mSOL-USDC V4 LP",mint:"4xTpJ4p76bAeggXoYywpCCNKfJspbuRzZ79R7pRhbqSf",base:en.mSOL,quote:en.USDC,decimals:en.mSOL.decimals,version:4},mSOL_SOL_V4:{symbol:"mSOL-SOL",name:"mSOL-SOL V4 LP",mint:"5ijRoAHVgd5T5CNtK5KDRUBZ7Bffb69nktMj5n6ks6m4",base:en.mSOL,quote:en.WSOL,decimals:en.mSOL.decimals,version:4},MER_PAI_V4:{symbol:"MER-PAI",name:"MER-PAI V4 LP",mint:"DU5RT2D9EviaSmX6Ta8MZwMm85HwSEqGMRdqUiuCGfmD",base:en.MER,quote:en.PAI,decimals:en.MER.decimals,version:4},PORT_USDC_V4:{symbol:"PORT-USDC",name:"PORT-USDC V4 LP",mint:"9tmNtbUCrLS15qC4tEfr5NNeqcqpZ4uiGgi2vS5CLQBS",base:en.PORT,quote:en.USDC,decimals:en.PORT.decimals,version:4},MNGO_USDC_V4:{symbol:"MNGO-USDC",name:"MNGO-USDC V4 LP",mint:"DkiqCQ792n743xjWQVCbBUaVtkdiuvQeYndM53ReWnCC",base:en.MNGO,quote:en.USDC,decimals:en.MNGO.decimals,version:4},ATLAS_USDC_V4:{symbol:"ATLAS-USDC",name:"ATLAS-USDC V4 LP",mint:"9shGU9f1EsxAbiR567MYZ78WUiS6ZNCYbHe53WUULQ7n",base:en.ATLAS,quote:en.USDC,decimals:en.ATLAS.decimals,version:4},POLIS_USDC_V4:{symbol:"POLIS-USDC",name:"POLIS-USDC V4 LP",mint:"8MbKSBpyXs8fVneKgt71jfHrn5SWtX8n4wMLpiVfF9So",base:en.POLIS,quote:en.USDC,decimals:en.POLIS.decimals,version:4},ATLAS_RAY_V4:{symbol:"ATLAS-RAY",name:"ATLAS-RAY V4 LP",mint:"418MFhkaYQtbn529wmjLLqL6uKxDz7j4eZBaV1cobkyd",base:en.ATLAS,quote:en.RAY,decimals:en.ATLAS.decimals,version:4},POLIS_RAY_V4:{symbol:"POLIS-RAY",name:"POLIS-RAY V4 LP",mint:"9ysGKUH6WqzjQEUT4dxqYCUaFNVK9QFEa24pGzjFq8xg",base:en.POLIS,quote:en.RAY,decimals:en.POLIS.decimals,version:4},ALEPH_RAY_V4:{symbol:"ALEPH-RAY",name:"ALEPH-RAY V4 LP",mint:"n76skjqv4LirhdLok2zJELXNLdRpYDgVJQuQFbamscy",base:en.ALEPH,quote:en.RAY,decimals:en.ALEPH.decimals,version:4},TULIP_RAY_V4:{symbol:"TULIP-RAY",name:"TULIP-RAY V4 LP",mint:"3AZTviji5qduMG2s4FfWGR3SSQmNUCyx8ao6UKCPg3oJ",base:en.TULIP,quote:en.RAY,decimals:en.TULIP.decimals,version:4},SLRS_RAY_V4:{symbol:"SLRS-RAY",name:"SLRS-RAY V4 LP",mint:"2pk78vsKT3jfJAcN2zbpMUnrR57SZrxHqaZYyFgp92mM",base:en.SLRS,quote:en.RAY,decimals:en.SLRS.decimals,version:4},MER_RAY_V4:{symbol:"MER-RAY",name:"MER-RAY V4 LP",mint:"214hxy3AbKoaEKgqcg2aC1cP5R67cGGAyDEg5GDwC7Ub",base:en.MER,quote:en.RAY,decimals:en.MER.decimals,version:4},MEDIA_RAY_V4:{symbol:"MEDIA-RAY",name:"MEDIA-RAY V4 LP",mint:"9Aseg5A1JD1yCiFFdDaNNxCiJ7XzrpZFmcEmLjXFdPaH",base:en.MEDIA,quote:en.RAY,decimals:en.MEDIA.decimals,version:4},SNY_RAY_V4:{symbol:"SNY-RAY",name:"SNY-RAY V4 LP",mint:"2k4quTuuLUxrSEhFH99qcoZzvgvVEc3b5sz3xz3qstfS",base:en.SNY,quote:en.RAY,decimals:en.SNY.decimals,version:4},LIKE_RAY_V4:{symbol:"LIKE-RAY",name:"LIKE-RAY V4 LP",mint:"7xqDycbFSCpUpzkYapFeyPJWPwEpV7zdWbYf2MVHTNjv",base:en.LIKE,quote:en.RAY,decimals:en.LIKE.decimals,version:4},COPE_RAY_V4:{symbol:"COPE-RAY",name:"COPE-RAY V4 LP",mint:"A7GCVHA8NSsbdFscHdoNU41tL1TRKNmCH4K94CgcLK9F",base:en.COPE,quote:en.RAY,decimals:en.COPE.decimals,version:4},ETH_SOL_V4:{symbol:"ETH-SOL",name:"ETH-SOL V4 LP",mint:"GKfgC86iJoMjwAtcyiLu6nWnjggqUXsDQihXkP14fDez",base:en.ETH,quote:en.WSOL,decimals:en.ETH.decimals,version:4},stSOL_USDC_V4:{symbol:"stSOL-USDC",name:"stSOL-USDC V4 LP",mint:"HDUJMwYZkjUZre63xUeDhdCi8c6LgUDiBqxmP3QC3VPX",base:en.stSOL,quote:en.USDC,decimals:en.stSOL.decimals,version:4},GRAPE_USDC_V4:{symbol:"GRAPE-USDC",name:"GRAPE-USDC V4 LP",mint:"A8ZYmnZ1vwxUa4wpJVUaJgegsuTEz5TKy5CiJXffvmpt",base:en.GRAPE,quote:en.USDC,decimals:en.GRAPE.decimals,version:4},LARIX_USDC_V4:{symbol:"LARIX-USDC",name:"LARIX-USDC V4 LP",mint:"7yieit4YsNsZ9CAK8H5ZEMvvk35kPEHHeXwp6naoWU9V",base:en.LARIX,quote:en.USDC,decimals:en.LARIX.decimals,version:4},RIN_USDC_V4:{symbol:"RIN-USDC",name:"RIN-USDC V4 LP",mint:"GfCWfrZez7BDmCSEeMERVDVUaaM2TEreyYUgb2cpuS3w",base:en.RIN,quote:en.USDC,decimals:en.RIN.decimals,version:4},APEX_USDC_V4:{symbol:"APEX-USDC",name:"APEX-USDC V4 LP",mint:"444cVqYyDxJNo6FqiMb9qQWFUd7tYzFRdDuJRFrSAGnU",base:en.APEX,quote:en.USDC,decimals:en.APEX.decimals,version:4},mSOL_RAY_V4:{symbol:"mSOL-RAY",name:"mSOL-RAY V4 LP",mint:"De2EHBAdkgfc72DpShqDGG42cV3iDWh8wvvZdPsiEcqP",base:en.mSOL,quote:en.RAY,decimals:en.mSOL.decimals,version:4},MNDE_mSOL_V4:{symbol:"MNDE-mSOL",name:"MNDE-mSOL V4 LP",mint:"4bh8XCzTHSbqbWN8o1Jn4ueBdz1LvJFoEasN6K6CQ8Ny",base:en.MNDE,quote:en.mSOL,decimals:en.MNDE.decimals,version:4},LARIX_RAY_V4:{symbol:"LARIX-RAY",name:"LARIX-RAY V4 LP",mint:"ZRDfSLgWGeaYSmhdPvFNKQQhDcYdZQaue2N8YDmHX4q",base:en.LARIX,quote:en.RAY,decimals:en.LARIX.decimals,version:4},LIQ_USDC_V4:{symbol:"LIQ-USDC",name:"LIQ-USDC V4 LP",mint:"GWpD3eTfhJB5KDCcnE85dBQrjAk2CsrgDF9b52R9CrjV",base:en.LIQ,quote:en.USDC,decimals:en.LIQ.decimals,version:4},WAG_USDC_V4:{symbol:"WAG-USDC",name:"WAG-USDC V4 LP",mint:"4yykyPugitUVRewNPXXCviRvxGfsfsRMoP32z3b6FmUC",base:en.WAG,quote:en.USDC,decimals:en.WAG.decimals,version:4},ETH_mSOL_V4:{symbol:"ETH-mSOL",name:"ETH-mSOL V4 LP",mint:"HYv3grQfi8QbV7nG7EFgNK1aJSrsJ7HynXJKJVPLL2Uh",base:en.ETH,quote:en.mSOL,decimals:en.ETH.decimals,version:4},mSOL_USDT_V4:{symbol:"mSOL-USDT",name:"mSOL-USDT V4 LP",mint:"69NCmEW9mGpiWLjAcAWHq51k4ionJZmzgRfRT3wQaCCf",base:en.mSOL,quote:en.USDT,decimals:en.mSOL.decimals,version:4},BTC_mSOL_V4:{symbol:"BTC-mSOL",name:"BTC-mSOL V4 LP",mint:"92bcERNtUmuaJ6mwLSxYHZYSph37jdKxRdoYNxpcYNPp",base:en.BTC,quote:en.mSOL,decimals:en.BTC.decimals,version:4},SLIM_SOL_V4:{symbol:"SLIM-SOL",name:"SLIM-SOL V4 LP",mint:"9X4EK8E59VAVi6ChnNvvd39m6Yg9RtkBbAPq1mDVJT57",base:en.SLIM,quote:en.WSOL,decimals:en.SLIM.decimals,version:4},AURY_USDC_V4:{symbol:"AURY-USDC",name:"AURY-USDC V4 LP",mint:"Gub5dvTy4nzP82qpmpNkBxmRqjtqRddBTBqHSdNcf2oS",base:en.AURY,quote:en.USDC,decimals:en.AURY.decimals,version:4},PRT_SOL_V4:{symbol:"PRT-SOL",name:"PRT-SOL V4 LP",mint:"EcJ8Wgwt1AzSPiDpVr6aaSur8TKAsNTPmmzRACeqT68Z",base:en.PRT,quote:en.WSOL,decimals:en.PRT.decimals,version:4},LIQ_RAY_V4:{symbol:"LIQ-RAY",name:"LIQ-RAY V4 LP",mint:"49YUsDrThJosHSagCn1F59Uc9NRxbr9thVrZikUnQDXy",base:en.LIQ,quote:en.RAY,decimals:en.LIQ.decimals,version:4},SYP_SOL_V4:{symbol:"SYP-SOL",name:"SYP-SOL V4 LP",mint:"KHV6dfj2bDntzJ9z1S26cDfqWfUZdJRFmteLR6LxHwW",base:en.SYP,quote:en.WSOL,decimals:en.SYP.decimals,version:4},SYP_RAY_V4:{symbol:"SYP-RAY",name:"SYP-RAY V4 LP",mint:"FT2KZqxxM8F2h9pZtTF4PyjK88bM4YbuBzd7ZPwQ5wMB",base:en.SYP,quote:en.RAY,decimals:en.SYP.decimals,version:4},SYP_USDC_V4:{symbol:"SYP-USDC",name:"SYP-USDC V4 LP",mint:"2xJGuLAivAR1WkARRA6zP1v4jaA9jV2Qis8JfMNvrVyZ",base:en.SYP,quote:en.USDC,decimals:en.SYP.decimals,version:4},FAB_USDC_V4:{symbol:"FAB-USDC",name:"FAB-USDC V4 LP",mint:"5rTCvZq6BcApsC3VV1EEUuTJfaVd8uYhcGjwTy1By6P8",base:en.FAB,quote:en.USDC,decimals:en.FAB.decimals,version:4},WOOF_RAY_V4:{symbol:"WOOF-RAY",name:"WOOF-RAY V4 LP",mint:"H2FAnazDaGFutcmnrwDxhmdncR1Bd7GG4mhPCSUiamDX",base:en.WOOF,quote:en.RAY,decimals:en.WOOF.decimals,version:4},WOOF_USDC_V4:{symbol:"WOOF-USDC",name:"WOOF-USDC V4 LP",mint:"EFSu5TMc1ijRevaYCxUkS7uGvbhsymDHEaTK3UVdNE3q",base:en.WOOF,quote:en.USDC,decimals:en.WOOF.decimals,version:4},SLND_USDC_V4:{symbol:"SLND-USDC",name:"SLND-USDC V4 LP",mint:"EunE9uDh2cGsyJcsGuGKc6wte7kBn8iye2gzC4w2ePHn",base:en.SLND,quote:en.USDC,decimals:en.SLND.decimals,version:4},FRKT_SOL_V4:{symbol:"FRKT-SOL",name:"FRKT-SOL V4 LP",mint:"HYUKXgpjaxMXHttyrFYtv3z2rdhZ1U9QDH8zEc8BooQC",base:en.FRKT,quote:en.WSOL,decimals:en.FRKT.decimals,version:4},weWETH_SOL_V4:{symbol:"weWETH-SOL",name:"weWETH-SOL V4 LP",mint:"3hbozt2Por7bcrGod8N7kEeJNMocFFjCJrQR16TQGBrE",base:en.weWETH,quote:en.WSOL,decimals:en.weWETH.decimals,version:4},weWETH_USDC_V4:{symbol:"weWETH-USDC",name:"weWETH-USDC V4 LP",mint:"3529SBnMCDW3S3xQ52aABbRHo7PcHvpQA4no8J12L5eK",base:en.weWETH,quote:en.USDC,decimals:en.weWETH.decimals,version:4},weUNI_USDC_V4:{symbol:"weUNI-USDC",name:"weUNI-USDC V4 LP",mint:"EEC4QnT41py39QaYnzQnoYQEtDUDNa6Se8SBDgfPSN2a",base:en.weUNI,quote:en.USDC,decimals:en.weUNI.decimals,version:4},weSUSHI_USDC_V4:{symbol:"weSUSHI-USDC",name:"weSUSHI-USDC V4 LP",mint:"3wVrtQZsiDNp5yTPyfEzQHPU6iuJoMmpnWg6CTt4V8sR",base:en.weSUSHI,quote:en.USDC,decimals:en.weSUSHI.decimals,version:4},CYS_USDC_V4:{symbol:"CYS-USDC",name:"CYS-USDC V4 LP",mint:"GfV3QDzzdVUwCNSdfn6PjhmyJvjw18tn51RingWZYwk3",base:en.CYS,quote:en.USDC,decimals:en.CYS.decimals,version:4},SAMO_USDC_V4:{symbol:"SAMO-USDC",name:"SAMO-USDC V4 LP",mint:"B2PjGEP3vPf1999fUD14pYdxvSDRVBk43hxB2rgthwEY",base:en.SAMO,quote:en.USDC,decimals:en.SAMO.decimals,version:4},ABR_USDC_V4:{symbol:"ABR-USDC",name:"ABR-USDC V4 LP",mint:"ECHfxkf5zjjZFTX95QfFahNyzG7feyEKcfTdjsdrMSGU",base:en.ABR,quote:en.USDC,decimals:en.ABR.decimals,version:4},IN_USDC_V4:{symbol:"IN-USDC",name:"IN-USDC V4 LP",mint:"GbmJtVgg9fRmmmjKUYGMZeSt8wZ47cDDXasg5Y3iF4kz",base:en.IN,quote:en.USDC,decimals:en.IN.decimals,version:4},weDYDX_USDC_V4:{symbol:"weDYDX-USDC",name:"weDYDX-USDC V4 LP",mint:"BjkkMZnnzmgLqzGErzDbkk15ozv48iVKQuunpeM2Hqnk",base:en.weDYDX,quote:en.USDC,decimals:en.weDYDX.decimals,version:4},STARS_USDC_V4:{symbol:"STARS-USDC",name:"STARS-USDC V4 LP",mint:"FJ68q7NChhETcGVdinMbM2FF1Cy79dpmUi6HC83K55Hv",base:en.STARS,quote:en.USDC,decimals:en.STARS.decimals,version:4},weAXS_USDC_V4:{symbol:"weAXS-USDC",name:"weAXS-USDC V4 LP",mint:"6PSoJQ7myQ1BJtbQC6oiWR8HSecQGyoWsPYTZRJo2ci3",base:en.weAXS,quote:en.USDC,decimals:en.weAXS.decimals,version:4},weSHIB_USDC_V4:{symbol:"weSHIB-USDC",name:"weSHIB-USDC V4 LP",mint:"AcjX5pmTMGSgxkdxc3r82r6WMKBvS6eQXXFz5ck5KKUa",base:en.weSHIB,quote:en.USDC,decimals:en.weSHIB.decimals,version:4},SBR_USDC_V4:{symbol:"SBR-USDC",name:"SBR-USDC V4 LP",mint:"9FC8xTFRbgTpuZZYAYnZLxgnQ8r7FwfSBM1SWvGwgF7s",base:en.SBR,quote:en.USDC,decimals:en.SBR.decimals,version:4},OXS_USDC_V4:{symbol:"OXS-USDC",name:"OXS-USDC V4 LP",mint:"et9pdjWm97rbmsJoN183GkFV5qzTGru79GE1Zhe7NTU",base:en.OXS,quote:en.USDC,decimals:en.OXS.decimals,version:4},CWAR_USDC_V4:{symbol:"CWAR-USDC",name:"CWAR-USDC V4 LP",mint:"HjR23bxn2gtRDB2P1Tm3DLepAPPZgazsWJpLG9wqjnYR",base:en.CWAR,quote:en.USDC,decimals:en.CWAR.decimals,version:4},UPS_USDC_V4:{symbol:"UPS-USDC",name:"UPS-USDC V4 LP",mint:"9hSUZdREEsbaYaKY4FouvXr7xyAqtpdHRDoYCb6Mb28a",base:en.UPS,quote:en.USDC,decimals:en.UPS.decimals,version:4},weSAND_USDC_V4:{symbol:"weSAND-USDC",name:"weSAND-USDC V4 LP",mint:"3dADrQa7utyiCsaFeVk9r7oebW1WheowhKo5soBYKBVT",base:en.weSAND,quote:en.USDC,decimals:en.weSAND.decimals,version:4},weMANA_USDC_V4:{symbol:"weMANA-USDC",name:"weMANA-USDC V4 LP",mint:"HpUkVAPRJ5zNRuJ1ZwMXEhbMHL3gSuPb2QuSER9YUd3a",base:en.weMANA,quote:en.USDC,decimals:en.weMANA.decimals,version:4},CAVE_USDC_V4:{symbol:"CAVE-USDC",name:"CAVE-USDC V4 LP",mint:"5Gba1k3fU7Vh7UtAiBmie9vhQNNq1JfEwgn1DPGZ7NKQ",base:en.CAVE,quote:en.USDC,decimals:en.CAVE.decimals,version:4},GENE_USDC_V4:{symbol:"GENE-USDC",name:"GENE-USDC V4 LP",mint:"7GKvfHEXenNiWYbJBKae89mdaMPr5gGMYwZmyC8gBNVG",base:en.GENE,quote:en.USDC,decimals:en.GENE.decimals,version:4},GENE_RAY_V4:{symbol:"GENE-RAY",name:"GENE-RAY V4 LP",mint:"3HzXnc1qZ8mGqun18Ck3KA616XnZNqF1RWbgYE2nGRMA",base:en.GENE,quote:en.RAY,decimals:en.GENE.decimals,version:4},APT_USDC_V4:{symbol:"APT-USDC",name:"APT-USDC V4 LP",mint:"Hk8mDAJFq4E9kF3DtNgPFwzbo5kbeiusNFJgWmo3LoQ5",base:en.APT,quote:en.USDC,decimals:en.APT.decimals,version:4},GOFX_USDC_V4:{symbol:"GOFX-USDC",name:"GOFX-USDC V4 LP",mint:"4svqAwrLPGRDCQuuieYTmtLXF75wiahjeK2rEN9tY1YL",base:en.GOFX,quote:en.USDC,decimals:en.GOFX.decimals,version:4},SONAR_USDC_V4:{symbol:"SONAR-USDC",name:"SONAR-USDC V4 LP",mint:"2tAcfqJ1YYjpGLqwh76kyNt9VaNFDd4fJySfH6SmWfKt",base:en.SONAR,quote:en.USDC,decimals:en.SONAR.decimals,version:4},JSOL_SOL_V4:{symbol:"JSOL-SOL",name:"JSOL-SOL V4 LP",mint:"61z37rpHsU6d3Fq5sUjJ85K6tXGzkoYKDAG3kPJQNDRo",base:en.JSOL,quote:en.WSOL,decimals:en.JSOL.decimals,version:4},JSOL_USDC_V4:{symbol:"JSOL-USDC",name:"JSOL-USDC V4 LP",mint:"3JZqf2VPNxj1kDZQsfzC7myM6spsGQbGuFv1gVfdYosN",base:en.JSOL,quote:en.USDC,decimals:en.JSOL.decimals,version:4},SHILL_USDC_V4:{symbol:"SHILL-USDC",name:"SHILL-USDC V4 LP",mint:"CnUhYBtQEbSBZ76bgxAouVCTCb8rofZzwerVF5z5LREJ",base:en.SHILL,quote:en.USDC,decimals:en.SHILL.decimals,version:4},DFL_USDC_V4:{symbol:"DFL-USDC",name:"DFL-USDC V4 LP",mint:"Fffijd6UVJdQeLVXhenS8YcsnMUdWJqpbBeH42LFkXgS",base:en.DFL,quote:en.USDC,decimals:en.DFL.decimals,version:4},BOKU_USDC_V4:{symbol:"BOKU-USDC",name:"BOKU-USDC V4 LP",mint:"8jjQn5Yagb6Nm2WGAxPW1bcGqrTWpg5adf6QukXEarcP",base:en.BOKU,quote:en.USDC,decimals:en.BOKU.decimals,version:4},MIMO_SOL_V4:{symbol:"MIMO-SOL",name:"MIMO-SOL V4 LP",mint:"HUJ1opSk8AiPfDT47r7n4hTiK2EXgrR3Msy7T8q1BywS",base:en.MIMO,quote:en.WSOL,decimals:en.MIMO.decimals,version:4},wbWBNB_USDC_V4:{symbol:"wbWBNB-USDC",name:"wbWBNB-USDC V4 LP",mint:"FEsEfEJJSfiMQcshUgZ5UigfytfGRQ3z5puyF6DXDp9C",base:en.wbWBNB,quote:en.USDC,decimals:en.wbWBNB.decimals,version:4},wePEOPLE_USDC_V4:{symbol:"wePEOPLE-USDC",name:"wePEOPLE-USDC V4 LP",mint:"3e5ZCKi4etorpV4pv1fSckP5iJD67xcUkx3RtFCZhbzD",base:en.wePEOPLE,quote:en.USDC,decimals:en.wePEOPLE.decimals,version:4},ISOLA_USDT_V4:{symbol:"ISOLA-USDT",name:"ISOLA-USDT V4 LP",mint:"H8s1wQsZpRK61pyLF3XwyQc6E8vNUnwRDhy3TBDCDENQ",base:en.ISOLA,quote:en.USDT,decimals:en.ISOLA.decimals,version:4},SPWN_USDC_V4:{symbol:"SPWN-USDC",name:"SPWN-USDC V4 LP",mint:"B5uyCAQcX6nAjZypLgiivbEKabSptgUb8JK9tkaSnqdW",base:en.SPWN,quote:en.USDC,decimals:en.SPWN.decimals,version:4},STR_USDC_V4:{symbol:"STR-USDC",name:"STR-USDC V4 LP",mint:"8uDVKmVwNmbXHDB7rNKqtpcT9VAsFHTJ5pPYxjyoBbNg",base:en.STR,quote:en.USDC,decimals:en.STR.decimals,version:4},SOLC_USDT_V4:{symbol:"SOLC-USDT",name:"SOLC-USDT V4 LP",mint:"2g9JzTWycLzK4KEBBHsponAtZRee2ii63bRrJ8tefEyt",base:en.SOLC,quote:en.USDT,decimals:en.SOLC.decimals,version:4},VI_USDC_V4:{symbol:"VI-USDC",name:"VI-USDC V4 LP",mint:"3MwHyHCRfVqtH3ABFtdKXdY9dwemr9GGxQFaBkeq6NjY",base:en.VI,quote:en.USDC,decimals:en.VI.decimals,version:4},KKO_USDC_V4:{symbol:"KKO-USDC",name:"KKO-USDC V4 LP",mint:"7xr1Doc1NiMWbUg99YVFqQSLfYXNzo6YvacXUsSgBMNW",base:en.KKO,quote:en.USDC,decimals:en.KKO.decimals,version:4},XTAG_USDC_V4:{symbol:"XTAG-USDC",name:"XTAG-USDC V4 LP",mint:"GCEQbLg4ik5YJ4CMcbtuVqEc4sjLdSGy34rFk1CtGjdg",base:en.XTAG,quote:en.USDC,decimals:en.XTAG.decimals,version:4},TTT_USDC_V4:{symbol:"TTT-USDC",name:"TTT-USDC V4 LP",mint:"84fmrerHGohoRf4iLPDQ1KG4CjSjCRksYWGzjWfCRM8a",base:en.TTT,quote:en.USDC,decimals:en.TTT.decimals,version:4},RUN_USDC_V4:{symbol:"RUN-USDC",name:"RUN-USDC V4 LP",mint:"CjTLvvKSQdEujcSzeZRYgk4w1DpuXBbMppLHaxZyz11Y",base:en.RUN,quote:en.USDC,decimals:en.RUN.decimals,version:4},CRWNY_USDC_V4:{symbol:"CRWNY-USDC",name:"CRWNY-USDC V4 LP",mint:"H3D9Gyi4frRLW6bS9vBthDVDJyzyRJ6XhhpP6PJGWaDC",base:en.CRWNY,quote:en.USDC,decimals:en.CRWNY.decimals,version:4},CRWNY_RAY_V4:{symbol:"CRWNY-RAY",name:"CRWNY-RAY V4 LP",mint:"5Cz9wGStNjiUg81q8t6sJJeckuT2C14CYSfyQbtYirSX",base:en.CRWNY,quote:en.RAY,decimals:en.CRWNY.decimals,version:4},BLOCK_USDC_V4:{symbol:"BLOCK-USDC",name:"BLOCK-USDC V4 LP",mint:"8i44Y23GkkwDYZ5iSkVEqmrXUfwNmwo9grguTDWKM8wg",base:en.BLOCK,quote:en.USDC,decimals:en.BLOCK.decimals,version:4},REAL_USDC_V4:{symbol:"REAL-USDC",name:"REAL-USDC V4 LP",mint:"EN43tp8xdkcM8RYSJ4msFHMPTJRXKhUteVYBDJLwTvr3",base:en.REAL,quote:en.USDC,decimals:en.REAL.decimals,version:4},FRKT_USDC_V4:{symbol:"FRKT-USDC",name:"FRKT-USDC V4 LP",mint:"7MgzqVTGeA4wENme81QPTrPy45NJMKVL9XGwxmNT87cG",base:en.FRKT,quote:en.USDC,decimals:en.FRKT.decimals,version:4},MBS_USDC_V4:{symbol:"MBS-USDC",name:"MBS-USDC V4 LP",mint:"BAgSWaPZpsQKyZJdvB5KyvmCNj6hzczzentt5FhDCVHb",base:en.MBS,quote:en.USDC,decimals:en.MBS.decimals,version:4},PRISM_USDC_V4:{symbol:"PRISM-USDC",name:"PRISM-USDC V4 LP",mint:"3baYkTcudvSFMe25UpZcBfdp4FA5kL2E4pfaeJ8AiYJB",base:en.PRISM,quote:en.USDC,decimals:en.PRISM.decimals,version:4},CHICKS_USDC_V4:{symbol:"CHICKS-USDC",name:"CHICKS-USDC V4 LP",mint:"CPzmcw81a6PDasSXhVLfDRKuTJXZPUqocS9VFf5zCFhs",base:en.CHICKS,quote:en.USDC,decimals:en.CHICKS.decimals,version:4},MEAN_RAY_V4:{symbol:"MEAN-RAY",name:"MEAN-RAY V4 LP",mint:"H9wUyrxpAErmdNVPitpHSXgwoomoh91ggJKPWtQQoCn1",base:en.MEAN,quote:en.RAY,decimals:en.MEAN.decimals,version:4},TINY_USDC_V4:{symbol:"TINY-USDC",name:"TINY-USDC V4 LP",mint:"Hho6ZzRDj49L4z6zog8nQZFaxMSz6FX6wNzVpMeAMen",base:en.TINY,quote:en.USDC,decimals:en.TINY.decimals,version:4},SCY_USDC_V4:{symbol:"SCY-USDC",name:"SCY-USDC V4 LP",mint:"EcYk7t6Vw59HDnY2u6H1KDPkk8juMeA1NpGpHiGk1LDf",base:en.SCY,quote:en.USDC,decimals:en.SCY.decimals,version:4}};I.from("token/util");class ei{constructor(e,t="UNKNOWN",n="UNKNOWN"){this.decimals=e,this.symbol=t,this.name=n}}ei.SOL=new ei(ee.decimals,ee.symbol,ee.name);class eo extends ei{constructor(e,t,n,r="UNKNOWN",i="UNKNOWN"){super(n,r,i),this.programId=O(e),this.mint=O(t)}equals(e){return this===e||this.mint.equals(e.mint)}}function es(e,t){return e instanceof eo&&t instanceof eo?e.equals(t):!(e instanceof eo)&&!(t instanceof eo)&&e===t}eo.WSOL=new eo(l.H_,et.mint,et.decimals,ee.symbol,ee.name);var ea=n(6122),eu=n.n(ea),ec=n(96635);let el=n.n(ec)(),ed=I.from("entity/fraction"),em=el(f.Z),ef=el(eu()),ep={[t8.ROUND_DOWN]:ef.ROUND_DOWN,[t8.ROUND_HALF_UP]:ef.ROUND_HALF_UP,[t8.ROUND_UP]:ef.ROUND_UP},eh={[t8.ROUND_DOWN]:em.roundDown,[t8.ROUND_HALF_UP]:em.roundHalfUp,[t8.ROUND_UP]:em.roundUp};class eg{constructor(e,t=z){this.numerator=J(e),this.denominator=J(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new eg(this.denominator,this.numerator)}add(e){let t=e instanceof eg?e:new eg(J(e));return this.denominator.eq(t.denominator)?new eg(this.numerator.add(t.numerator),this.denominator):new eg(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof eg?e:new eg(J(e));return this.denominator.eq(t.denominator)?new eg(this.numerator.sub(t.numerator),this.denominator):new eg(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof eg?e:new eg(J(e));return new eg(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof eg?e:new eg(J(e));return new eg(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=t8.ROUND_HALF_UP){ed.assert(Number.isInteger(e),`${e} is not an integer.`),ed.assert(e>0,`${e} is not positive.`),ef.set({precision:e+1,rounding:ep[n]});let r=new ef(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return r.toFormat(r.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=t8.ROUND_HALF_UP){return ed.assert(Number.isInteger(e),`${e} is not an integer.`),ed.assert(e>=0,`${e} is negative.`),em.DP=e,em.RM=eh[n],new em(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}}let ew=I.from("entity/amount"),ey=el(f.Z);class eb extends eg{constructor(e,t,n=!0){let r=new(h())(0),i=j.pow(new(h())(e.decimals));if(n)r=J(t);else{let n=new(h())(0),o=new(h())(0);if("string"==typeof t||"number"==typeof t||"bigint"==typeof t){let[r,i]=function(e,t){let n="0",r="0";if(e.includes(".")){let i=e.split(".");if(2!==i.length)return ew.throwArgumentError("invalid number string","num",e);[n,r]=i,r=r.padEnd(t,"0")}else n=e;return[n,r.slice(0,t)||r]}(t.toString(),e.decimals);n=J(r),o=J(i)}r=(n=n.mul(i)).add(o)}super(r,i),this.currency=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return ew.assert(es(this.currency,e.currency),"gt currency not equals"),this.raw.gt(e.raw)}lt(e){return ew.assert(es(this.currency,e.currency),"lt currency not equals"),this.raw.lt(e.raw)}add(e){return ew.assert(es(this.currency,e.currency),"add currency not equals"),new eb(this.currency,this.raw.add(e.raw))}sub(e){return ew.assert(es(this.currency,e.currency),"sub currency not equals"),new eb(this.currency,this.raw.sub(e.raw))}toSignificant(e=this.currency.decimals,t,n=t8.ROUND_DOWN){return super.toSignificant(e,t,n)}toFixed(e=this.currency.decimals,t,n=t8.ROUND_DOWN){return ew.assert(e<=this.currency.decimals,"decimals overflow"),super.toFixed(e,t,n)}toExact(e={groupSeparator:""}){return ey.DP=this.currency.decimals,new ey(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}}class eA extends eb{constructor(e,t,n=!0){super(e,t,n),this.token=e}add(e){return ew.assert(es(this.token,e.token),"add token not equals"),new eA(this.token,this.raw.add(e.raw))}subtract(e){return ew.assert(es(this.token,e.token),"sub token not equals"),new eA(this.token,this.raw.sub(e.raw))}}let eS=new eg(Z);class ek extends eg{toSignificant(e=5,t,n){return this.mul(eS).toSignificant(e,t,n)}toFixed(e=2,t,n){return this.mul(eS).toFixed(e,t,n)}}let eI=I.from("entity/price");class eT extends eg{constructor(e,t,n,r){var i,o;super(r,t),this.baseCurrency=e,this.quoteCurrency=n,this.scalar=new eg((i=e.decimals,j.pow(J(i))),(o=n.decimals,j.pow(J(o))))}get raw(){return new eg(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new eT(this.quoteCurrency,this.numerator,this.baseCurrency,this.denominator)}mul(e){eI.assert(es(this.quoteCurrency,e.baseCurrency),"mul currency not equals");let t=super.mul(e);return new eT(this.baseCurrency,t.denominator,e.quoteCurrency,t.numerator)}toSignificant(e=this.quoteCurrency.decimals,t,n){return this.adjusted.toSignificant(e,t,n)}toFixed(e=this.quoteCurrency.decimals,t,n){return this.adjusted.toFixed(e,t,n)}}var ev=n(62109);let eE=ev.Ar,eP=ev.vA,eL=ev.fP,eC=ev.u8,eO=ev.KB,ex=ev.Jq,eB=ev.Xo,eR=ev.A9,eU=ev.Ik,eD=ev.pc;var e_=n(23663).Buffer;class eq extends eE{constructor(e,t,n){super(e,n),this.blob=eU(e),this.signed=t}decode(e,t=0){let n=new(h())(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}encode(e,t,n=0){return"number"==typeof e&&(e=new(h())(e)),this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(e_,"le",this.span),t,n)}}class eN extends eE{constructor(e){super(8,e),this._lower=eD(ex(),!1),this._upper=eD(ex(),!1)}addBoolean(e){this._lower.fields.length<32?this._lower.addBoolean(e):this._upper.addBoolean(e)}decode(e,t=0){let n=this._lower.decode(e,t),r=this._upper.decode(e,t+this._lower.span);return{...n,...r}}encode(e,t,n=0){return this._lower.encode(e,t,n)+this._upper.encode(e,t,n+this._lower.span)}}function eV(e){return new eL(1,e)}function eM(e){return new eL(4,e)}function eF(e){return new eq(8,!1,e)}function eW(e){return new eq(16,!1,e)}function eK(e){return new eq(8,!0,e)}class eH extends eE{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function eY(e){return new eH(eU(32),e=>new m.PublicKey(e),e=>e.toBuffer(),e)}function eG(e){return new eH(eC(),eX,ez,e)}function eX(e){if(0===e)return!1;if(1===e)return!0;throw Error("Invalid bool: "+e)}function ez(e){return e?1:0}class ej extends eP{decode(e,t){return super.decode(e,t)}}function eZ(e,t,n){return new ej(e,t,n)}function eQ(e,t,n){let r;return eR(e,"number"==typeof t?t:(0,p.isBN)(t)?t.toNumber():new Proxy(t,{get(e,t){if(!r){let t=Reflect.get(e,"count");r=(0,p.isBN)(t)?t.toNumber():t,Reflect.set(e,"count",r)}return Reflect.get(e,t)},set:(e,t,n)=>("count"===t&&(r=n),Reflect.set(e,t,n))}),n)}let eJ=eZ([eM("mintAuthorityOption"),eY("mintAuthority"),eF("supply"),eV("decimals"),eV("isInitialized"),eM("freezeAuthorityOption"),eY("freezeAuthority")]),e$=eZ([eY("mint"),eY("owner"),eF("amount"),eM("delegateOption"),eY("delegate"),eV("state"),eM("isNativeOption"),eF("isNative"),eF("delegatedAmount"),eM("closeAuthorityOption"),eY("closeAuthority")]);var e0=n(9309),e1=n(74564);(t1=t9||(t9={}))[t1.InitializeMint=0]="InitializeMint",t1[t1.InitializeAccount=1]="InitializeAccount",t1[t1.InitializeMultisig=2]="InitializeMultisig",t1[t1.Transfer=3]="Transfer",t1[t1.Approve=4]="Approve",t1[t1.Revoke=5]="Revoke",t1[t1.SetAuthority=6]="SetAuthority",t1[t1.MintTo=7]="MintTo",t1[t1.Burn=8]="Burn",t1[t1.CloseAccount=9]="CloseAccount",t1[t1.FreezeAccount=10]="FreezeAccount",t1[t1.ThawAccount=11]="ThawAccount",t1[t1.TransferChecked=12]="TransferChecked",t1[t1.ApproveChecked=13]="ApproveChecked",t1[t1.MintToChecked=14]="MintToChecked",t1[t1.BurnChecked=15]="BurnChecked",t1[t1.InitializeAccount2=16]="InitializeAccount2",t1[t1.SyncNative=17]="SyncNative",t1[t1.InitializeAccount3=18]="InitializeAccount3",t1[t1.InitializeMultisig2=19]="InitializeMultisig2",t1[t1.InitializeMint2=20]="InitializeMint2",t1[t1.GetAccountDataSize=21]="GetAccountDataSize",t1[t1.InitializeImmutableOwner=22]="InitializeImmutableOwner",t1[t1.AmountToUiAmount=23]="AmountToUiAmount",t1[t1.UiAmountToAmount=24]="UiAmountToAmount",t1[t1.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",t1[t1.TransferFeeExtension=26]="TransferFeeExtension",t1[t1.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",t1[t1.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",t1[t1.Reallocate=29]="Reallocate",t1[t1.MemoTransferExtension=30]="MemoTransferExtension",t1[t1.CreateNativeMint=31]="CreateNativeMint",t1[t1.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",t1[t1.InterestBearingMintExtension=33]="InterestBearingMintExtension",t1[t1.CpiGuardExtension=34]="CpiGuardExtension",t1[t1.InitializePermanentDelegate=35]="InitializePermanentDelegate",t1[t1.TransferHookExtension=36]="TransferHookExtension",t1[t1.MetadataPointerExtension=39]="MetadataPointerExtension";var e4=n(23663).Buffer;let e2=(0,ev.n_)([(0,ev.u8)("instruction"),(0,ev.u8)("decimals"),(0,e1.ZL)("mintAuthority"),(0,ev.u8)("freezeAuthorityOption"),(0,e1.ZL)("freezeAuthority")]);function e6(e,t,n){if(n.length)for(let r of(e.push({pubkey:t,isSigner:!1,isWritable:!1}),n))e.push({pubkey:r instanceof m.PublicKey?r:r.publicKey,isSigner:!0,isWritable:!1});else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}var e3=n(23663).Buffer;let e5=(0,ev.n_)([(0,ev.u8)("instruction"),(0,e1.AW)("amount")]);var e8=n(23663).Buffer;let e9=(0,ev.n_)([(0,ev.u8)("instruction")]);var e7=n(23663).Buffer;let te=(0,ev.n_)([(0,ev.u8)("instruction"),(0,e1.AW)("amount")]);var tt=n(23663).Buffer;let tn=(0,ev.n_)([(0,ev.u8)("instruction")]);function tr(e,t,n){return x([e.toBuffer(),n.toBuffer(),t.toBuffer()],new m.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"))}var ti=n(23663).Buffer;class to{static getAssociatedTokenAccount({mint:e,owner:t,programId:n}){return tr(t,e,n).publicKey}static makeCreateAssociatedTokenAccountInstruction({programId:e,mint:t,associatedAccount:n,owner:r,payer:i,instructionsType:o}){return o.push(ne.createATA),(0,e0.Ek)(i,n,r,t,e)}static async makeCreateWrappedNativeAccountInstructions({connection:e,owner:t,payer:n,amount:r,commitment:i}){let o=[],s=[],a=await e.getMinimumBalanceForRentExemption(e$.span,i),u=J(r).add(new(h())(a)),c=tu({fromPublicKey:n,programId:l.H_});return o.push(m.SystemProgram.createAccountWithSeed({fromPubkey:n,basePubkey:n,seed:c.seed,newAccountPubkey:c.publicKey,lamports:u.toNumber(),space:e$.span,programId:l.H_})),s.push(ne.createAccount),o.push(this.makeInitAccountInstruction({programId:l.H_,mint:O(et.mint),tokenAccount:c.publicKey,owner:t,instructionTypes:s})),{address:{newAccount:c.publicKey},innerTransaction:{instructions:o,signers:[],lookupTableAddress:[],instructionTypes:s}}}static async insertCreateWrappedNativeAccount({connection:e,owner:t,payer:n,amount:r,instructions:i,instructionsType:o,signers:s,commitment:a}){let u=await this.makeCreateWrappedNativeAccountInstructions({connection:e,owner:t,payer:n,amount:r,commitment:a});return i.push(...u.innerTransaction.instructions),s.push(...u.innerTransaction.signers),o.push(...u.innerTransaction.instructionTypes),u.address.newAccount}static makeInitMintInstruction({programId:e,mint:t,decimals:n,mintAuthority:r,freezeAuthority:i=null,instructionTypes:o}){return o.push(ne.initMint),function(e,t,n,r,i=l.H_){let o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:m.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],s=e4.alloc(e2.span);return e2.encode({instruction:t9.InitializeMint,decimals:t,mintAuthority:n,freezeAuthorityOption:r?1:0,freezeAuthority:r||new m.PublicKey(0)},s),new m.TransactionInstruction({keys:o,programId:i,data:s})}(t,n,r,i,e)}static makeMintToInstruction({programId:e,mint:t,dest:n,authority:r,amount:i,multiSigners:o=[],instructionTypes:s}){return s.push(ne.mintTo),function(e,t,n,r,i=[],o=l.H_){let s=e6([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,i),a=e3.alloc(e5.span);return e5.encode({instruction:t9.MintTo,amount:BigInt(r)},a),new m.TransactionInstruction({keys:s,programId:o,data:a})}(t,n,r,BigInt(String(i)),o,e)}static makeInitAccountInstruction({programId:e,mint:t,tokenAccount:n,owner:r,instructionTypes:i}){return i.push(ne.initAccount),function(e,t,n,r=l.H_){let i=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:m.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],o=e8.alloc(e9.span);return e9.encode({instruction:t9.InitializeAccount},o),new m.TransactionInstruction({keys:i,programId:r,data:o})}(n,t,r,e)}static makeTransferInstruction({programId:e,source:t,destination:n,owner:r,amount:i,multiSigners:o=[],instructionsType:s}){return s.push(ne.transferAmount),function(e,t,n,r,i=[],o=l.H_){let s=e6([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,i),a=e7.alloc(te.span);return te.encode({instruction:t9.Transfer,amount:BigInt(r)},a),new m.TransactionInstruction({keys:s,programId:o,data:a})}(t,n,r,BigInt(String(i)),o,e)}static makeCloseAccountInstruction({programId:e,tokenAccount:t,owner:n,payer:r,multiSigners:i=[],instructionsType:o}){return o.push(ne.closeAccount),function(e,t,n,r=[],i=l.H_){let o=e6([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],n,r),s=tt.alloc(tn.span);return tn.encode({instruction:t9.CloseAccount},s),new m.TransactionInstruction({keys:o,programId:i,data:s})}(t,r,n,i,e)}static createInitAccountInstruction(e,t,n,r){let i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:m.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],o=eV("instruction"),s=ti.alloc(o.span);return o.encode(1,s),new m.TransactionInstruction({keys:i,programId:e,data:s})}}(t4=t7||(t7={}))[t4.V0=0]="V0",t4[t4.LEGACY=1]="LEGACY",(t2=ne||(ne={}))[t2.createAccount=0]="createAccount",t2[t2.initAccount=1]="initAccount",t2[t2.createATA=2]="createATA",t2[t2.closeAccount=3]="closeAccount",t2[t2.transferAmount=4]="transferAmount",t2[t2.initMint=5]="initMint",t2[t2.mintTo=6]="mintTo",t2[t2.initMarket=7]="initMarket",t2[t2.util1216OwnerClaim=8]="util1216OwnerClaim",t2[t2.setComputeUnitPrice=9]="setComputeUnitPrice",t2[t2.setComputeUnitLimit=10]="setComputeUnitLimit",t2[t2.clmmCreatePool=11]="clmmCreatePool",t2[t2.clmmOpenPosition=12]="clmmOpenPosition",t2[t2.clmmIncreasePosition=13]="clmmIncreasePosition",t2[t2.clmmDecreasePosition=14]="clmmDecreasePosition",t2[t2.clmmClosePosition=15]="clmmClosePosition",t2[t2.clmmSwapBaseIn=16]="clmmSwapBaseIn",t2[t2.clmmSwapBaseOut=17]="clmmSwapBaseOut",t2[t2.clmmInitReward=18]="clmmInitReward",t2[t2.clmmSetReward=19]="clmmSetReward",t2[t2.clmmCollectReward=20]="clmmCollectReward",t2[t2.ammV4Swap=21]="ammV4Swap",t2[t2.ammV4AddLiquidity=22]="ammV4AddLiquidity",t2[t2.ammV4RemoveLiquidity=23]="ammV4RemoveLiquidity",t2[t2.ammV4SimulatePoolInfo=24]="ammV4SimulatePoolInfo",t2[t2.ammV4SwapBaseIn=25]="ammV4SwapBaseIn",t2[t2.ammV4SwapBaseOut=26]="ammV4SwapBaseOut",t2[t2.ammV4CreatePool=27]="ammV4CreatePool",t2[t2.ammV4InitPool=28]="ammV4InitPool",t2[t2.ammV4CreatePoolV2=29]="ammV4CreatePoolV2",t2[t2.ammV5AddLiquidity=30]="ammV5AddLiquidity",t2[t2.ammV5RemoveLiquidity=31]="ammV5RemoveLiquidity",t2[t2.ammV5SimulatePoolInfo=32]="ammV5SimulatePoolInfo",t2[t2.ammV5SwapBaseIn=33]="ammV5SwapBaseIn",t2[t2.ammV5SwapBaseOut=34]="ammV5SwapBaseOut",t2[t2.routeSwap=35]="routeSwap",t2[t2.routeSwap1=36]="routeSwap1",t2[t2.routeSwap2=37]="routeSwap2",t2[t2.farmV3Deposit=38]="farmV3Deposit",t2[t2.farmV3Withdraw=39]="farmV3Withdraw",t2[t2.farmV3CreateLedger=40]="farmV3CreateLedger",t2[t2.farmV5Deposit=41]="farmV5Deposit",t2[t2.farmV5Withdraw=42]="farmV5Withdraw",t2[t2.farmV5CreateLedger=43]="farmV5CreateLedger",t2[t2.farmV6Deposit=44]="farmV6Deposit",t2[t2.farmV6Withdraw=45]="farmV6Withdraw",t2[t2.farmV6Create=46]="farmV6Create",t2[t2.farmV6Restart=47]="farmV6Restart",t2[t2.farmV6CreatorAddReward=48]="farmV6CreatorAddReward",t2[t2.farmV6CreatorWithdraw=49]="farmV6CreatorWithdraw",t2[t2.test=50]="test";var ts=n(23663).Buffer;class ta{static _selectTokenAccount(e){let{tokenAccounts:t,programId:n,mint:r,owner:i,config:o}=e,{associatedOnly:s}={associatedOnly:!0,...o},a=t.filter(({accountInfo:e})=>e.mint.equals(r)).sort((e,t)=>e.accountInfo.amount.lt(t.accountInfo.amount)?1:-1),u=to.getAssociatedTokenAccount({mint:r,owner:i,programId:n});for(let e of a){let{pubkey:t}=e;if(!s||u.equals(t))return t}return null}static async _handleTokenAccount(e){let{connection:t,side:n,amount:r,programId:i,mint:o,tokenAccount:s,owner:a,payer:u=a,frontInstructions:c,endInstructions:m,signers:f,bypassAssociatedCheck:p,frontInstructionsType:h,endInstructionsType:g,checkCreateATAOwner:w}=e,y=to.getAssociatedTokenAccount({mint:o,owner:a,programId:i});if(eo.WSOL.mint.equals(o)){let e=await to.insertCreateWrappedNativeAccount({connection:t,owner:a,payer:u,instructions:c,instructionsType:h,signers:f,amount:r});return m&&m.push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:e,owner:a,payer:u,instructionsType:g??[]})),e}if(!s||"out"===n&&!y.equals(s)&&!p){let e=to.makeCreateAssociatedTokenAccountInstruction({programId:i,mint:o,associatedAccount:y,owner:a,payer:u,instructionsType:h});if(w){let n=await t.getAccountInfo(y);if(null===n)c.push(e);else if(n.owner.equals(l.H_)&&d.p0.decode(n.data).mint.equals(o)&&d.p0.decode(n.data).owner.equals(a));else throw Error(`create ata check error -> mint: ${o.toString()}, ata: ${y.toString()}`)}else c.push(e);return y}return s}static async _selectOrCreateTokenAccount(e){let{mint:t,tokenAccounts:n,createInfo:r,associatedOnly:i,owner:o,checkCreateATAOwner:s,programId:a}=e,u=to.getAssociatedTokenAccount({mint:t,owner:o,programId:a}),c=n.filter(e=>e.accountInfo.mint.equals(t)&&(!i||e.pubkey.equals(u))).sort((e,t)=>e.accountInfo.amount.lt(t.accountInfo.amount)?1:-1);if(void 0===r||c.length>0)return c.length>0?c[0].pubkey:void 0;if(i){let e=to.makeCreateAssociatedTokenAccountInstruction({programId:a,mint:t,associatedAccount:u,owner:o,payer:r.payer,instructionsType:r.frontInstructionsType});if(s){let n=await r.connection.getAccountInfo(u);if(null===n)r.frontInstructions.push(e);else if(n.owner.equals(a)&&d.p0.decode(n.data).mint.equals(t)&&d.p0.decode(n.data).owner.equals(o));else throw Error(`create ata check error -> mint: ${t.toString()}, ata: ${u.toString()}`)}else r.frontInstructions.push(e);if(t.equals(eo.WSOL.mint)&&r.amount){let e=await to.insertCreateWrappedNativeAccount({connection:r.connection,owner:o,payer:r.payer,instructions:r.frontInstructions,instructionsType:r.frontInstructionsType,signers:r.signers,amount:r.amount??0});(r.endInstructions??[]).push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:e,owner:o,payer:r.payer,instructionsType:r.endInstructionsType??[]})),r.amount&&r.frontInstructions.push(to.makeTransferInstruction({programId:l.H_,source:e,destination:u,owner:o,amount:r.amount,instructionsType:r.frontInstructionsType}))}return(r.endInstructions??[]).push(to.makeCloseAccountInstruction({programId:a,tokenAccount:u,owner:o,payer:r.payer,instructionsType:r.endInstructionsType??[]})),u}if(t.equals(eo.WSOL.mint)){let e=await to.insertCreateWrappedNativeAccount({connection:r.connection,owner:o,payer:r.payer,instructions:r.frontInstructions,instructionsType:r.frontInstructionsType,signers:r.signers,amount:r.amount??0});return(r.endInstructions??[]).push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:e,owner:o,payer:r.payer,instructionsType:r.endInstructionsType??[]})),e}{let e=tu({fromPublicKey:o,programId:a}),n=await r.connection.getMinimumBalanceForRentExemption(d.p0.span),i=m.SystemProgram.createAccountWithSeed({fromPubkey:o,basePubkey:o,seed:e.seed,newAccountPubkey:e.publicKey,lamports:n,space:d.p0.span,programId:a}),s=to.createInitAccountInstruction(a,t,e.publicKey,o);return r.frontInstructions.push(i,s),r.frontInstructionsType.push(ne.createAccount,ne.initAccount),(r.endInstructions??[]).push(to.makeCloseAccountInstruction({programId:a,tokenAccount:e.publicKey,owner:o,payer:r.payer,instructionsType:r.endInstructionsType??[]})),e.publicKey}}}function tu({fromPublicKey:e,programId:t=l.H_}){let n=m.Keypair.generate().publicKey.toBase58().slice(0,32);return{publicKey:function(e,t,n){let r=ts.concat([e.toBuffer(),ts.from(t),n.toBuffer()]),i=(0,c.J)(r);return new m.PublicKey(i)}(e,n,t),seed:n}}var tc=n(23663).Buffer;new m.AddressLookupTableAccount({key:new m.PublicKey("2immgwYNHBbyVQKVGCEkgWpi53bLwWNRMB5G2nbgYV17"),state:m.AddressLookupTableAccount.deserialize(tc.from("AQAAAP//////////d49+DAAAAAAAAQZMWvw7GUNJdaccNBVnb57OKakxL2BHLYvhRwVILRsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMGRm/lIRcy/+ytunLDm+e8jOW7xfcSayxDmzpAAAAABt324ddloZPZy+FGzut5rBy0he1fWzeROoz1hX7/AKkG3fbh7nWP3hhCXbzkbM3athr8TYO5DSf+vfko2KGL/AVKU1D4XciC1hSlVnJ4iilt3x6rq9CmBniISTL07vagBqfVFxksXFEhjMlMPUrxf1ja7gibof1E49vZigAAAAAGp9UXGMd0yShWY5hpHV62i164o5tLbVxzVVshAAAAAIyXJY9OJInxuz0QKRSODYMLWhOZ2v8QhASOe9jb6fhZC3BlsePRfEU4nVJ/awTDzVi4bHMaoP21SbbRvAP4KUbIScv+6Yw2LHF/6K0ZjUPibbSWXCirYPGuuVl7zT789IUPLW4CpHr4JNCatp3ELXDLKMv6JJ+37le50lbBJ2LvDQdRqCgtphMF/imcN7mY5YRx2xE1A3MQ+L4QRaYK9u4GRfZP3LsAd00a+IkCpA22UNQMKdq5BFbJuwuOLqc8zxCTDlqxBG8J0HcxtfogQHDK06ukzfaXiNDKAob1MqBHS9lJxDYCwz8gd5DtFqNSTKG5l1zxIaKpDP/sffi2is1H9aKveyXSu5StXElYRl9SD5As0DHE4N0GLnf84/siiKXVyp4Ez121kLcUui/jLLFZEz/BwZK3Ilf9B9OcsEAeDMKAy2vjGSxQODgBz0QwGA+eP4ZjIjrIAQaXENv31QfLlOdXSRCkaybRniDHF4C8YcwhcvsqrOVuTP4B2Na+9wLdtrB31uz2rtlFI5kahdsnp/d1SrASDInYCtTYtdoke4kX+hoKWcEWM4Tle8pTUkUVv4BxS6fje/EzKBE4Qu9N9LMnrw/JNO0hqMVB4rk/2ou4AB1loQ7FZoPwut2o4KZB+0p9xnbrQKw038qjpHar+PyDwvxBRcu5hpHw3dguezeWv+IwvgW5icu8EGkhGa9AkFPPJT7VMSFb8xowveU=","base64"))});var tl=n(59327);function td(e){return(0,ev.n_)([(0,e1.AW)("epoch"),(0,e1.AW)("maximumFee"),(0,ev.KB)("transferFeeBasisPoints")],e)}(t6=nt||(nt={}))[t6.Uninitialized=0]="Uninitialized",t6[t6.TransferFeeConfig=1]="TransferFeeConfig",t6[t6.TransferFeeAmount=2]="TransferFeeAmount",t6[t6.MintCloseAuthority=3]="MintCloseAuthority",t6[t6.ConfidentialTransferMint=4]="ConfidentialTransferMint",t6[t6.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",t6[t6.DefaultAccountState=6]="DefaultAccountState",t6[t6.ImmutableOwner=7]="ImmutableOwner",t6[t6.MemoTransfer=8]="MemoTransfer",t6[t6.NonTransferable=9]="NonTransferable",t6[t6.InterestBearingConfig=10]="InterestBearingConfig",t6[t6.CpiGuard=11]="CpiGuard",t6[t6.PermanentDelegate=12]="PermanentDelegate",t6[t6.NonTransferableAccount=13]="NonTransferableAccount",t6[t6.TransferHook=14]="TransferHook",t6[t6.TransferHookAccount=15]="TransferHookAccount",t6[t6.MetadataPointer=18]="MetadataPointer",t6[t6.TokenMetadata=19]="TokenMetadata",BigInt(1e4);let tm=(0,ev.n_)([(0,e1.ZL)("transferFeeConfigAuthority"),(0,e1.ZL)("withdrawWithheldAuthority"),(0,e1.AW)("withheldAmount"),td("olderTransferFee"),td("newerTransferFee")]);function tf(e,t,n,r){if(void 0===t)return{amount:e,fee:void 0,expirationTime:void 0};let i=n.epoch<t.newerTransferFee.epoch?t.olderTransferFee:t.newerTransferFee,o=new(h())(i.maximumFee.toString()),s=n.epoch<t.newerTransferFee.epoch?(Number(t.newerTransferFee.epoch)*n.slotsInEpoch-n.absoluteSlot)*400/1e3:void 0;if(r){if(1e4===i.transferFeeBasisPoints){let t=new(h())(i.maximumFee.toString());return{amount:e.add(t),fee:t,expirationTime:s}}{let t=tg(e.mul(new(h())(1e4)),new(h())(1e4-i.transferFeeBasisPoints)),n=new(h())(i.maximumFee.toString()),r=t.sub(e).gt(n)?e.add(n):t,a=tg(r.mul(new(h())(i.transferFeeBasisPoints)),new(h())(1e4));return{amount:r,fee:a.gt(o)?o:a,expirationTime:s}}}{let t=tg(e.mul(new(h())(i.transferFeeBasisPoints)),new(h())(1e4));return{amount:e,fee:t.gt(o)?o:t,expirationTime:s}}}function tp(e,t){return void 0===e?t:void 0===t?e:Math.min(e,t)}async function th({connection:e,mints:t}){if(0===t.length)return{};let n=await N(e,t.map(e=>({pubkey:e}))),r={};for(let e of n){let t=(0,tl.rs)(e.pubkey,e.accountInfo,e.accountInfo?.owner);r[e.pubkey.toString()]={...t,feeConfig:function(e){let t=function(e,t){let n=0;for(;n+2+2<=t.length;){let r=t.readUInt16LE(n),i=t.readUInt16LE(n+2),o=n+2+2;if(r==e)return t.slice(o,o+i);n=o+i}return null}(nt.TransferFeeConfig,e.tlvData);return null!==t?tm.decode(t):null}(t)??void 0}}return r}function tg(e,t){let{div:n,mod:r}=e.divmod(t);return r.gt(X)?n.add(z):n}tm.span,(0,ev.n_)([(0,e1.AW)("withheldAmount")]).span;var tw=n(23663).Buffer;let ty={voterStakeRegistryCreateVoter:tw.from([6,24,245,52,243,255,148,25]),voterStakeRegistryCreateDepositEntry:tw.from([185,131,167,186,159,125,19,67]),voterStakeRegistryDeposit:tw.from([242,35,198,137,82,225,242,182]),voterStakeRegistryWithdraw:tw.from([183,18,70,156,148,109,161,34]),voterStakeRegistryUpdateVoterWeightRecord:tw.from([45,185,3,36,109,190,115,169])},tb=eZ([eF("state"),eF("nonce"),eY("lpVault"),eY("rewardVault"),eY(),eY(),eF(),eF(),eF("totalReward"),eW("perShareReward"),eF("lastSlot"),eF("perSlotReward")]),tA=eZ([eF("state"),eF("nonce"),eY("lpVault"),eY("rewardVaultA"),eF("totalRewardA"),eW("perShareRewardA"),eF("perSlotRewardA"),eV("option"),eY("rewardVaultB"),eU(7),eF("totalRewardB"),eW("perShareRewardB"),eF("perSlotRewardB"),eF("lastSlot"),eY()]),tS=eZ([eF("rewardState"),eF("rewardOpenTime"),eF("rewardEndTime"),eF("rewardLastUpdateTime"),eF("totalReward"),eF("totalRewardEmissioned"),eF("rewardClaimed"),eF("rewardPerSecond"),eW("accRewardPerShare"),eY("rewardVault"),eY("rewardMint"),eY("rewardSender"),eF("rewardType"),eQ(eF(),15,"padding")]),tk=eZ([eF(),eF("state"),eF("nonce"),eF("validRewardTokenNum"),eW("rewardMultiplier"),eF("rewardPeriodMax"),eF("rewardPeriodMin"),eF("rewardPeriodExtend"),eY("lpMint"),eY("lpVault"),eQ(tS,5,"rewardInfos"),eY("creator"),eY(),eQ(eF(),32,"padding")]),tI=new Proxy(tb,{get:(e,t,n)=>"decode"===t?(...t)=>{let n=e.decode(...t);return{...n,version:3,rewardInfos:[{rewardVault:n.rewardVault,totalReward:n.totalReward,perSlotReward:n.perSlotReward,perShareReward:n.perShareReward}]}}:Reflect.get(e,t,n)}),tT=new Proxy(tA,{get:(e,t,n)=>"decode"===t?(...t)=>{let n=e.decode(...t);return{...n,version:5,rewardInfos:[{rewardVault:n.rewardVaultA,totalReward:n.totalRewardA,perSlotReward:n.perSlotRewardA,perShareReward:n.perShareRewardA},{rewardVault:n.rewardVaultB,totalReward:n.totalRewardB,perSlotReward:n.perSlotRewardB,perShareReward:n.perShareRewardB}]}}:Reflect.get(e,t,n)}),tv=new Proxy(tk,{get:(e,t,n)=>"decode"===t?(...t)=>{let n=e.decode(...t);return{...n,version:6,rewardInfos:n.rewardInfos.map(e=>({...e,rewardType:(Object.entries(tX).find(t=>String(t[1])===e.rewardType.toString())??["Standard SPL"])[0]}))}}:Reflect.get(e,t,n)}),tE=eZ([eF("state"),eY("id"),eY("owner"),eF("deposited"),eQ(eF(),1,"rewardDebts")]),tP=eZ([eF("state"),eY("id"),eY("owner"),eF("deposited"),eQ(eW(),1,"rewardDebts"),eF(""),eF("voteLockedBalance"),eQ(eF(),15)]),tL=eZ([eF("state"),eY("id"),eY("owner"),eF("deposited"),eQ(eF(),2,"rewardDebts")]),tC=eZ([eF("state"),eY("id"),eY("owner"),eF("deposited"),eQ(eW(),2,"rewardDebts"),eQ(eF(),17)]),tO=eZ([eF(),eF("state"),eY("id"),eY("owner"),eF("deposited"),eQ(eW(),5,"rewardDebts"),eQ(eF(),16)]),tx={3:tI,5:tT,6:tv},tB={3:tP,5:tC,6:tO},tR=eZ([eY("mint"),eY("grantAuthority"),eF("baselineVoteWeightScaledFactor"),eF("maxExtraLockupVoteWeightScaledFactor"),eF("lockupSaturationSecs"),new eq(1,!0,"digitShift"),eQ(eV(),7,"reserved1"),eQ(eF(),7,"reserved2")]),tU=eZ([eU(8),eY("governanceProgramId"),eY("realm"),eY("realmGoverningTokenMint"),eY("realmAuthority"),eQ(eV(),32,"reserved1"),eQ(tR,4,"votingMints"),eK("timeOffset"),eV("bump"),eQ(eV(),7,"reserved2"),eQ(eF(),11,"reserved3")]),tD=eZ([eK("startTime"),eK("endTime"),eV("kind"),eQ(eV(),15,"reserved")]),t_=eZ([eQ(tD,1,"lockup"),eF("amountDeposited_native"),eF("amountInitiallyLockedNative"),eG("isUsed"),eG("allowClawback"),eV("votingMintConfigIdx"),eQ(eV(),29,"reserved")]),tq=eZ([eU(8),eY("voterAuthority"),eY("registrar"),eQ(t_,32,"deposits"),eV("voterBump"),eV("voterWweightRecordBump"),eQ(eV(),94,"reserved")]);var tN=n(23663).Buffer;function tV(e,t,n){return x([t.toBuffer(),tN.from("registrar","utf8"),n.toBuffer()],e)}function tM(e,t){return x([t.toBuffer(),tN.from("voting_mint_seed","utf8")],e)}function tF(e,t){return x([t.toBuffer()],e)}function tW(e,t,n){return x([t.toBuffer(),tN.from("voter","utf8"),n.toBuffer()],e)}function tK(e,t,n){return x([t.toBuffer(),tN.from("voter-weight-record","utf8"),n.toBuffer()],e)}function tH(e,t,n,r){return x([tN.from("governance","utf8"),t.toBuffer(),n.toBuffer(),r.toBuffer()],e)}var tY=n(23663).Buffer;let tG=I.from("Farm"),tX={"Standard SPL":0,"Option tokens":1};class tz extends ta{static getStateLayout(e){let t=tx[e];return tG.assertArgument(!!t,"invalid version","version",e),t}static getLedgerLayout(e){let t=tB[e];return tG.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e),ledger:this.getLedgerLayout(e)}}static getAssociatedAuthority({programId:e,poolId:t}){return x([t.toBuffer()],e)}static getAssociatedLedgerAccount({programId:e,poolId:t,owner:n,version:r}){let{publicKey:i}=x([t.toBuffer(),n.toBuffer(),tY.from(6===r?"farmer_info_associated_seed":"staker_info_v2_associated_seed","utf-8")],e);return i}static getAssociatedLedgerPoolAccount({programId:e,poolId:t,mint:n,type:r}){let{publicKey:i}=x([t.toBuffer(),n.toBuffer(),tY.from("lpVault"===r?"lp_vault_associated_seed":"rewardVault"===r?"reward_vault_associated_seed":"","utf-8")],e);return i}static makeDepositInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 3===n?this.makeDepositInstructionV3(e):5===n?this.makeDepositInstructionV5(e):6===n?this.makeDepositInstructionV6(e):tG.throwArgumentError("invalid version","poolKeys.version",n)}static makeDepositInstructionV3({poolKeys:e,userKeys:t,amount:n}){tG.assertArgument(1===e.rewardInfos.length,"lengths not equal 1","poolKeys.rewardInfos",e.rewardInfos),tG.assertArgument(1===t.rewardTokenAccounts.length,"lengths not equal 1","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let r=eZ([eV("instruction"),eF("amount")]),i=tY.alloc(r.span);r.encode({instruction:10,amount:J(n)},i);let o=[B(e.id,!1),R(e.authority,!1),B(t.ledger,!1),R(t.owner,!0),B(t.lpTokenAccount,!1),B(e.lpVault,!1),B(t.rewardTokenAccounts[0],!1),B(e.rewardInfos[0].rewardVault,!1),R(m.SYSVAR_CLOCK_PUBKEY,!1),R(l.H_,!1)];if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(B(e,!1));return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:o,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV3Deposit]}}}static makeDepositInstructionV5({poolKeys:e,userKeys:t,amount:n}){tG.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let r=eZ([eV("instruction"),eF("amount")]),i=tY.alloc(r.span);r.encode({instruction:11,amount:J(n)},i);let o=[B(e.id,!1),R(e.authority,!1),B(t.ledger,!1),R(t.owner,!0),B(t.lpTokenAccount,!1),B(e.lpVault,!1),B(t.rewardTokenAccounts[0],!1),B(e.rewardInfos[0].rewardVault,!1),R(m.SYSVAR_CLOCK_PUBKEY,!1),R(l.H_,!1)];for(let n=1;n<e.rewardInfos.length;n++)o.push(B(t.rewardTokenAccounts[n],!1)),o.push(B(e.rewardInfos[n].rewardVault,!1));if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(B(e,!1));return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:o,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV5Deposit]}}}static makeDepositInstructionV6({poolKeys:e,userKeys:t,amount:n}){tG.assertArgument(0!==t.rewardTokenAccounts.length,"lengths equal zero","userKeys.rewardTokenAccounts",t.rewardTokenAccounts),tG.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let r=eZ([eV("instruction"),eF("amount")]),i=tY.alloc(r.span);r.encode({instruction:1,amount:J(n)},i);let o=[R(l.H_,!1),R(v,!1),B(e.id,!1),R(e.authority,!1),B(e.lpVault,!1),B(t.ledger,!1),R(t.owner,!0),B(t.lpTokenAccount,!1)];for(let n=0;n<e.rewardInfos.length;n++)o.push(B(e.rewardInfos[n].rewardVault,!1)),o.push(B(t.rewardTokenAccounts[n],!1));return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:o,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV6Deposit]}}}static makeWithdrawInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 3===n?this.makeWithdrawInstructionV3(e):5===n?this.makeWithdrawInstructionV5(e):6===n?this.makeWithdrawInstructionV6(e):tG.throwArgumentError("invalid version","poolKeys.version",n)}static makeWithdrawInstructionV3({poolKeys:e,userKeys:t,amount:n}){tG.assertArgument(1===e.rewardInfos.length,"lengths not equal 1","poolKeys.rewardInfos",e.rewardInfos),tG.assertArgument(1===t.rewardTokenAccounts.length,"lengths not equal 1","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let r=eZ([eV("instruction"),eF("amount")]),i=tY.alloc(r.span);r.encode({instruction:11,amount:J(n)},i);let o=[B(e.id,!1),R(e.authority,!1),B(t.ledger,!1),R(t.owner,!0),B(t.lpTokenAccount,!1),B(e.lpVault,!1),B(t.rewardTokenAccounts[0],!1),B(e.rewardInfos[0].rewardVault,!1),R(m.SYSVAR_CLOCK_PUBKEY,!1),R(l.H_,!1)];if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(B(e,!1));return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:o,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV5Deposit]}}}static makeWithdrawInstructionV5({poolKeys:e,userKeys:t,amount:n}){tG.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with params.poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let r=eZ([eV("instruction"),eF("amount")]),i=tY.alloc(r.span);r.encode({instruction:12,amount:J(n)},i);let o=[B(e.id,!1),R(e.authority,!1),B(t.ledger,!1),R(t.owner,!0),B(t.lpTokenAccount,!1),B(e.lpVault,!1),B(t.rewardTokenAccounts[0],!1),B(e.rewardInfos[0].rewardVault,!1),R(m.SYSVAR_CLOCK_PUBKEY,!1),R(l.H_,!1)];for(let n=1;n<e.rewardInfos.length;n++)o.push(B(t.rewardTokenAccounts[n],!1)),o.push(B(e.rewardInfos[n].rewardVault,!1));if(t.auxiliaryLedgers)for(let e of t.auxiliaryLedgers)o.push(B(e,!1));return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:o,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV5Withdraw]}}}static makeWithdrawInstructionV6({poolKeys:e,userKeys:t,amount:n}){tG.assertArgument(0!==t.rewardTokenAccounts.length,"lengths equal zero","userKeys.rewardTokenAccounts",t.rewardTokenAccounts),tG.assertArgument(t.rewardTokenAccounts.length===e.rewardInfos.length,"lengths not equal with params.poolKeys.rewardInfos","userKeys.rewardTokenAccounts",t.rewardTokenAccounts);let r=eZ([eV("instruction"),eF("amount")]),i=tY.alloc(r.span);r.encode({instruction:2,amount:J(n)},i);let o=[R(l.H_,!1),B(e.id,!1),R(e.authority,!1),B(e.lpVault,!1),B(t.ledger,!1),R(t.owner,!0),B(t.lpTokenAccount,!1)];for(let n=0;n<e.rewardInfos.length;n++)o.push(B(e.rewardInfos[n].rewardVault,!1)),o.push(B(t.rewardTokenAccounts[n],!1));return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:o,data:i})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV6Withdraw]}}}static makeCreateAssociatedLedgerAccountInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 3===n?this.makeCreateAssociatedLedgerAccountInstructionV3(e):5===n?this.makeCreateAssociatedLedgerAccountInstructionV5(e):tG.throwArgumentError("invalid version","poolKeys.version",n)}static makeCreateAssociatedLedgerAccountInstructionV3({poolKeys:e,userKeys:t}){let n=eZ([eV("instruction")]),r=tY.alloc(n.span);n.encode({instruction:9},r);let i=[B(e.id,!1),B(t.ledger,!1),R(t.owner,!0),R(v,!1),R(m.SYSVAR_RENT_PUBKEY,!1)];return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:i,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV3CreateLedger]}}}static makeCreateAssociatedLedgerAccountInstructionV5({poolKeys:e,userKeys:t}){let n=eZ([eV("instruction")]),r=tY.alloc(n.span);n.encode({instruction:10},r);let i=[B(e.id,!1),B(t.ledger,!1),R(t.owner,!0),R(v,!1),R(m.SYSVAR_RENT_PUBKEY,!1)];return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:i,data:r})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV5CreateLedger]}}}static makeCreateFarmInstruction({connection:e,userKeys:t,poolInfo:n}){let{version:r}=n;return 6===r?this.makeCreateFarmInstructionV6({connection:e,userKeys:t,poolInfo:n}):tG.throwArgumentError("invalid version","version",r)}static async makeCreateFarmInstructionV6({connection:e,userKeys:t,poolInfo:n}){let r=t.payer??t.owner,i=tu({fromPublicKey:r,programId:n.programId}),o=await e.getMinimumBalanceForRentExemption(tv.span),s=[],a=[],u=[],c=[],d=[];s.push(m.SystemProgram.createAccountWithSeed({fromPubkey:r,basePubkey:r,seed:i.seed,newAccountPubkey:i.publicKey,lamports:o,space:tv.span,programId:n.programId}));let{publicKey:f,nonce:p}=tz.getAssociatedAuthority({programId:n.programId,poolId:i.publicKey}),g=tz.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:i.publicKey,mint:n.lpMint,type:"lpVault"}),w=[],y=[];for(let r of n.rewardInfos){let o;tG.assertArgument(r.rewardOpenTime<r.rewardEndTime,"start time error","rewardInfo.rewardOpenTime",r.rewardOpenTime),tG.assertArgument(void 0!==tX[r.rewardType],"reward type error","rewardInfo.rewardType",r.rewardType),tG.assertArgument(J(r.rewardPerSecond).gt(X),"rewardPerSecond error","rewardInfo.rewardPerSecond",r.rewardPerSecond),w.push({isSet:new(h())(1),rewardPerSecond:J(r.rewardPerSecond),rewardOpenTime:J(r.rewardOpenTime),rewardEndTime:J(r.rewardEndTime),rewardType:J(tX[r.rewardType])}),r.rewardMint.equals(m.PublicKey.default)?(o=await to.insertCreateWrappedNativeAccount({connection:e,owner:t.owner,payer:t.payer??t.owner,instructions:s,signers:d,amount:J(r.rewardEndTime).sub(J(r.rewardOpenTime)).mul(J(r.rewardPerSecond)),instructionsType:u}),a.push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:o,owner:t.owner,payer:t.payer??t.owner,instructionsType:c}))):o=this._selectTokenAccount({programId:l.H_,tokenAccounts:t.tokenAccounts,mint:r.rewardMint,owner:t.owner,config:{associatedOnly:!1}}),tG.assertArgument(null!==o,"cannot found target token accounts","tokenAccounts",t.tokenAccounts);let f=r.rewardMint.equals(m.PublicKey.default)?eo.WSOL.mint:r.rewardMint;y.push({rewardMint:f,rewardVault:tz.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:i.publicKey,mint:f,type:"rewardVault"}),userRewardToken:o})}let b=this._selectTokenAccount({programId:l.H_,tokenAccounts:t.tokenAccounts,mint:n.lockInfo.lockMint,owner:t.owner,config:{associatedOnly:!1}});tG.assertArgument(null!==b,"cannot found lock vault","tokenAccounts",t.tokenAccounts);let A=eZ([eF("isSet"),eF("rewardPerSecond"),eF("rewardOpenTime"),eF("rewardEndTime"),eF("rewardType")]),S=eZ([eV("instruction"),eF("nonce"),eQ(A,5,"rewardTimeInfo")]),k=tY.alloc(S.span);S.encode({instruction:0,nonce:new(h())(p),rewardTimeInfo:w},k);let I=[R(l.H_,!1),R(v,!1),R(m.SYSVAR_RENT_PUBKEY,!1),B(i.publicKey,!1),R(f,!1),B(g,!1),R(n.lpMint,!1),B(n.lockInfo.lockVault,!1),R(n.lockInfo.lockMint,!1),B(b??m.PublicKey.default,!1),R(t.owner,!0)];for(let e of y)I.push(...[{pubkey:e.rewardMint,isSigner:!1,isWritable:!1},{pubkey:e.rewardVault,isSigner:!1,isWritable:!0},{pubkey:e.userRewardToken,isSigner:!1,isWritable:!0}]);let T=new m.TransactionInstruction({programId:n.programId,keys:I,data:k});return{address:{farmId:i.publicKey},innerTransaction:{instructions:[...s,T,...a],signers:d,lookupTableAddress:[],instructionTypes:[...u,ne.farmV6Create,...c]}}}static makeCreatorWithdrawFarmRewardInstruction(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeCreatorWithdrawFarmRewardInstructionV6(e):tG.throwArgumentError("invalid version","version",n)}static makeCreatorWithdrawFarmRewardInstructionV6({poolKeys:e,userKeys:t,withdrawMint:n}){let r=e.rewardInfos.find(e=>e.rewardMint.equals(n.equals(m.PublicKey.default)?eo.WSOL.mint:n));tG.assertArgument(void 0!==r,"withdraw mint error","poolKeys.rewardInfos",e.rewardInfos);let i=r?.rewardVault??m.PublicKey.default,o=eZ([eV("instruction")]),s=tY.alloc(o.span);o.encode({instruction:5},s);let a=[R(l.H_,!1),B(e.id,!1),R(e.authority,!1),R(e.lpVault,!1),B(i,!1),B(t.userRewardToken,!1),R(t.owner,!0)];return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:a,data:s})],signers:[],lookupTableAddress:[],instructionTypes:[ne.farmV6CreatorWithdraw]}}}static async fetchMultipleInfoAndUpdate({connection:e,pools:t,owner:n,config:r,chainTime:i}){let o=!1,s=!1,a=[],u={};for(let e of t)u[e.id.toString()]=e,6===e.version?s=!0:o=!0,a.push({pubkey:e.id,version:e.version,key:"state",poolId:e.id}),a.push({pubkey:e.lpVault,version:e.version,key:"lpVault",poolId:e.id}),n&&a.push({pubkey:this.getAssociatedLedgerAccount({programId:e.programId,poolId:e.id,owner:n,version:e.version}),version:e.version,key:"ledger",poolId:e.id});let c={};for(let{pubkey:t,version:n,key:i,poolId:o,accountInfo:s}of(await N(e,a,r))){let e=o.toBase58();if("state"===i){let r=this.getStateLayout(n);if(!s||!s.data||s.data.length!==r.span)return tG.throwArgumentError("invalid farm state account info","pools.id",t);c[e]={...c[e],apiPoolInfo:u[e],state:r.decode(s.data)}}else if("lpVault"===i){if(!s||!s.data||s.data.length!==e$.span)return tG.throwArgumentError("invalid farm lp vault account info","pools.lpVault",t);c[e]={...c[e],lpVault:e$.decode(s.data)}}else if("ledger"===i){let r=this.getLedgerLayout(n);s&&s.data&&(tG.assertArgument(s.data.length===r.span,"invalid farm ledger account info","ledger",t),c[e]={...c[e],ledger:r.decode(s.data)})}}let l=s||o?await e.getSlot():0;for(let e of Object.keys(c))void 0!==c[e]&&(c[e].state=tz.updatePoolInfo(c[e].state,c[e].lpVault,l,i));for(let[e,{state:t,ledger:n}]of Object.entries(c))if(n){let r;r=6===t.version?t.rewardMultiplier:1===t.rewardInfos.length?j.pow(new(h())(9)):j.pow(new(h())(15));let i=t.rewardInfos.map((e,i)=>{let o=n.rewardDebts[i];return n.deposited.mul(6===t.version?e.accRewardPerShare:e.perShareReward).div(r).sub(o)});c[e].wrapped={...c[e].wrapped,pendingRewards:i}}return c}static updatePoolInfo(e,t,n,r){if(3===e.version||5===e.version){if(e.lastSlot.gte(new(h())(n)))return e;let r=new(h())(n).sub(e.lastSlot);for(let i of(e.lastSlot=new(h())(n),e.rewardInfos)){if(t.amount.eq(new(h())(0)))continue;let n=i.perSlotReward.mul(r);i.perShareReward=i.perShareReward.add(n.mul(new(h())(10).pow(new(h())(3===e.version?9:15))).div(t.amount)),i.totalReward=i.totalReward.add(n)}}else if(6===e.version)for(let n of e.rewardInfos){if(n.rewardState.eq(new(h())(0)))continue;let i=h().min(new(h())(r),n.rewardEndTime);if(n.rewardOpenTime.gte(i))continue;let o=i.sub(n.rewardLastUpdateTime).mul(n.rewardPerSecond),s=n.totalReward.sub(n.totalRewardEmissioned);s.lt(o)?(o=s,n.rewardLastUpdateTime=n.rewardLastUpdateTime.add(s.div(n.rewardPerSecond))):n.rewardLastUpdateTime=i,t.amount.eq(new(h())(0))||(n.accRewardPerShare=n.accRewardPerShare.add(o.mul(e.rewardMultiplier).div(t.amount)),n.totalRewardEmissioned=n.totalRewardEmissioned.add(o))}return e}static makeCreatorWithdrawFarmRewardInstructionSimple(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeCreatorWithdrawFarmRewardInstructionV6Simple(e):tG.throwArgumentError("invalid version","version",n)}static async makeCreatorWithdrawFarmRewardInstructionV6Simple({connection:e,poolKeys:t,userKeys:n,withdrawMint:r,makeTxVersion:i,lookupTableCache:o,computeBudgetConfig:s}){let a;let u=[],c=[],d=[],f=[],p=[];if(r.equals(m.PublicKey.default))a=await to.insertCreateWrappedNativeAccount({connection:e,owner:n.owner,payer:n.payer??n.owner,instructions:u,signers:p,amount:0,instructionsType:d}),c.push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:a,owner:n.owner,payer:n.payer??n.owner,instructionsType:f}));else{let e=this._selectTokenAccount({programId:l.H_,tokenAccounts:n.tokenAccounts,mint:r,owner:n.owner});null===e?(a=tr(n.owner,r,l.H_).publicKey,u.push(to.makeCreateAssociatedTokenAccountInstruction({programId:l.H_,mint:r,associatedAccount:a,owner:n.owner,payer:n.payer??n.owner,instructionsType:d}))):a=e}let h=this.makeCreatorWithdrawFarmRewardInstructionV6({poolKeys:t,userKeys:{userRewardToken:a,owner:n.owner,payer:n.payer},withdrawMint:r});return{address:{},innerTransactions:await K({connection:e,makeTxVersion:i,computeBudgetConfig:s,payer:n.payer??n.owner,innerTransaction:[{instructionTypes:d,instructions:u,signers:p},h.innerTransaction,{instructionTypes:f,instructions:c,signers:[]}],lookupTableCache:o})}}static makeCreateFarmInstructionSimple(e){let{version:t}=e.poolInfo;return 6===t?this.makeCreateFarmInstructionV6Simple(e):tG.throwArgumentError("invalid version","version",t)}static async makeCreateFarmInstructionV6Simple({connection:e,userKeys:t,poolInfo:n,makeTxVersion:r,lookupTableCache:i,computeBudgetConfig:o}){let s=t.payer??t.owner,a=tu({fromPublicKey:s,programId:n.programId}),u=await e.getMinimumBalanceForRentExemption(tv.span),c=[],d=[],f=[],p=[],g=[];c.push(m.SystemProgram.createAccountWithSeed({fromPubkey:s,basePubkey:s,seed:a.seed,newAccountPubkey:a.publicKey,lamports:u,space:tv.span,programId:n.programId}));let{publicKey:w,nonce:y}=tz.getAssociatedAuthority({programId:n.programId,poolId:a.publicKey}),b=tz.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:a.publicKey,mint:n.lpMint,type:"lpVault"}),A=[],S=[];for(let r of n.rewardInfos){let i;if(tG.assertArgument(r.rewardOpenTime<r.rewardEndTime,"start time error","rewardInfo.rewardOpenTime",r.rewardOpenTime),tG.assertArgument(void 0!==tX[r.rewardType],"reward type error","rewardInfo.rewardType",r.rewardType),tG.assertArgument(J(r.rewardPerSecond).gt(X),"rewardPerSecond error","rewardInfo.rewardPerSecond",r.rewardPerSecond),A.push({isSet:new(h())(1),rewardPerSecond:J(r.rewardPerSecond),rewardOpenTime:J(r.rewardOpenTime),rewardEndTime:J(r.rewardEndTime),rewardType:J(tX[r.rewardType])}),r.rewardMint.equals(m.PublicKey.default)?(i=await to.insertCreateWrappedNativeAccount({connection:e,owner:t.owner,payer:t.payer??t.owner,instructions:c,signers:g,amount:J(r.rewardEndTime).sub(J(r.rewardOpenTime)).mul(J(r.rewardPerSecond)),instructionsType:f}),d.push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:i,owner:t.owner,payer:t.payer??t.owner,instructionsType:p}))):i=this._selectTokenAccount({programId:l.H_,tokenAccounts:t.tokenAccounts,mint:r.rewardMint,owner:t.owner,config:{associatedOnly:!1}}),tG.assertArgument(null!==i,"cannot found target token accounts","tokenAccounts",t.tokenAccounts),null===i)throw Error("cannot found target token accounts");let o=r.rewardMint.equals(m.PublicKey.default)?eo.WSOL.mint:r.rewardMint;S.push({rewardMint:o,rewardVault:tz.getAssociatedLedgerPoolAccount({programId:n.programId,poolId:a.publicKey,mint:o,type:"rewardVault"}),userRewardToken:i})}let k=this._selectTokenAccount({programId:l.H_,tokenAccounts:t.tokenAccounts,mint:n.lockInfo.lockMint,owner:t.owner,config:{associatedOnly:!1}});tG.assertArgument(null!==k,"cannot found lock vault","tokenAccounts",t.tokenAccounts);let I=eZ([eF("isSet"),eF("rewardPerSecond"),eF("rewardOpenTime"),eF("rewardEndTime"),eF("rewardType")]),T=eZ([eV("instruction"),eF("nonce"),eQ(I,5,"rewardTimeInfo")]),E=tY.alloc(T.span);T.encode({instruction:0,nonce:new(h())(y),rewardTimeInfo:A},E);let P=[R(l.H_,!1),R(v,!1),R(m.SYSVAR_RENT_PUBKEY,!1),B(a.publicKey,!1),R(w,!1),B(b,!1),R(n.lpMint,!1),B(n.lockInfo.lockVault,!1),R(n.lockInfo.lockMint,!1),B(k??m.PublicKey.default,!1),R(t.owner,!0)];for(let e of S)P.push(...[{pubkey:e.rewardMint,isSigner:!1,isWritable:!1},{pubkey:e.rewardVault,isSigner:!1,isWritable:!0},{pubkey:e.userRewardToken,isSigner:!1,isWritable:!0}]);let L=new m.TransactionInstruction({programId:n.programId,keys:P,data:E});return{address:{farmId:a.publicKey},innerTransactions:await K({connection:e,makeTxVersion:r,computeBudgetConfig:o,payer:t.payer??t.owner,innerTransaction:[{instructionTypes:f,instructions:c,signers:g},{instructionTypes:[ne.farmV6Create],instructions:[L],signers:[]},{instructionTypes:p,instructions:d,signers:[]}],lookupTableCache:i})}}static makeRestartFarmInstructionSimple(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeRestartFarmInstructionV6Simple(e):tG.throwArgumentError("invalid version","version",n)}static async makeRestartFarmInstructionV6Simple({connection:e,poolKeys:t,userKeys:n,newRewardInfo:r,makeTxVersion:i,lookupTableCache:o,computeBudgetConfig:s}){let a;tG.assertArgument(r.rewardOpenTime<r.rewardEndTime,"start time error","newRewardInfo",r);let u=r.rewardMint.equals(m.PublicKey.default)?eo.WSOL.mint:r.rewardMint,c=t.rewardInfos.find(e=>e.rewardMint.equals(u));tG.assertArgument(c,"configuration does not exist","rewardInfo",c);let d=c?.rewardVault??m.PublicKey.default,f=[],p=[],h=[],g=[],w=[];if(r.rewardMint.equals(m.PublicKey.default)?(a=await to.insertCreateWrappedNativeAccount({connection:e,owner:n.owner,payer:n.payer??n.owner,instructions:f,signers:w,amount:J(r.rewardEndTime).sub(J(r.rewardOpenTime)).mul(J(r.rewardPerSecond)),instructionsType:h}),p.push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:a,owner:n.owner,payer:n.payer??n.owner,instructionsType:g}))):a=this._selectTokenAccount({programId:l.H_,tokenAccounts:n.tokenAccounts,mint:r.rewardMint,owner:n.owner,config:{associatedOnly:!1}}),tG.assertArgument(null!==a,"cannot found target token accounts","tokenAccounts",n.tokenAccounts),null===a)throw Error("cannot found target token accounts");let y=eZ([eV("instruction"),eF("rewardReopenTime"),eF("rewardEndTime"),eF("rewardPerSecond")]),b=tY.alloc(y.span);y.encode({instruction:3,rewardReopenTime:J(r.rewardOpenTime),rewardEndTime:J(r.rewardEndTime),rewardPerSecond:J(r.rewardPerSecond)},b);let A=[R(l.H_,!1),B(t.id,!1),R(t.lpVault,!1),B(d,!1),B(a,!1),R(n.owner,!0)],S=new m.TransactionInstruction({programId:t.programId,keys:A,data:b});return{address:{},innerTransactions:await K({connection:e,makeTxVersion:i,computeBudgetConfig:s,payer:n.payer??n.owner,innerTransaction:[{instructionTypes:h,instructions:f,signers:w},{instructionTypes:[ne.farmV6Restart],instructions:[S],signers:[]},{instructionTypes:g,instructions:p,signers:[]}],lookupTableCache:o})}}static makeFarmCreatorAddRewardTokenInstructionSimple(e){let{poolKeys:t}=e,{version:n}=t;return 6===n?this.makeFarmCreatorAddRewardTokenInstructionV6Simple(e):tG.throwArgumentError("invalid version","version",n)}static async makeFarmCreatorAddRewardTokenInstructionV6Simple({connection:e,poolKeys:t,userKeys:n,newRewardInfo:r,makeTxVersion:i,lookupTableCache:o,computeBudgetConfig:s}){let a;let u=tz.getAssociatedLedgerPoolAccount({programId:t.programId,poolId:t.id,mint:r.rewardMint.equals(m.PublicKey.default)?eo.WSOL.mint:r.rewardMint,type:"rewardVault"}),c=[],d=[],f=[],p=[],g=[];if(r.rewardMint.equals(m.PublicKey.default)?(a=await to.insertCreateWrappedNativeAccount({connection:e,owner:n.owner,payer:n.payer??n.owner,instructions:c,signers:g,amount:J(r.rewardEndTime).sub(J(r.rewardOpenTime)).mul(J(r.rewardPerSecond)),instructionsType:f}),d.push(to.makeCloseAccountInstruction({programId:l.H_,tokenAccount:a,owner:n.owner,payer:n.payer??n.owner,instructionsType:p}))):a=this._selectTokenAccount({programId:l.H_,tokenAccounts:n.tokenAccounts,mint:r.rewardMint,owner:n.owner,config:{associatedOnly:!1}}),tG.assertArgument(null!==a,"cannot found target token accounts","tokenAccounts",n.tokenAccounts),null===a)throw Error("cannot found target token accounts");let w=r.rewardMint.equals(m.PublicKey.default)?eo.WSOL.mint:r.rewardMint,y=eZ([eV("instruction"),eF("isSet"),eF("rewardPerSecond"),eF("rewardOpenTime"),eF("rewardEndTime"),eF("rewardType")]),b=tY.alloc(y.span);y.encode({instruction:4,isSet:new(h())(1),rewardPerSecond:J(r.rewardPerSecond),rewardOpenTime:J(r.rewardOpenTime),rewardEndTime:J(r.rewardEndTime),rewardType:J(tX[r.rewardType])},b);let A=[R(l.H_,!1),R(v,!1),R(m.SYSVAR_RENT_PUBKEY,!1),B(t.id,!1),R(t.authority,!1),R(w,!1),B(u,!1),B(a,!1),R(n.owner,!0)],S=new m.TransactionInstruction({programId:t.programId,keys:A,data:b});return{address:{},innerTransactions:await K({connection:e,makeTxVersion:i,computeBudgetConfig:s,payer:n.payer??n.owner,innerTransaction:[{instructionTypes:f,instructions:c,signers:g},{instructionTypes:[ne.farmV6CreatorAddReward],instructions:[S],signers:[]},{instructionTypes:p,instructions:d,signers:[]}],lookupTableCache:o})}}static async makeDepositInstructionSimple({connection:e,poolKeys:t,fetchPoolInfo:n,ownerInfo:r,amount:i,associatedOnly:o=!0,checkCreateATAOwner:s=!1,makeTxVersion:a,lookupTableCache:u,computeBudgetConfig:c}){let d={};for(let e of r.tokenAccounts)o?tr(r.wallet,e.accountInfo.mint,e.programId).publicKey.equals(e.pubkey)&&(d[e.accountInfo.mint.toString()]=e.pubkey):d[e.accountInfo.mint.toString()]=e.pubkey;let f=[],p=[],h=[],g=[],w=[],{lpVault:y,apiPoolInfo:b,ledger:A}=n,S=d[y.mint.toString()];tG.assertArgument(S,"you don't have any lp","lp zero",d);let k=[];for(let t of b.rewardInfos){let n=r.useSOLBalance&&t.rewardMint.equals(eo.WSOL.mint),i=d[t.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:l.H_,mint:t.rewardMint,tokenAccounts:n?[]:r.tokenAccounts,owner:r.wallet,createInfo:{connection:e,payer:r.feePayer,amount:0,frontInstructions:f,frontInstructionsType:h,endInstructions:n?p:[],endInstructionsType:n?g:[],signers:w},associatedOnly:!n&&o,checkCreateATAOwner:s});d[t.rewardMint.toString()]=i,k.push(i)}let I=await tz.getAssociatedLedgerAccount({programId:new m.PublicKey(b.programId),poolId:new m.PublicKey(b.id),owner:r.wallet,version:b.version});if(b.version<6&&!A){let e=tz.makeCreateAssociatedLedgerAccountInstruction({poolKeys:t,userKeys:{owner:r.wallet,ledger:I}});f.push(...e.innerTransaction.instructions),h.push(...e.innerTransaction.instructionTypes)}let T=tz.makeDepositInstruction({poolKeys:t,userKeys:{ledger:I,lpTokenAccount:S,owner:r.wallet,rewardTokenAccounts:k},amount:i});return{address:T.address,innerTransactions:await K({connection:e,makeTxVersion:a,computeBudgetConfig:c,payer:r.feePayer,innerTransaction:[{instructionTypes:h,instructions:f,signers:w},T.innerTransaction,{instructionTypes:g,instructions:p,signers:[]}],lookupTableCache:u})}}static async makeWithdrawInstructionSimple({connection:e,fetchPoolInfo:t,ownerInfo:n,amount:r,associatedOnly:i=!0,checkCreateATAOwner:o=!1,makeTxVersion:s,lookupTableCache:a,computeBudgetConfig:u}){let c={};for(let e of n.tokenAccounts)i?tr(n.wallet,e.accountInfo.mint,e.programId).publicKey.equals(e.pubkey)&&(c[e.accountInfo.mint.toString()]=e.pubkey):c[e.accountInfo.mint.toString()]=e.pubkey;let d=[],m=[],f=[],p=[],h=[],g=[],w=[],{lpVault:y,wrapped:b,apiPoolInfo:A}=t;if(void 0===b)throw Error("no lp");let S=y.mint,k=n.useSOLBalance&&S.equals(eo.WSOL.mint),I=c[S.toString()]??await this._selectOrCreateTokenAccount({programId:l.H_,mint:S,tokenAccounts:k?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:d,frontInstructionsType:f,signers:w},associatedOnly:!k&&i,checkCreateATAOwner:o});c[S.toString()]=I;let T=[];for(let t of A.rewardInfos){let r=n.useSOLBalance&&t.rewardMint.equals(eo.WSOL.mint),s=c[t.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:l.H_,mint:t.rewardMint,tokenAccounts:r?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:d,frontInstructionsType:f,endInstructions:r?m:[],endInstructionsType:r?p:[],signers:w},associatedOnly:!r&&i,checkCreateATAOwner:o});c[t.rewardMint.toString()]=s,T.push(s)}let v=this.makeWithdrawInstruction({poolKeys:A,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:A.programId,poolId:A.id,owner:n.wallet,version:A.version}),lpTokenAccount:I,rewardTokenAccounts:T,owner:n.wallet},amount:r});return h.push(...v.innerTransaction.instructions),g.push(...v.innerTransaction.instructionTypes),{address:{},innerTransactions:await K({connection:e,makeTxVersion:s,computeBudgetConfig:u,payer:n.feePayer,innerTransaction:[{instructionTypes:f,instructions:d,signers:w},{instructionTypes:g,instructions:h,signers:[]},{instructionTypes:p,instructions:m,signers:[]}],lookupTableCache:a})}}static async makeHarvestAllRewardInstructionSimple({connection:e,fetchPoolInfos:t,ownerInfo:n,associatedOnly:r=!0,checkCreateATAOwner:i=!1,makeTxVersion:o,lookupTableCache:s,computeBudgetConfig:a}){let u={};for(let e of n.tokenAccounts)r?tr(n.wallet,e.accountInfo.mint,e.programId).publicKey.equals(e.pubkey)&&(u[e.accountInfo.mint.toString()]=e.pubkey):u[e.accountInfo.mint.toString()]=e.pubkey;let c=[],d=[],m=[],f=[],p=[],h=[];for(let{lpVault:o,wrapped:s,apiPoolInfo:a,ledger:g}of Object.values(t)){if(void 0===s||void 0===g||!(void 0!==s.pendingRewards.find(e=>e.gt(X))||g.deposited.isZero()))continue;let t=o.mint,w=n.useSOLBalance&&t.equals(eo.WSOL.mint),y=u[t.toString()]??await this._selectOrCreateTokenAccount({programId:l.H_,mint:t,tokenAccounts:w?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,frontInstructionsType:m,signers:h},associatedOnly:!w&&r,checkCreateATAOwner:i});u[t.toString()]=y;let b=[];for(let t of a.rewardInfos){let o=n.useSOLBalance&&t.rewardMint.equals(eo.WSOL.mint),s=u[t.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:l.H_,mint:t.rewardMint,tokenAccounts:o?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,frontInstructionsType:m,endInstructions:o?d:[],endInstructionsType:o?f:[],signers:h},associatedOnly:!o&&r,checkCreateATAOwner:i});u[t.rewardMint.toString()]=s,b.push(s)}let A=this.makeWithdrawInstruction({poolKeys:a,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:a.programId,poolId:a.id,owner:n.wallet,version:a.version}),lpTokenAccount:y,rewardTokenAccounts:b,owner:n.wallet},amount:0});p.push(A.innerTransaction)}return{address:{},innerTransactions:await K({connection:e,makeTxVersion:o,computeBudgetConfig:a,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:c,signers:h},...p,{instructionTypes:f,instructions:d,signers:[]}],lookupTableCache:s})}}static async makeV1InfoToV2PdaAndHarvestSimple({connection:e,wallet:t,tokenAccounts:n,programIdV3:r,programIdV5:i,makeTxVersion:o,lookupTableCache:s,computeBudgetConfig:a}){let u={};for(let e of n){let n=e.accountInfo.mint,r=tr(t,n,e.programId).publicKey;r.equals(e.pubkey)&&(u[n.toString()]=r),void 0===u[n.toString()]&&(u[n.toString()]=e.pubkey)}let c=await e.getProgramAccounts(r,{filters:[{memcmp:{offset:40,bytes:t.toString()}}]}),l=await e.getProgramAccounts(i,{filters:[{memcmp:{offset:40,bytes:t.toString()}}]}),d={},f={};for(let e of c){let n=(e.account.data.length===tE.span?tE:tP).decode(e.account.data),i=n.id.toString(),o=this.getAssociatedLedgerAccount({programId:r,poolId:n.id,owner:t,version:3});void 0===d[i]&&(d[i]={pda:void 0,other:[]}),o.equals(e.pubkey)?d[i].pda=e.pubkey:d[i].other.push(e.pubkey)}for(let e of l){let n=(e.account.data.length===tL.span?tL:tC).decode(e.account.data),r=n.id.toString(),o=this.getAssociatedLedgerAccount({programId:i,poolId:n.id,owner:t,version:5});void 0===f[r]&&(f[r]={pda:void 0,other:[]}),o.equals(e.pubkey)?f[r].pda=e.pubkey:f[r].other.push(e.pubkey)}let p=[...Object.entries(d).filter(e=>e[1].other.length>0).map(e=>e[0]),...Object.entries(f).filter(e=>e[1].other.length>0).map(e=>e[0])],h=await e.getMultipleAccountsInfo(p.map(e=>new m.PublicKey(e))),g={};for(let e=0;e<p.length;e++){let t=p[e],n=h[e];null!==n&&(g[t]=n.data)}let w=[],y=[],b=[],A=[],S=[];for(let[n,i]of Object.entries(d)){if(0===i.other.length||void 0===g[n])continue;let o=tb.decode(g[n]),[s,a]=await e.getMultipleAccountsInfo([o.lpVault,o.rewardVault]);if(null===s||null===a)throw Error("get lp and reward info error");let c=e$.decode(s.data),l=e$.decode(a.data),d=u[c.mint.toString()];void 0===d&&(d=await this._selectOrCreateTokenAccount({programId:s.owner,mint:c.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:y,endInstructions:[],endInstructionsType:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),u[c.mint.toString()]=d);let f=u[l.mint.toString()];if(void 0===f&&(f=await this._selectOrCreateTokenAccount({programId:a.owner,mint:l.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:y,endInstructions:l.mint.toString()===et.mint?A:[],endInstructionsType:l.mint.toString()===et.mint?S:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),u[l.mint.toString()]=f),void 0===i.pda){let e=this.makeCreateAssociatedLedgerAccountInstructionV3({poolKeys:{programId:r,id:new m.PublicKey(n)},userKeys:{ledger:this.getAssociatedLedgerAccount({programId:r,poolId:new m.PublicKey(n),owner:t,version:3}),owner:t}});b.push(e.innerTransaction)}let p=this.makeDepositInstructionV3({amount:0,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:r,poolId:new m.PublicKey(n),owner:t,version:3}),owner:t,lpTokenAccount:d,rewardTokenAccounts:[f],auxiliaryLedgers:i.other},poolKeys:{programId:r,id:new m.PublicKey(n),authority:this.getAssociatedAuthority({programId:r,poolId:new m.PublicKey(n)}).publicKey,lpVault:o.lpVault,rewardInfos:[{rewardVault:o.rewardVault}]}});b.push(p.innerTransaction)}for(let[n,r]of Object.entries(f)){if(0===r.other.length||void 0===g[n])continue;let o=tA.decode(g[n]),[s,a,c]=await e.getMultipleAccountsInfo([o.lpVault,o.rewardVaultA,o.rewardVaultB]);if(null===s||null===a||null===c)throw Error("get lp and reward A / B info error");let l=e$.decode(s.data),d=e$.decode(a.data),f=e$.decode(c.data),p=u[l.mint.toString()];void 0===p&&(p=await this._selectOrCreateTokenAccount({programId:s.owner,mint:l.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:y,endInstructions:[],endInstructionsType:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),u[l.mint.toString()]=p);let h=u[d.mint.toString()];void 0===h&&(h=await this._selectOrCreateTokenAccount({programId:a.owner,mint:d.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:y,endInstructions:d.mint.toString()===et.mint?A:[],endInstructionsType:d.mint.toString()===et.mint?S:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),u[d.mint.toString()]=h);let k=u[f.mint.toString()];if(void 0===k&&(k=await this._selectOrCreateTokenAccount({programId:c.owner,mint:f.mint,tokenAccounts:[],owner:t,createInfo:{connection:e,payer:t,amount:0,frontInstructions:w,frontInstructionsType:y,endInstructions:f.mint.toString()===et.mint?A:[],endInstructionsType:f.mint.toString()===et.mint?S:[],signers:[]},associatedOnly:!0,checkCreateATAOwner:!0}),u[f.mint.toString()]=k),void 0===r.pda){let e=this.makeCreateAssociatedLedgerAccountInstructionV5({poolKeys:{programId:i,id:new m.PublicKey(n)},userKeys:{ledger:this.getAssociatedLedgerAccount({programId:i,poolId:new m.PublicKey(n),owner:t,version:5}),owner:t}});b.push(e.innerTransaction)}let I=this.makeDepositInstructionV5({amount:0,userKeys:{ledger:this.getAssociatedLedgerAccount({programId:i,poolId:new m.PublicKey(n),owner:t,version:5}),owner:t,lpTokenAccount:p,rewardTokenAccounts:[h,k],auxiliaryLedgers:r.other},poolKeys:{programId:i,id:new m.PublicKey(n),authority:this.getAssociatedAuthority({programId:i,poolId:new m.PublicKey(n)}).publicKey,lpVault:o.lpVault,rewardInfos:[{rewardVault:o.rewardVaultA},{rewardVault:o.rewardVaultB}]}});b.push(I.innerTransaction)}return{address:{},innerTransactions:await K({connection:e,makeTxVersion:o,computeBudgetConfig:a,payer:t,innerTransaction:[{instructionTypes:y.slice(0,10),instructions:w.slice(0,10),signers:[]},...w.length>10?[{instructionTypes:y.slice(10),instructions:w.slice(10),signers:[]}]:[],...b,{instructionTypes:S,instructions:A,signers:[]}],lookupTableCache:s})}}static async makeDepositTokenInstruction({connection:e,programId:t,governanceProgramId:n,voteWeightAddinProgramId:r,realm:i,communityTokenMint:o,owner:s,poolId:a}){let u=tV(r,i,o).publicKey,c=this.getAssociatedLedgerAccount({programId:t,poolId:a,owner:s,version:3}),d=await e.getAccountInfo(c);if(null===d)throw Error("user is not staker");let f=tP.decode(d.data),p=f.deposited.sub(f.voteLockedBalance);if(p.eq(X))throw Error("user do not has new stake amount");let h=tM(t,a).publicKey,g=tF(t,a).publicKey,{publicKey:w,nonce:y}=tW(r,u,s),b=tr(w,h,l.H_).publicKey,{publicKey:A,nonce:S}=tK(r,u,s),k=tH(n,i,o,s).publicKey,I=[],T=tr(s,h,l.H_).publicKey;if(null===await e.getAccountInfo(T)&&I.push(to.makeCreateAssociatedTokenAccountInstruction({programId:l.H_,mint:h,associatedAccount:T,owner:s,payer:s,instructionsType:[]})),null===await e.getAccountInfo(w)){let e=function(e,t,n,r,i,o){let s=eZ([eV("ins")]),a=[R(t,!1),R(n,!1),B(o,!1),R(r,!1),B(i,!0),R(v,!1)],u=tw.alloc(s.span);return s.encode({ins:23},u),new m.TransactionInstruction({keys:a,programId:e,data:u})}(n,i,s,o,s,k);I.push(e,function(e,t,n,r,i,o,s,a){let u=eZ([eV("voterBump"),eV("voterWeightRecordBump")]),c=[R(t,!1),B(n,!1),R(i,!0),B(r,!1),B(o,!0),R(v,!1),R(P,!1),R(C,!1)],l=tw.alloc(u.span);u.encode({voterBump:s,voterWeightRecordBump:a},l);let d=tw.from([...ty.voterStakeRegistryCreateVoter,...l]);return new m.TransactionInstruction({keys:c,programId:e,data:d})}(r,u,w,A,s,s,y,S))}let{index:E,isInit:L}=await tj(e,u,w,h);return L||I.push(function(e,t,n,r,i,o,s,a,u,c,d,f){let p=eZ([eV("depositEntryIndex"),eV("kind"),eV("option"),eF("startTs"),eM("periods"),eG("allowClawback")]),h=[R(t,!1),B(n,!1),B(r,!1),R(i,!0),B(o,!0),R(s,!1),R(v,!1),R(l.H_,!1),R(l._u,!1),R(P,!1)],g=tw.alloc(p.span);p.encode({depositEntryIndex:a,kind:0,option:void 0===c?0:1,startTs:c??X,periods:0,allowClawback:f},g);let w=tw.from([...ty.voterStakeRegistryCreateDepositEntry,...g]);return new m.TransactionInstruction({keys:h,programId:e,data:w})}(r,u,w,b,s,s,h,E,0,void 0,0,!1)),I.push(function(e,t,n,r,i,o,s,a,u,c,d,f,p){let h=eZ([eV("depositEntryIndex"),eF("amount")]),g=[R(t,!1),B(n,!1),B(r,!1),B(i,!1),R(o,!0),R(l.H_,!1),B(s,!1),R(a,!1),B(u,!1),R(c,!1),R(d,!1),R(C,!1)],w=tw.alloc(h.span);h.encode({depositEntryIndex:f,amount:p},w);let y=tw.from([...ty.voterStakeRegistryDeposit,...w]);return new m.TransactionInstruction({keys:g,programId:e,data:y})}(r,u,w,b,T,s,c,a,h,g,t,E,p),function(e,t,n,r){let i=eZ([]),o=[R(t,!1),R(n,!1),B(r,!1),R(v,!1)],s=tw.alloc(i.span);i.encode({},s);let a=tw.from([...ty.voterStakeRegistryUpdateVoterWeightRecord,...s]);return new m.TransactionInstruction({keys:o,programId:e,data:a})}(r,u,w,A)),{address:{},innerTransaction:{instructions:I,signers:[],lookupTableAddress:[],instructionTypes:Array(I.length).fill(ne.test)}}}static async makeWithdrawTokenInstruction({connection:e,programId:t,governanceProgramId:n,voteWeightAddinProgramId:r,realm:i,communityTokenMint:o,owner:s,poolId:a}){let u=tV(r,i,o).publicKey,c=this.getAssociatedLedgerAccount({programId:t,poolId:a,owner:s,version:3}),d=await e.getAccountInfo(c);if(null===d)throw Error("user is not staker");let f=tP.decode(d.data);if(f.voteLockedBalance.eq(X))throw Error("user has vote locked balance = 0");let p=tM(t,a).publicKey,h=tF(t,a).publicKey,{publicKey:g}=tW(r,u,s),w=tr(g,p,l.H_).publicKey,{publicKey:y}=tK(r,u,s),b=tH(n,i,o,s).publicKey,A=[],{index:S,isInit:k}=await tj(e,u,g,p);if(!k)throw Error("deposit entry index check error");return A.push(function(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g){let w=eZ([eV("depositEntryIndex"),eF("amount")]),y=[R(t,!1),B(n,!1),R(r,!0),R(i,!1),B(o,!1),B(s,!1),B(a,!1),R(l.H_,!1),B(u,!1),R(c,!1),B(d,!1),R(f,!1),R(p,!1),R(C,!1)],b=tw.alloc(w.span);w.encode({depositEntryIndex:h,amount:g},b);let A=tw.from([...ty.voterStakeRegistryWithdraw,...b]);return new m.TransactionInstruction({keys:y,programId:e,data:A})}(r,u,g,s,b,y,w,tr(s,p,l.H_).publicKey,c,a,p,h,t,S,f.voteLockedBalance)),{address:{},innerTransaction:{instructions:A,signers:[],lookupTableAddress:[],instructionTypes:Array(A.length).fill(ne.test)}}}}async function tj(e,t,n,r){let i=await e.getAccountInfo(t);if(null===i)throw Error("registrar info check error");let o=tU.decode(i.data).votingMints.findIndex(e=>e.mint.equals(r));if(-1===o)throw Error("find voter mint error");let s=await e.getAccountInfo(n);if(null===s)return{index:o,isInit:!1};let a=tq.decode(s.data).deposits.findIndex(e=>e.isUsed&&e.votingMintConfigIdx===o);return -1===a?{index:o,isInit:!1}:{index:a,isInit:!0}}er.RAY_USDT_V4,en.RAY,er.xCOPE_USDC_V4,er.STEP_USDC_V4,er.MEDIA_USDC_V4,er.COPE_USDC_V4,er.MER_USDC_V4,er.ROPE_USDC_V4,er.ALEPH_USDC_V4,er.TULIP_USDC_V4,er.SNY_USDC_V4,er.BOP_RAY_V4,er.SLRS_USDC_V4,er.SAMO_RAY_V4,er.LIKE_USDC_V4,er.RAY_SOL_V4,er.RAY_USDC_V4,er.RAY_ETH_V4,er.RAY_SRM_V4,er.MNGO_USDC_V4,er.COPE_RAY_V4,er.LIKE_RAY_V4,er.MEDIA_RAY_V4,er.MER_RAY_V4,er.SLRS_RAY_V4,er.SNY_RAY_V4,er.TULIP_RAY_V4,er.ALEPH_RAY_V4,er.RAY_SRM_V4,er.ATLAS_USDC_V4,er.POLIS_USDC_V4,er.ATLAS_RAY_V4,er.POLIS_RAY_V4,er.GRAPE_USDC_V4,er.LARIX_USDC_V4,er.LARIX_RAY_V4,er.stSOL_USDC_V4,er.BTC_mSOL_V4,er.ETH_mSOL_V4,er.mSOL_USDT_V4,er.MNDE_mSOL_V4,er.mSOL_USDC_V4,er.mSOL_RAY_V4,er.LIQ_USDC_V4,er.LIQ_RAY_V4,er.SYP_RAY_V4,er.SYP_SOL_V4,er.SYP_USDC_V4,er.WOOF_RAY_V4,er.KIN_RAY_V4,er.STARS_USDC_V4,er.weWETH_SOL_V4,er.weWETH_USDC_V4,er.weUNI_USDC_V4,er.weSUSHI_USDC_V4,er.weAXS_USDC_V4,er.weDYDX_USDC_V4,er.weSHIB_USDC_V4,er.weSAND_USDC_V4,er.weMANA_USDC_V4,er.wbWBNB_USDC_V4,er.wePEOPLE_USDC_V4,er.SRM_USDC_V4,er.CAVE_USDC_V4,er.GENE_USDC_V4,er.GENE_RAY_V4,er.CWAR_USDC_V4,er.SONAR_USDC_V4,er.APT_USDC_V4,er.SHILL_USDC_V4,er.DFL_USDC_V4,er.BOKU_USDC_V4,er.MIMO_SOL_V4,er.XTAG_USDC_V4,er.TTT_USDC_V4,er.SOL_USDC_V4,er.SOL_USDT_V4,er.RUN_USDC_V4,er.CRWNY_RAY_V4,er.CRWNY_USDC_V4,er.REAL_USDC_V4,er.BLOCK_USDC_V4,er.FRKT_SOL_V4,er.FRKT_USDC_V4,er.MBS_USDC_V4,er.PRISM_USDC_V4,er.CHICKS_USDC_V4,er.MEAN_RAY_V4,er.TINY_USDC_V4,er.SCY_USDC_V4;let tZ=eZ([eF("status"),eF("nonce"),eF("maxOrder"),eF("depth"),eF("baseDecimal"),eF("quoteDecimal"),eF("state"),eF("resetFlag"),eF("minSize"),eF("volMaxCutRatio"),eF("amountWaveRatio"),eF("baseLotSize"),eF("quoteLotSize"),eF("minPriceMultiplier"),eF("maxPriceMultiplier"),eF("systemDecimalValue"),eF("minSeparateNumerator"),eF("minSeparateDenominator"),eF("tradeFeeNumerator"),eF("tradeFeeDenominator"),eF("pnlNumerator"),eF("pnlDenominator"),eF("swapFeeNumerator"),eF("swapFeeDenominator"),eF("baseNeedTakePnl"),eF("quoteNeedTakePnl"),eF("quoteTotalPnl"),eF("baseTotalPnl"),eF("poolOpenTime"),eF("punishPcAmount"),eF("punishCoinAmount"),eF("orderbookToInitTime"),eW("swapBaseInAmount"),eW("swapQuoteOutAmount"),eF("swapBase2QuoteFee"),eW("swapQuoteInAmount"),eW("swapBaseOutAmount"),eF("swapQuote2BaseFee"),eY("baseVault"),eY("quoteVault"),eY("baseMint"),eY("quoteMint"),eY("lpMint"),eY("openOrders"),eY("marketId"),eY("marketProgramId"),eY("targetOrders"),eY("withdrawQueue"),eY("lpVault"),eY("owner"),eF("lpReserve"),eQ(eF(),3,"padding")]),tQ={4:tZ,5:eZ([eF("accountType"),eF("status"),eF("nonce"),eF("maxOrder"),eF("depth"),eF("baseDecimal"),eF("quoteDecimal"),eF("state"),eF("resetFlag"),eF("minSize"),eF("volMaxCutRatio"),eF("amountWaveRatio"),eF("baseLotSize"),eF("quoteLotSize"),eF("minPriceMultiplier"),eF("maxPriceMultiplier"),eF("systemDecimalsValue"),eF("abortTradeFactor"),eF("priceTickMultiplier"),eF("priceTick"),eF("minSeparateNumerator"),eF("minSeparateDenominator"),eF("tradeFeeNumerator"),eF("tradeFeeDenominator"),eF("pnlNumerator"),eF("pnlDenominator"),eF("swapFeeNumerator"),eF("swapFeeDenominator"),eF("baseNeedTakePnl"),eF("quoteNeedTakePnl"),eF("quoteTotalPnl"),eF("baseTotalPnl"),eF("poolOpenTime"),eF("punishPcAmount"),eF("punishCoinAmount"),eF("orderbookToInitTime"),eW("swapBaseInAmount"),eW("swapQuoteOutAmount"),eW("swapQuoteInAmount"),eW("swapBaseOutAmount"),eF("swapQuote2BaseFee"),eF("swapBase2QuoteFee"),eY("baseVault"),eY("quoteVault"),eY("baseMint"),eY("quoteMint"),eY("lpMint"),eY("modelDataAccount"),eY("openOrders"),eY("marketId"),eY("marketProgramId"),eY("targetOrders"),eY("owner"),eQ(eF(),64,"padding")])};/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var tJ,t$,t0,t1,t4,t2,t6,t3,t5,t8,t9,t7,ne,nt,nn,nr,ni="0123456789abcdef",no="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ns="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",na={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:9e15,crypto:!1},nu=!0,nc="[DecimalError] ",nl=nc+"Invalid argument: ",nd=nc+"Precision limit exceeded",nm=nc+"crypto unavailable",nf="[object Decimal]",np=Math.floor,nh=Math.pow,ng=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,nw=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ny=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,nb=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nA=no.length-1,nS=ns.length-1,nk={toStringTag:nf};function nI(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=nU(n)),o+=r;(n=7-(r=(s=e[t])+"").length)&&(o+=nU(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}function nT(e,t,n){if(e!==~~e||e<t||e>n)throw Error(nl+e)}function nv(e,t,n,r){var i,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),o=nh(10,7-t),a=e[i]%o|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),s=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[i+1]/o/100|0)==nh(10,t-2)-1||(a==o/2||0==a)&&(e[i+1]/o/100|0)==0:t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),s=(r||n<4)&&9999==a||!r&&n>3&&4999==a):s=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==nh(10,t-3)-1,s}function nE(e,t,n){for(var r,i,o=[0],s=0,a=e.length;s<a;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=ni.indexOf(e.charAt(s++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}nk.absoluteValue=nk.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),nL(e)},nk.ceil=function(){return nL(new this.constructor(this),this.e+1,2)},nk.clampedTo=nk.clamp=function(e,t){var n=this.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(nl+t);return 0>this.cmp(e)?e:this.cmp(t)>0?t:new n(this)},nk.comparedTo=nk.cmp=function(e){var t,n,r,i,o=this.d,s=(e=new this.constructor(e)).d,a=this.s,u=e.s;if(!o||!s)return a&&u?a!==u?a:o===s?0:!o^a<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?a:s[0]?-u:0;if(a!==u)return a;if(this.e!==e.e)return this.e>e.e^a<0?1:-1;for(t=0,n=(r=o.length)<(i=s.length)?r:i;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^a<0?1:-1;return r===i?0:r>i^a<0?1:-1},nk.cosine=nk.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;(r=t.d.length)<32?i=(1/nK(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=nW(e,1,t.times(i),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(r,nH(r,n)),r.precision=e,r.rounding=t,nL(2==nr||3==nr?n.neg():n,e,t,!0)):new r(1):new r(NaN)},nk.cubeRoot=nk.cbrt=function(){var e,t,n,r,i,o,s,a,u,c,l=this.constructor;if(!this.isFinite()||this.isZero())return new l(this);for(nu=!1,(o=this.s*nh(this.s*this,1/3))&&Math.abs(o)!=1/0?r=new l(o.toString()):(n=nI(this.d),(o=((e=this.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=nh(n,1/3),e=np((e+1)/3)-(e%3==(e<0?-1:2)),(r=new l(n=o==1/0?"5e"+e:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=this.s),s=(e=l.precision)+3;;)if(r=nP((c=(u=(a=r).times(a).times(a)).plus(this)).plus(this).times(a),c.plus(u),s+2,1),nI(a.d).slice(0,s)===(n=nI(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(nL(r,e+1,1),t=!r.times(r).times(r).eq(this));break}if(!i&&(nL(a,e+1,0),a.times(a).times(a).eq(this))){r=a;break}s+=4,i=1}return nu=!0,nL(r,e,l.rounding,t)},nk.decimalPlaces=nk.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-np(this.e/7))*7,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},nk.dividedBy=nk.div=function(e){return nP(this,new this.constructor(e))},nk.dividedToIntegerBy=nk.divToInt=function(e){var t=this.constructor;return nL(nP(this,new t(e),0,1,1),t.precision,t.rounding)},nk.equals=nk.eq=function(e){return 0===this.cmp(e)},nk.floor=function(){return nL(new this.constructor(this),this.e+1,3)},nk.greaterThan=nk.gt=function(e){return this.cmp(e)>0},nk.greaterThanOrEqualTo=nk.gte=function(e){var t=this.cmp(e);return 1==t||0===t},nk.hyperbolicCosine=nk.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,(i=o.d.length)<32?t=(1/nK(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),o=nW(s,1,o.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;)u=o.times(o),o=a.minus(u.times(l.minus(u.times(l))));return nL(o,s.precision=n,s.rounding=r,!0)},nk.hyperbolicSine=nk.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=nW(o,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=nW(o,2,i=i.times(1/nK(5,e)),i,!0);for(var s,a=new o(5),u=new o(16),c=new o(20);e--;)s=i.times(i),i=i.times(a.plus(s.times(u.times(s).plus(c))))}return o.precision=t,o.rounding=n,nL(i,t,n,!0)},nk.hyperbolicTangent=nk.tanh=function(){var e,t,n=this.constructor;return this.isFinite()?this.isZero()?new n(this):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,nP(this.sinh(),this.cosh(),n.precision=e,n.rounding=t)):new n(this.s)},nk.inverseCosine=nk.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return -1!==r?0===r?t.isNeg()?nB(n,i,o):new n(0):new n(NaN):t.isZero()?nB(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=nB(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},nk.inverseHyperbolicCosine=nk.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,nu=!1,n=n.times(n).minus(1).sqrt().plus(n),nu=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},nk.inverseHyperbolicSine=nk.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,nu=!1,n=n.times(n).plus(1).sqrt().plus(n),nu=!0,r.precision=e,r.rounding=t,n.ln())},nk.inverseHyperbolicTangent=nk.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,Math.max(r=i.sd(),e)<-(2*i.e)-1)?nL(new o(i),e,t,!0):(o.precision=n=r-i.e,i=nP(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5)):new o(NaN)},nk.inverseSine=nk.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t)?0===t?((e=nB(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2))},nk.inverseTangent=nk.atan=function(){var e,t,n,r,i,o,s,a,u,c=this,l=c.constructor,d=l.precision,m=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&d+4<=nS)return(s=nB(l,d+4,m).times(.25)).s=c.s,s}else{if(!c.s)return new l(NaN);if(d+4<=nS)return(s=nB(l,d+4,m).times(.5)).s=c.s,s}for(l.precision=a=d+10,l.rounding=1,e=n=Math.min(28,a/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(nu=!1,t=Math.ceil(a/7),r=1,u=c.times(c),s=new l(c),i=c;-1!==e;)if(i=i.times(u),o=s.minus(i.div(r+=2)),i=i.times(u),void 0!==(s=o.plus(i.div(r+=2))).d[t])for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),nu=!0,nL(s,l.precision=d,l.rounding=m,!0)},nk.isFinite=function(){return!!this.d},nk.isInteger=nk.isInt=function(){return!!this.d&&np(this.e/7)>this.d.length-2},nk.isNaN=function(){return!this.s},nk.isNegative=nk.isNeg=function(){return this.s<0},nk.isPositive=nk.isPos=function(){return this.s>0},nk.isZero=function(){return!!this.d&&0===this.d[0]},nk.lessThan=nk.lt=function(e){return 0>this.cmp(e)},nk.lessThanOrEqualTo=nk.lte=function(e){return 1>this.cmp(e)},nk.logarithm=nk.log=function(e){var t,n,r,i,o,s,a,u=this.constructor,c=u.precision,l=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new u(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t){if(n.length>1)i=!0;else{for(r=n[0];r%10==0;)r/=10;i=1!==r}}if(nu=!1,nv((a=nP(nV(this,s=c+5),t?nx(u,s+10):nV(e,s),s,1)).d,r=c,l))do if(s+=10,a=nP(nV(this,s),t?nx(u,s+10):nV(e,s),s,1),!i){+nI(a.d).slice(r+1,r+15)+1==1e14&&(a=nL(a,c+1,0));break}while(nv(a.d,r+=10,l));return nu=!0,nL(a,c,l)},nk.minus=nk.sub=function(e){var t,n,r,i,o,s,a,u,c,l,d,m,f=this.constructor;if(e=new f(e),!this.d||!e.d)return this.s&&e.s?this.d?e.s=-e.s:e=new f(e.d||this.s!==e.s?this:NaN):e=new f(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.plus(e);if(c=this.d,m=e.d,a=f.precision,u=f.rounding,!c[0]||!m[0]){if(m[0])e.s=-e.s;else{if(!c[0])return new f(3===u?-0:0);e=new f(this)}return nu?nL(e,a,u):e}if(n=np(e.e/7),l=np(this.e/7),c=c.slice(),o=l-n){for((d=o<0)?(t=c,o=-o,s=m.length):(t=m,n=l,s=c.length),o>(r=Math.max(Math.ceil(a/7),s)+2)&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((d=(r=c.length)<(s=m.length))&&(s=r),r=0;r<s;r++)if(c[r]!=m[r]){d=c[r]<m[r];break}o=0}for(d&&(t=c,c=m,m=t,e.s=-e.s),s=c.length,r=m.length-s;r>0;--r)c[s++]=0;for(r=m.length;r>o;){if(c[--r]<m[r]){for(i=r;i&&0===c[--i];)c[i]=1e7-1;--c[i],c[r]+=1e7}c[r]-=m[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=nO(c,n),nu?nL(e,a,u):e):new f(3===u?-0:0)},nk.modulo=nk.mod=function(e){var t,n=this.constructor;return(e=new n(e),this.d&&e.s&&(!e.d||e.d[0]))?e.d&&(!this.d||this.d[0])?(nu=!1,9==n.modulo?(t=nP(this,e.abs(),0,3,1),t.s*=e.s):t=nP(this,e,0,n.modulo,1),t=t.times(e),nu=!0,this.minus(t)):nL(new n(this),n.precision,n.rounding):new n(NaN)},nk.naturalExponential=nk.exp=function(){return nN(this)},nk.naturalLogarithm=nk.ln=function(){return nV(this)},nk.negated=nk.neg=function(){var e=new this.constructor(this);return e.s=-e.s,nL(e)},nk.plus=nk.add=function(e){var t,n,r,i,o,s,a,u,c,l,d=this.constructor;if(e=new d(e),!this.d||!e.d)return this.s&&e.s?this.d||(e=new d(e.d||this.s===e.s?this:NaN)):e=new d(NaN),e;if(this.s!=e.s)return e.s=-e.s,this.minus(e);if(c=this.d,l=e.d,a=d.precision,u=d.rounding,!c[0]||!l[0])return l[0]||(e=new d(this)),nu?nL(e,a,u):e;if(o=np(this.e/7),r=np(e.e/7),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,s=l.length):(n=l,r=o,s=c.length),i>(s=(o=Math.ceil(a/7))>s?o+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=l.length)<0&&(i=s,n=l,l=c,c=n),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/1e7|0,c[i]%=1e7;for(t&&(c.unshift(t),++r),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=nO(c,r),nu?nL(e,a,u):e},nk.precision=nk.sd=function(e){var t;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(nl+e);return this.d?(t=nR(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},nk.round=function(){var e=this.constructor;return nL(new e(this),this.e+1,e.rounding)},nk.sine=nk.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:nW(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=nW(e,2,t=t.times(1/nK(5,n)),t);for(var i,o=new e(5),s=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(a))));return t}(r,nH(r,n)),r.precision=e,r.rounding=t,nL(nr>2?n.neg():n,e,t,!0)):new r(NaN)},nk.squareRoot=nk.sqrt=function(){var e,t,n,r,i,o,s=this.d,a=this.e,u=this.s,c=this.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?this:1/0);for(nu=!1,0==(u=Math.sqrt(+this))||u==1/0?(((t=nI(s)).length+a)%2==0&&(t+="0"),u=Math.sqrt(t),a=np((a+1)/2)-(a<0||a%2),r=new c(t=u==1/0?"5e"+a:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new c(u.toString()),n=(a=c.precision)+3;;)if(r=(o=r).plus(nP(this,o,n+2,1)).times(.5),nI(o.d).slice(0,n)===(t=nI(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(nL(r,a+1,1),e=!r.times(r).eq(this));break}if(!i&&(nL(o,a+1,0),o.times(o).eq(this))){r=o;break}n+=4,i=1}return nu=!0,nL(r,a,c.rounding,e)},nk.tangent=nk.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=nP(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,nL(2==nr||4==nr?n.neg():n,e,t,!0)):new r(NaN)},nk.times=nk.mul=function(e){var t,n,r,i,o,s,a,u,c,l=this.constructor,d=this.d,m=(e=new l(e)).d;if(e.s*=this.s,!d||!d[0]||!m||!m[0])return new l(e.s&&(!d||d[0]||m)&&(!m||m[0]||d)?d&&m?0*e.s:e.s/0:NaN);for(n=np(this.e/7)+np(e.e/7),(u=d.length)<(c=m.length)&&(o=d,d=m,m=o,s=u,u=c,c=s),o=[],r=s=u+c;r--;)o.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)a=o[i]+m[r]*d[i-r-1]+t,o[i--]=a%1e7|0,t=a/1e7|0;o[i]=(o[i]+t)%1e7|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=nO(o,n),nu?nL(e,l.precision,l.rounding):e},nk.toBinary=function(e,t){return nY(this,2,e,t)},nk.toDecimalPlaces=nk.toDP=function(e,t){var n=this,r=n.constructor;return(n=new r(n),void 0===e)?n:(nT(e,0,1e9),void 0===t?t=r.rounding:nT(t,0,8),nL(n,e+n.e+1,t))},nk.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=nC(r,!0):(nT(e,0,1e9),void 0===t?t=i.rounding:nT(t,0,8),n=nC(r=nL(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},nk.toFixed=function(e,t){var n,r,i=this.constructor;return void 0===e?n=nC(this):(nT(e,0,1e9),void 0===t?t=i.rounding:nT(t,0,8),n=nC(r=nL(new i(this),e+this.e+1,t),!1,e+r.e+1)),this.isNeg()&&!this.isZero()?"-"+n:n},nk.toFraction=function(e){var t,n,r,i,o,s,a,u,c,l,d,m,f=this.d,p=this.constructor;if(!f)return new p(this);if(c=n=new p(1),r=u=new p(0),s=(o=(t=new p(r)).e=nR(f)-this.e-1)%7,t.d[0]=nh(10,s<0?7+s:s),null==e)e=o>0?t:c;else{if(!(a=new p(e)).isInt()||a.lt(c))throw Error(nl+a);e=a.gt(t)?o>0?t:c:a}for(nu=!1,a=new p(nI(f)),l=p.precision,p.precision=o=14*f.length;d=nP(a,t,0,1,1),1!=(i=n.plus(d.times(r))).cmp(e);)n=r,r=i,i=c,c=u.plus(d.times(i)),u=i,i=t,t=a.minus(d.times(i)),a=i;return i=nP(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=this.s,m=1>nP(c,r,o,1).minus(this).abs().cmp(nP(u,n,o,1).minus(this).abs())?[c,r]:[u,n],p.precision=l,nu=!0,m},nk.toHexadecimal=nk.toHex=function(e,t){return nY(this,16,e,t)},nk.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:nT(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(nu=!1,n=nP(n,e,0,t,1).times(e),nu=!0,nL(n)):(e.s=n.s,n=e),n},nk.toNumber=function(){return+this},nk.toOctal=function(e,t){return nY(this,8,e,t)},nk.toPower=nk.pow=function(e){var t,n,r,i,o,s,a=this,u=a.constructor,c=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(nh(+a,c));if((a=new u(a)).eq(1))return a;if(r=u.precision,o=u.rounding,e.eq(1))return nL(a,r,o);if((t=np(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=nD(u,a,n,r),e.s<0?new u(1).div(i):nL(i,r,o);if((s=a.s)<0){if(t<e.d.length-1)return new u(NaN);if((1&e.d[t])==0&&(s=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=s,a}return(t=0!=(n=nh(+a,c))&&isFinite(n)?new u(n+"").e:np(c*(Math.log("0."+nI(a.d))/Math.LN10+a.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(nu=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),(i=nN(e.times(nV(a,r+n)),r)).d&&nv((i=nL(i,r+5,1)).d,r,o)&&(t=r+10,+nI((i=nL(nN(e.times(nV(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=nL(i,r+1,0))),i.s=s,nu=!0,u.rounding=o,nL(i,r,o))},nk.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=nC(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(nT(e,1,1e9),void 0===t?t=i.rounding:nT(t,0,8),n=nC(r=nL(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},nk.toSignificantDigits=nk.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(nT(e,1,1e9),void 0===t?t=n.rounding:nT(t,0,8)),nL(new n(this),e,t)},nk.toString=function(){var e=this.constructor,t=nC(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()&&!this.isZero()?"-"+t:t},nk.truncated=nk.trunc=function(){return nL(new this.constructor(this),this.e+1,1)},nk.valueOf=nk.toJSON=function(){var e=this.constructor,t=nC(this,this.e<=e.toExpNeg||this.e>=e.toExpPos);return this.isNeg()?"-"+t:t};var nP=function(){function e(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,s,a,u){var c,l,d,m,f,p,h,g,w,y,b,A,S,k,I,T,v,E,P,L,C=r.constructor,O=r.s==i.s?1:-1,x=r.d,B=i.d;if(!x||!x[0]||!B||!B[0])return new C(r.s&&i.s&&(x?!B||x[0]!=B[0]:B)?x&&0==x[0]||!B?0*O:O/0:NaN);for(u?(f=1,l=r.e-i.e):(u=1e7,f=7,l=np(r.e/f)-np(i.e/f)),P=B.length,v=x.length,y=(w=new C(O)).d=[],d=0;B[d]==(x[d]||0);d++);if(B[d]>(x[d]||0)&&l--,null==o?(k=o=C.precision,s=C.rounding):k=a?o+(r.e-i.e)+1:o,k<0)y.push(1),p=!0;else{if(k=k/f+2|0,d=0,1==P){for(m=0,B=B[0],k++;(d<v||m)&&k--;d++)I=m*u+(x[d]||0),y[d]=I/B|0,m=I%B|0;p=m||d<v}else{for((m=u/(B[0]+1)|0)>1&&(B=e(B,m,u),x=e(x,m,u),P=B.length,v=x.length),T=P,A=(b=x.slice(0,P)).length;A<P;)b[A++]=0;(L=B.slice()).unshift(0),E=B[0],B[1]>=u/2&&++E;do m=0,(c=t(B,b,P,A))<0?(S=b[0],P!=A&&(S=S*u+(b[1]||0)),(m=S/E|0)>1?(m>=u&&(m=u-1),g=(h=e(B,m,u)).length,A=b.length,1==(c=t(h,b,g,A))&&(m--,n(h,P<g?L:B,g,u))):(0==m&&(c=m=1),h=B.slice()),(g=h.length)<A&&h.unshift(0),n(b,h,A,u),-1==c&&(A=b.length,(c=t(B,b,P,A))<1&&(m++,n(b,P<A?L:B,A,u))),A=b.length):0===c&&(m++,b=[0]),y[d++]=m,c&&b[0]?b[A++]=x[T]||0:(b=[x[T]],A=1);while((T++<v||void 0!==b[0])&&k--);p=void 0!==b[0]}y[0]||y.shift()}if(1==f)w.e=l,nn=p;else{for(d=1,m=y[0];m>=10;m/=10)d++;w.e=d+l*f-1,nL(w,a?o+w.e+1:o,s,p)}return w}}();function nL(e,t,n,r){var i,o,s,a,u,c,l,d,m,f=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(i=1,a=d[0];a>=10;a/=10)i++;if((o=t-i)<0)o+=7,s=t,u=(l=d[m=0])/nh(10,i-s-1)%10|0;else if((m=Math.ceil((o+1)/7))>=(a=d.length)){if(r){for(;a++<=m;)d.push(0);l=u=0,i=1,o%=7,s=o-7+1}else break e}else{for(i=1,l=a=d[m];a>=10;a/=10)i++;o%=7,u=(s=o-7+i)<0?0:l/nh(10,i-s-1)%10|0}if(r=r||t<0||void 0!==d[m+1]||(s<0?l:l%nh(10,i-s-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(o>0?s>0?l/nh(10,i-s):0:d[m-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,c?(t-=e.e+1,d[0]=nh(10,(7-t%7)%7),e.e=-t||0):d[0]=e.e=0,e;if(0==o?(d.length=m,a=1,m--):(d.length=m+1,a=nh(10,7-o),d[m]=s>0?(l/nh(10,i-s)%nh(10,s)|0)*a:0),c)for(;;){if(0==m){for(o=1,s=d[0];s>=10;s/=10)o++;for(s=d[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,1e7==d[0]&&(d[0]=1));break}if(d[m]+=a,1e7!=d[m])break;d[m--]=0,a=1}for(o=d.length;0===d[--o];)d.pop()}return nu&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function nC(e,t,n){if(!e.isFinite())return nM(e);var r,i=e.e,o=nI(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+nU(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+nU(-i-1)+o,n&&(r=n-s)>0&&(o+=nU(r))):i>=s?(o+=nU(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+nU(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=nU(r))),o}function nO(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function nx(e,t,n){if(t>nA)throw nu=!0,n&&(e.precision=n),Error(nd);return nL(new e(no),t,1,!0)}function nB(e,t,n){if(t>nS)throw Error(nd);return nL(new e(ns),t,n,!0)}function nR(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function nU(e){for(var t="";e--;)t+="0";return t}function nD(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/7+4);for(nu=!1;;){if(n%2&&nG((o=o.times(t)).d,s)&&(i=!0),0===(n=np(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}nG((t=t.times(t)).d,s)}return nu=!0,o}function n_(e){return 1&e.d[e.d.length-1]}function nq(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;)if((r=new e(t[o])).s)i[n](r)&&(i=r);else{i=r;break}return i}function nN(e,t){var n,r,i,o,s,a,u,c=0,l=0,d=0,m=e.constructor,f=m.rounding,p=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(null==t?(nu=!1,u=p):u=t,a=new m(.03125);e.e>-2;)e=e.times(a),d+=5;for(u+=r=Math.log(nh(2,d))/Math.LN10*2+5|0,n=o=s=new m(1),m.precision=u;;){if(o=nL(o.times(e),u,1),n=n.times(++l),nI((a=s.plus(nP(o,n,u,1))).d).slice(0,u)===nI(s.d).slice(0,u)){for(i=d;i--;)s=nL(s.times(s),u,1);if(null!=t)return m.precision=p,s;if(!(c<3&&nv(s.d,u-r,f,c)))return nL(s,m.precision=p,f,nu=!0);m.precision=u+=10,n=o=a=new m(1),l=0,c++}s=a}}function nV(e,t){var n,r,i,o,s,a,u,c,l,d,m,f=1,p=e,h=p.d,g=p.constructor,w=g.rounding,y=g.precision;if(p.s<0||!h||!h[0]||!p.e&&1==h[0]&&1==h.length)return new g(h&&!h[0]?-1/0:1!=p.s?NaN:h?0:p);if(null==t?(nu=!1,l=y):l=t,g.precision=l+=10,r=(n=nI(h)).charAt(0),!(15e14>Math.abs(o=p.e)))return c=nx(g,l+2,y).times(o+""),p=nV(new g(r+"."+n.slice(1)),l-10).plus(c),g.precision=y,null==t?nL(p,y,w,nu=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=nI((p=p.times(e)).d)).charAt(0),f++;for(o=p.e,r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1)),d=p,u=s=p=nP(p.minus(1),p.plus(1),l,1),m=nL(p.times(p),l,1),i=3;;){if(s=nL(s.times(m),l,1),nI((c=u.plus(nP(s,new g(i),l,1))).d).slice(0,l)===nI(u.d).slice(0,l)){if(u=u.times(2),0!==o&&(u=u.plus(nx(g,l+2,y).times(o+""))),u=nP(u,new g(f),l,1),null!=t)return g.precision=y,u;if(!nv(u.d,l-10,w,a))return nL(u,g.precision=y,w,nu=!0);g.precision=l+=10,c=s=p=nP(d.minus(1),d.plus(1),l,1),m=nL(p.times(p),l,1),i=a=1}u=c,i+=2}}function nM(e){return String(e.s*e.s/0)}function nF(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),nu&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function nW(e,t,n,r,i){var o,s,a,u,c=e.precision,l=Math.ceil(c/7);for(nu=!1,u=n.times(n),a=new e(r);;){if(s=nP(a.times(u),new e(t++*t++),c,1),a=i?r.plus(s):r.minus(s),r=nP(s.times(u),new e(t++*t++),c,1),void 0!==(s=a.plus(r)).d[l]){for(o=l;s.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=r,r=s,s=o}return nu=!0,s.d.length=l+1,s}function nK(e,t){for(var n=e;--t;)n*=e;return n}function nH(e,t){var n,r=t.s<0,i=nB(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return nr=r?4:1,t;if((n=t.divToInt(i)).isZero())nr=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return nr=n_(n)?r?2:3:r?4:1,t;nr=n_(n)?r?1:4:r?3:2}return t.minus(i).abs()}function nY(e,t,n,r){var i,o,s,a,u,c,l,d,m,f=e.constructor,p=void 0!==n;if(p?(nT(n,1,1e9),void 0===r?r=f.rounding:nT(r,0,8)):(n=f.precision,r=f.rounding),e.isFinite()){for(s=(l=nC(e)).indexOf("."),p?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,s>=0&&(l=l.replace(".",""),(m=new f(1)).e=l.length-s,m.d=nE(nC(m),10,i),m.e=m.d.length),o=u=(d=nE(l,10,i)).length;0==d[--u];)d.pop();if(d[0]){if(s<0?o--:((e=new f(e)).d=d,e.e=o,d=(e=nP(e,m,n,r,0,i)).d,o=e.e,c=nn),s=d[n],a=i/2,c=c||void 0!==d[n+1],c=r<4?(void 0!==s||c)&&(0===r||r===(e.s<0?3:2)):s>a||s===a&&(4===r||c||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,c)for(;++d[--n]>i-1;)d[n]=0,n||(++o,d.unshift(1));for(u=d.length;!d[u-1];--u);for(s=0,l="";s<u;s++)l+=ni.charAt(d[s]);if(p){if(u>1){if(16==t||8==t){for(s=16==t?4:3,--u;u%s;u++)l+="0";for(u=(d=nE(l,i,t)).length;!d[u-1];--u);for(s=1,l="1.";s<u;s++)l+=ni.charAt(d[s])}else l=l.charAt(0)+"."+l.slice(1)}l=l+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)l="0"+l;l="0."+l}else if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o))}else l=p?"0p+0":"0";l=(16==t?"0x":2==t?"0b":8==t?"0o":"")+l}else l=nM(e);return e.s<0?"-"+l:l}function nG(e,t){if(e.length>t)return e.length=t,!0}function nX(e){return new this(e).abs()}function nz(e){return new this(e).acos()}function nj(e){return new this(e).acosh()}function nZ(e,t){return new this(e).plus(t)}function nQ(e){return new this(e).asin()}function nJ(e){return new this(e).asinh()}function n$(e){return new this(e).atan()}function n0(e){return new this(e).atanh()}function n1(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?nB(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=nB(this,o,1).times(.5)).s=e.s:t.s<0?(this.precision=o,this.rounding=1,n=this.atan(nP(e,t,o,1)),t=nB(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(nP(e,t,o,1)):(n=nB(this,o,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function n4(e){return new this(e).cbrt()}function n2(e){return nL(e=new this(e),e.e+1,2)}function n6(e,t,n){return new this(e).clamp(t,n)}function n3(e){if(!e||"object"!=typeof e)throw Error(nc+"Object expected");var t,n,r,i=!0===e.defaults,o=["precision",1,1e9,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,9e15,"maxE",0,9e15,"minE",-9e15,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=na[n]),void 0!==(r=e[n])){if(np(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(nl+n+": "+r)}if(n="crypto",i&&(this[n]=na[n]),void 0!==(r=e[n])){if(!0===r||!1===r||0===r||1===r){if(r){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(nm)}else this[n]=!1}else throw Error(nl+n+": "+r)}return this}function n5(e){return new this(e).cos()}function n8(e){return new this(e).cosh()}function n9(e,t){return new this(e).div(t)}function n7(e){return new this(e).exp()}function re(e){return nL(e=new this(e),e.e+1,3)}function rt(){var e,t,n=new this(0);for(e=0,nu=!1;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return nu=!0,new this(1/0);n=t}return nu=!0,n.sqrt()}function rn(e){return e instanceof rI||e&&e.toStringTag===nf||!1}function rr(e){return new this(e).ln()}function ri(e,t){return new this(e).log(t)}function ro(e){return new this(e).log(2)}function rs(e){return new this(e).log(10)}function ra(){return nq(this,arguments,"lt")}function ru(){return nq(this,arguments,"gt")}function rc(e,t){return new this(e).mod(t)}function rl(e,t){return new this(e).mul(t)}function rd(e,t){return new this(e).pow(t)}function rm(e){var t,n,r,i,o=0,s=new this(1),a=[];if(void 0===e?e=this.precision:nT(e,1,1e9),r=Math.ceil(e/7),this.crypto){if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=t[o])>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)(i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((127&t[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else throw Error(nm)}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(r=a[--o],e%=7,r&&e&&(i=nh(10,7-e),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return s.e=n,s.d=a,s}function rf(e){return nL(e=new this(e),e.e+1,this.rounding)}function rp(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function rh(e){return new this(e).sin()}function rg(e){return new this(e).sinh()}function rw(e){return new this(e).sqrt()}function ry(e,t){return new this(e).sub(t)}function rb(){var e=0,t=arguments,n=new this(t[e]);for(nu=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return nu=!0,nL(n,this.precision,this.rounding)}function rA(e){return new this(e).tan()}function rS(e){return new this(e).tanh()}function rk(e){return nL(e=new this(e),e.e+1,1)}nk[Symbol.for("nodejs.util.inspect.custom")]=nk.toString,nk[Symbol.toStringTag]="Decimal";var rI=nk.constructor=function e(t){var n,r,i;function o(e){var t,n,r;if(!(this instanceof o))return new o(e);if(this.constructor=o,rn(e)){this.s=e.s,nu?!e.d||e.e>o.maxE?(this.e=NaN,this.d=null):e.e<o.minE?(this.e=0,this.d=[0]):(this.e=e.e,this.d=e.d.slice()):(this.e=e.e,this.d=e.d?e.d.slice():e.d);return}if("number"==(r=typeof e)){if(0===e){this.s=1/e<0?-1:1,this.e=0,this.d=[0];return}if(e<0?(e=-e,this.s=-1):this.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;nu?t>o.maxE?(this.e=NaN,this.d=null):t<o.minE?(this.e=0,this.d=[0]):(this.e=t,this.d=[e]):(this.e=t,this.d=[e]);return}if(0*e!=0){e||(this.s=NaN),this.e=NaN,this.d=null;return}return nF(this,e.toString())}if("string"!==r)throw Error(nl+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),this.s=-1):(43===n&&(e=e.slice(1)),this.s=1),nb.test(e)?nF(this,e):function(e,t){var n,r,i,o,s,a,u,c,l;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),nb.test(t))return nF(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(nw.test(t))n=16,t=t.toLowerCase();else if(ng.test(t))n=2;else if(ny.test(t))n=8;else throw Error(nl+t);for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),s=(o=t.indexOf("."))>=0,r=e.constructor,s&&(o=(a=(t=t.replace(".","")).length)-o,i=nD(r,new r(n),o,2*o)),o=l=(c=nE(t,n,1e7)).length-1;0===c[o];--o)c.pop();return o<0?new r(0*e.s):(e.e=nO(c,l),e.d=c,nu=!1,s&&(e=nP(e,i,4*a)),u&&(e=e.times(54>Math.abs(u)?nh(2,u):rI.pow(2,u))),nu=!0,e)}(this,e)}if(o.prototype=nk,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=n3,o.clone=e,o.isDecimal=rn,o.abs=nX,o.acos=nz,o.acosh=nj,o.add=nZ,o.asin=nQ,o.asinh=nJ,o.atan=n$,o.atanh=n0,o.atan2=n1,o.cbrt=n4,o.ceil=n2,o.clamp=n6,o.cos=n5,o.cosh=n8,o.div=n9,o.exp=n7,o.floor=re,o.hypot=rt,o.ln=rr,o.log=ri,o.log10=rs,o.log2=ro,o.max=ra,o.min=ru,o.mod=rc,o.mul=rl,o.pow=rd,o.random=rm,o.round=rf,o.sign=rp,o.sin=rh,o.sinh=rg,o.sqrt=rw,o.sub=ry,o.sum=rb,o.tan=rA,o.tanh=rS,o.trunc=rk,void 0===t&&(t={}),t&&!0!==t.defaults)for(n=0,i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(na);no=new rI(no),ns=new rI(ns);var rT=n(23663).Buffer;let rv={createPool:[233,146,209,142,207,104,64,188],initReward:[95,135,192,196,242,129,230,68],setRewardEmissions:[112,52,167,75,32,201,211,137],openPosition:[77,184,74,214,112,86,241,199],closePosition:[123,134,81,0,49,68,98,98],increaseLiquidity:[133,29,89,223,69,238,176,10],decreaseLiquidity:[58,127,188,62,79,82,196,96],swap:[43,4,237,11,26,201,30,98],collectReward:[18,237,166,197,34,16,213,144]};function rE(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g,w,y){let b=eZ([eF("amount"),eF("otherAmountThreshold"),eW("sqrtPriceLimitX64"),eG("isBaseInput")]),A=[...y?[{pubkey:y,isSigner:!1,isWritable:!0}]:[],...d.map(e=>({pubkey:e,isSigner:!1,isWritable:!0}))],S=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},...A],k=rT.alloc(b.span);b.encode({amount:p,otherAmountThreshold:h,sqrtPriceLimitX64:g,isBaseInput:w},k);let I=rT.from([...rv.swap,...k]);return new m.TransactionInstruction({keys:S,programId:e,data:I})}let rP=new(h())(-1),rL=new(h())(1).shln(64),rC=new(h())(1).shln(128),rO=rL.sub(z),rx=rC.subn(1),rB=new(h())("4295048016"),rR=new(h())("79226673521066979257578248091"),rU=new(h())(10).pow(new(h())(6));(i=s||(s={}))[i.rate_500=500]="rate_500",i[i.rate_3000=3e3]="rate_3000",i[i.rate_10000=1e4]="rate_10000",s.rate_500,s.rate_3000,s.rate_10000;let rD=new(h())("18446744073700000000");function r_(e){let t=new ArrayBuffer(4);return new DataView(t).setInt32(0,e,!1),new Uint8Array(t)}function rq(e,t){let n=0;for(let r=e-1;r>=0&&!t.testn(r);r--)n++;return n}function rN(e,t){let n=0;for(let r=0;r<e&&!t.testn(r);r++)n++;return n}function rV(e,t){for(let n=0;n<e;n++)if(t.testn(n))return!1;return!0}var rM=n(23663).Buffer;rM.from("amm_config","utf8");let rF=rM.from("pool","utf8"),rW=rM.from("pool_vault","utf8"),rK=rM.from("pool_reward_vault","utf8"),rH=rM.from("position","utf8"),rY=rM.from("tick_array","utf8"),rG=rM.from("operation","utf8"),rX=rM.from("pool_tick_array_bitmap_extension","utf8");function rz(e,t,n){return x([rW,t.toBuffer(),n.toBuffer()],e)}function rj(e,t,n){return x([rY,t.toBuffer(),r_(n)],e)}function rZ(e,t,n,r){return x([rH,t.toBuffer(),r_(n),r_(r)],e)}function rQ(e,t){return x([rH,t.toBuffer()],e)}function rJ(e){return x([rM.from("metadata","utf8"),L.toBuffer(),e.toBuffer()],L)}function r$(e,t){return x([rX,t.toBuffer()],e)}class r0{static async getTickArrays(e,t,n,r,i,o,s){let a=[],u=r4.getTickArrayStartIndexByTick(r,i),c=r4.getInitializedTickArrayInRange(o,s,i,u,Math.floor(7.5));for(let e=0;e<c.length;e++){let{publicKey:r}=rj(t,n,c[e]);a.push(r)}let l=(await q(e,a)).map(e=>null!==e?ir.decode(e.data):null),d={};for(let e=0;e<a.length;e++){let t=l[e];null!==t&&(d[t.startTickIndex]={...t,address:a[e]})}return d}static nextInitializedTick(e,t,n,r,i,o){let{initializedTick:s,tickArrayAddress:a,tickArrayStartTickIndex:u}=this.nextInitializedTickInOneArray(e,t,n,r,i,o);for(;void 0==s||s.liquidityGross.lten(0);){if(u=r4.getNextTickArrayStartIndex(u,i,o),this.checkIsValidStartIndex(u,i))throw Error("No enough initialized tickArray");let r=n[u];if(void 0===r)continue;let{nextTick:c,tickArrayAddress:l,tickArrayStartTickIndex:d}=this.firstInitializedTickInOneArray(e,t,r,o);[s,a,u]=[c,l,d]}if(void 0==s)throw Error("No invaild tickArray cache");return{nextTick:s,tickArrayAddress:a,tickArrayStartTickIndex:u}}static nextInitializedTickArray(e,t,n,r,i){let o=Math.floor(e/r0.tickCount(t)),s=n?r4.searchLowBitFromStart(r,i,o-1,1,t):r4.searchHightBitFromStart(r,i,o+1,1,t);return s.length>0?{isExist:!0,nextStartIndex:s[0]}:{isExist:!1,nextStartIndex:0}}static firstInitializedTickInOneArray(e,t,n,r){let i;if(r){let e=r1-1;for(;e>=0;){let t=n.ticks[e];if(t.liquidityGross.gtn(0)){i=t;break}e-=1}}else{let e=0;for(;e<r1;){let t=n.ticks[e];if(t.liquidityGross.gtn(0)){i=t;break}e+=1}}let{publicKey:o}=rj(e,t,n.startTickIndex);return{nextTick:i,tickArrayAddress:o,tickArrayStartTickIndex:n.startTickIndex}}static nextInitializedTickInOneArray(e,t,n,r,i,o){let s;let a=r4.getTickArrayStartIndexByTick(r,i),u=Math.floor((r-a)/i),c=n[a];if(void 0==c)return{initializedTick:void 0,tickArrayAddress:void 0,tickArrayStartTickIndex:a};if(o)for(;u>=0;){let e=c.ticks[u];if(e.liquidityGross.gtn(0)){s=e;break}u-=1}else for(u+=1;u<r1;){let e=c.ticks[u];if(e.liquidityGross.gtn(0)){s=e;break}u+=1}let{publicKey:l}=rj(e,t,a);return{initializedTick:s,tickArrayAddress:l,tickArrayStartTickIndex:c.startTickIndex}}static getArrayStartIndex(e,t){let n=this.tickCount(t);return Math.floor(e/n)*n}static checkIsValidStartIndex(e,t){return r4.checkIsOutOfBoundary(e)?!(e>443636)&&e==r4.getTickArrayStartIndexByTick(-443636,t):e%this.tickCount(t)==0}static tickCount(e){return r1*e}}let r1=60;class r4{static getTickArrayAddressByTick(e,t,n,r){let{publicKey:i}=rj(e,t,r4.getTickArrayStartIndexByTick(n,r));return i}static getTickOffsetInArray(e,t){if(e%t!=0)throw Error("tickIndex % tickSpacing not equal 0");let n=r4.getTickArrayStartIndexByTick(e,t),r=Math.floor((e-n)/t);if(r<0||r>=r1)throw Error("tick offset in array overflow");return r}static getTickArrayBitIndex(e,t){let n=r0.tickCount(t),r=e/n;return e<0&&e%n!=0?Math.ceil(r)-1:Math.floor(r)}static getTickArrayStartIndexByTick(e,t){return this.getTickArrayBitIndex(e,t)*r0.tickCount(t)}static getTickArrayOffsetInBitmapByTick(e,t){return Math.abs(Math.floor(e/(t*r1))+512)}static checkTickArrayIsInitialized(e,t,n){let r=n*r1,i=Math.abs(Math.floor(t/r)+512);return{isInitialized:e.testn(i),startIndex:(i-512)*r}}static getNextTickArrayStartIndex(e,t,n){return n?e-t*r1:e+t*r1}static mergeTickArrayBitmap(e){let t=new(h())(0);for(let n=0;n<e.length;n++)t=t.add(e[n].shln(64*n));return t}static getInitializedTickArrayInRange(e,t,n,r,i){let o=Math.floor(r/(n*r1));return[...r4.searchLowBitFromStart(e,t,o-1,i,n),...r4.searchHightBitFromStart(e,t,o,i,n)]}static getAllInitializedTickArrayStartIndex(e,t,n){return r4.searchHightBitFromStart(e,t,0,512,n)}static getAllInitializedTickArrayInfo(e,t,n,r,i){let o=[];for(let s of r4.getAllInitializedTickArrayStartIndex(n,r,i)){let{publicKey:n}=rj(e,t,s);o.push({tickArrayStartIndex:s,tickArrayAddress:n})}return o}static getAllInitializedTickInTickArray(e){return e.ticks.filter(e=>e.liquidityGross.gtn(0))}static searchLowBitFromStart(e,t,n,r,i){let o=[...[...t.negativeTickArrayBitmap].reverse(),e.slice(0,8),e.slice(8,16),...t.positiveTickArrayBitmap].map(e=>r4.mergeTickArrayBitmap(e)),s=[];for(;n>=-7680;){let e=Math.floor((n+7680)/512),t=(n+7680)%512;if(o[e].testn(t)&&s.push(n),n--,s.length===r)break}let a=r0.tickCount(i);return s.map(e=>e*a)}static searchHightBitFromStart(e,t,n,r,i){let o=[...[...t.negativeTickArrayBitmap].reverse(),e.slice(0,8),e.slice(8,16),...t.positiveTickArrayBitmap].map(e=>r4.mergeTickArrayBitmap(e)),s=[];for(;n<7680;){let e=Math.floor((n+7680)/512),t=(n+7680)%512;if(o[e].testn(t)&&s.push(n),n++,s.length===r)break}let a=r0.tickCount(i);return s.map(e=>e*a)}static checkIsOutOfBoundary(e){return e<-443636||e>443636}static nextInitTick(e,t,n,r,i){if(r0.getArrayStartIndex(t,n)!=e.startTickIndex)return null;let o=Math.floor((t-e.startTickIndex)/n);if(r)for(;o>=0;){if(e.ticks[o].liquidityGross.gtn(0))return e.ticks[o];o-=1}else for(i||(o+=1);o<r1;){if(e.ticks[o].liquidityGross.gtn(0))return e.ticks[o];o+=1}return null}static firstInitializedTick(e,t){if(t){let t=r1-1;for(;t>=0;){if(e.ticks[t].liquidityGross.gtn(0))return e.ticks[t];t-=1}}else{let t=0;for(;t<r1;){if(e.ticks[t].liquidityGross.gtn(0))return e.ticks[t];t+=1}}throw Error(`firstInitializedTick check error: ${e} - ${t}`)}}class r2{static maxTickInTickarrayBitmap(e){return e*r1*512}static getBitmapTickBoundary(e,t){let n=this.maxTickInTickarrayBitmap(t),r=Math.floor(Math.abs(e)/n);e<0&&Math.abs(e)%n!=0&&(r+=1);let i=n*r;return e<0?{minValue:-i,maxValue:-i+n}:{minValue:i,maxValue:i+n}}static nextInitializedTickArrayStartIndex(e,t,n,r){var i,o;if(!r0.checkIsValidStartIndex(t,n))throw Error("nextInitializedTickArrayStartIndex check error");let s=this.maxTickInTickarrayBitmap(n),a=r?t-r0.tickCount(n):t+r0.tickCount(n);if(a<-s||a>=s)return{isInit:!1,tickIndex:t};let u=n*r1,c=a/u+512;a<0&&a%u!=0&&c--;let l=Math.abs(c);if(r){let t=rV(1024,i=e.shln(1024-l-1))?null:rq(1024,i);return null!==t?{isInit:!0,tickIndex:(l-t-512)*u}:{isInit:!1,tickIndex:-s}}{let t=rV(1024,o=e.shrn(l))?null:rN(1024,o);return null!==t?{isInit:!0,tickIndex:(l+t-512)*u}:{isInit:!1,tickIndex:s-r0.tickCount(n)}}}}class r6{static getBitmapOffset(e,t){if(!r0.checkIsValidStartIndex(e,t))throw Error("No enough initialized tickArray");this.checkExtensionBoundary(e,t);let n=r2.maxTickInTickarrayBitmap(t),r=Math.floor(Math.abs(e)/n)-1;return e<0&&Math.abs(e)%n==0&&r--,r}static getBitmap(e,t,n){let r=this.getBitmapOffset(e,t);return e<0?{offset:r,tickarrayBitmap:n.negativeTickArrayBitmap[r]}:{offset:r,tickarrayBitmap:n.positiveTickArrayBitmap[r]}}static checkExtensionBoundary(e,t){let{positiveTickBoundary:n,negativeTickBoundary:r}=this.extensionTickBoundary(t);if(e>=r&&e<n)throw Error("checkExtensionBoundary -> InvalidTickArrayBoundary")}static extensionTickBoundary(e){let t=r2.maxTickInTickarrayBitmap(e),n=-t;if(443636<=t)throw Error(`extensionTickBoundary check error: 443636, ${t}`);if(n<=-443636)throw Error(`extensionTickBoundary check error: ${n}, -443636`);return{positiveTickBoundary:t,negativeTickBoundary:n}}static checkTickArrayIsInit(e,t,n){let{tickarrayBitmap:r}=this.getBitmap(e,t,n),i=this.tickArrayOffsetInBitmap(e,t);return{isInitialized:r4.mergeTickArrayBitmap(r).testn(i),startIndex:e}}static nextInitializedTickArrayFromOneBitmap(e,t,n,r){let i=r0.tickCount(t),o=n?e-i:e+i,s=r0.getArrayStartIndex(-443636,t),a=r0.getArrayStartIndex(443636,t);if(o<s||o>a)return{isInit:!1,tickIndex:o};let{tickarrayBitmap:u}=this.getBitmap(o,t,r);return this.nextInitializedTickArrayInBitmap(u,o,t,n)}static nextInitializedTickArrayInBitmap(e,t,n,r){let{minValue:i,maxValue:o}=r2.getBitmapTickBoundary(t,n),s=this.tickArrayOffsetInBitmap(t,n);if(r){let r=r4.mergeTickArrayBitmap(e).shln(511-s),o=rV(512,r)?null:rq(512,r);return null!==o?{isInit:!0,tickIndex:t-o*r0.tickCount(n)}:{isInit:!1,tickIndex:i}}{let r=r4.mergeTickArrayBitmap(e).shrn(s),i=rV(512,r)?null:rN(512,r);return null!==i?{isInit:!0,tickIndex:t+i*r0.tickCount(n)}:{isInit:!1,tickIndex:o-r0.tickCount(n)}}}static tickArrayOffsetInBitmap(e,t){let n=Math.abs(e)%r2.maxTickInTickarrayBitmap(t),r=Math.floor(n/r0.tickCount(t));return e<0&&0!=n&&(r=512-r),r}}eZ([eU(8),eV("bump"),eO("index"),eY(""),eM("protocolFeeRate"),eM("tradeFeeRate"),eO("tickSpacing"),eM("fundFeeRate"),eQ(eM(),1,"padding"),eY("fundOwner"),eQ(eF(),3,"padding")]);let r3=eZ([eM("blockTimestamp"),eW("sqrtPriceX64"),eW("cumulativeTimePriceX64"),eQ(eW(),1,"")]),r5=eZ([eU(8),eG("initialized"),eY("poolId"),eQ(r3,1e3,"observations"),eQ(eW(),5,"")]),r8=eZ([eV("rewardState"),eF("openTime"),eF("endTime"),eF("lastUpdateTime"),eW("emissionsPerSecondX64"),eF("rewardTotalEmissioned"),eF("rewardClaimed"),eY("tokenMint"),eY("tokenVault"),eY("creator"),eW("rewardGrowthGlobalX64")]),r9=eZ([eU(8),eV("bump"),eY("ammConfig"),eY("creator"),eY("mintA"),eY("mintB"),eY("vaultA"),eY("vaultB"),eY("observationId"),eV("mintDecimalsA"),eV("mintDecimalsB"),eO("tickSpacing"),eW("liquidity"),eW("sqrtPriceX64"),eB("tickCurrent"),eO("observationIndex"),eO("observationUpdateDuration"),eW("feeGrowthGlobalX64A"),eW("feeGrowthGlobalX64B"),eF("protocolFeesTokenA"),eF("protocolFeesTokenB"),eW("swapInAmountTokenA"),eW("swapOutAmountTokenB"),eW("swapInAmountTokenB"),eW("swapOutAmountTokenA"),eV("status"),eQ(eV(),7,""),eQ(r8,3,"rewardInfos"),eQ(eF(),16,"tickArrayBitmap"),eF("totalFeesTokenA"),eF("totalFeesClaimedTokenA"),eF("totalFeesTokenB"),eF("totalFeesClaimedTokenB"),eF("fundFeesTokenA"),eF("fundFeesTokenB"),eF("startTime"),eQ(eF(),57,"padding")]),r7=eZ([eW("growthInsideLastX64"),eF("rewardAmountOwed")]),ie=eZ([eU(8),eV("bump"),eY("nftMint"),eY("poolId"),eB("tickLower"),eB("tickUpper"),eW("liquidity"),eW("feeGrowthInsideLastX64A"),eW("feeGrowthInsideLastX64B"),eF("tokenFeesOwedA"),eF("tokenFeesOwedB"),eQ(r7,3,"rewardInfos"),eQ(eF(),8,"")]);eZ([eU(8),eV("bump"),eY("poolId"),eB("tickLowerIndex"),eB("tickUpperIndex"),eW("liquidity"),eW("feeGrowthInsideLastX64A"),eW("feeGrowthInsideLastX64B"),eF("tokenFeesOwedA"),eF("tokenFeesOwedB"),eQ(eW(),3,"rewardGrowthInside"),eQ(eF(),8,"")]);let it=eZ([eB("tick"),new eq(16,!0,"liquidityNet"),eW("liquidityGross"),eW("feeGrowthOutsideX64A"),eW("feeGrowthOutsideX64B"),eQ(eW(),3,"rewardGrowthsOutsideX64"),eQ(eM(),13,"")]),ir=eZ([eU(8),eY("poolId"),eB("startTickIndex"),eQ(it,r1,"ticks"),eV("initializedTickCount"),eQ(eV(),115,"")]),ii=eZ([eU(329),eQ(eY(),100,"whitelistMints")]),io=eZ([eU(8),eY("poolId"),eQ(eQ(eF(),8),14,"positiveTickArrayBitmap"),eQ(eQ(eF(),8),14,"negativeTickArrayBitmap")]);class is{static getOutputAmountAndRemainAccounts(e,t,n,r,i,o=!1){let s=n.equals(e.mintA.mint),a=[],{isExist:u,startIndex:c,nextAccountMeta:l}=this.getFirstInitializedTickArray(e,s);if(!u||void 0===c||!l)throw Error("Invalid tick array");try{let t=this.preInitializedTickArrayStartIndex(e,s);if(t.isExist){let{publicKey:n}=rj(e.programId,e.id,t.nextStartIndex);a.push(n)}}catch(e){}a.push(l);let{allTrade:d,amountSpecifiedRemaining:m,amountCalculated:f,accounts:p,sqrtPriceX64:h,feeAmount:g}=ip.swapCompute(e.programId,e.id,t,e.tickArrayBitmap,e.exBitmapInfo,s,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,r,c,i,o);return a.push(...p),{allTrade:d,realTradeAmountIn:r.sub(m),expectedAmountOut:f.mul(rP),remainingAccounts:a,executionPrice:h,feeAmount:g}}static getInputAmountAndRemainAccounts(e,t,n,r,i){let o=n.equals(e.mintB.mint),s=[],{isExist:a,startIndex:u,nextAccountMeta:c}=this.getFirstInitializedTickArray(e,o);if(!a||void 0===u||!c)throw Error("Invalid tick array");try{let t=this.preInitializedTickArrayStartIndex(e,o);if(t.isExist){let{publicKey:n}=rj(e.programId,e.id,t.nextStartIndex);s.push(n)}}catch(e){}s.push(c);let{amountCalculated:l,accounts:d,sqrtPriceX64:m,feeAmount:f}=ip.swapCompute(e.programId,e.id,t,e.tickArrayBitmap,e.exBitmapInfo,o,e.ammConfig.tradeFeeRate,e.liquidity,e.tickCurrent,e.tickSpacing,e.sqrtPriceX64,r.mul(rP),u,i);return s.push(...d),{expectedAmountIn:l,remainingAccounts:s,executionPrice:m,feeAmount:f}}static getFirstInitializedTickArray(e,t){let{isInitialized:n,startIndex:r}=is.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[e.tickCurrent])?r6.checkTickArrayIsInit(r0.getArrayStartIndex(e.tickCurrent,e.tickSpacing),e.tickSpacing,e.exBitmapInfo):r4.checkTickArrayIsInitialized(r4.mergeTickArrayBitmap(e.tickArrayBitmap),e.tickCurrent,e.tickSpacing);if(n){let{publicKey:t}=rj(e.programId,e.id,r);return{isExist:!0,startIndex:r,nextAccountMeta:t}}let{isExist:i,nextStartIndex:o}=this.nextInitializedTickArrayStartIndex(e,r0.getArrayStartIndex(e.tickCurrent,e.tickSpacing),t);if(i){let{publicKey:t}=rj(e.programId,e.id,o);return{isExist:!0,startIndex:o,nextAccountMeta:t}}return{isExist:!1,nextAccountMeta:void 0,startIndex:void 0}}static preInitializedTickArrayStartIndex(e,t){let n=Math.floor(e.tickCurrent/r0.tickCount(e.tickSpacing)),r=t?r4.searchHightBitFromStart(e.tickArrayBitmap,e.exBitmapInfo,n+1,1,e.tickSpacing):r4.searchLowBitFromStart(e.tickArrayBitmap,e.exBitmapInfo,n-1,1,e.tickSpacing);return r.length>0?{isExist:!0,nextStartIndex:r[0]}:{isExist:!1,nextStartIndex:0}}static nextInitializedTickArrayStartIndex(e,t,n){for(t=r0.getArrayStartIndex(t,e.tickSpacing);;){let{isInit:r,tickIndex:i}=r2.nextInitializedTickArrayStartIndex(r4.mergeTickArrayBitmap(e.tickArrayBitmap),t,e.tickSpacing,n);if(r)return{isExist:!0,nextStartIndex:i};t=i;let{isInit:o,tickIndex:s}=r6.nextInitializedTickArrayFromOneBitmap(t,e.tickSpacing,n,e.exBitmapInfo);if(o)return{isExist:!0,nextStartIndex:s};if((t=s)<-443636||t>443636)return{isExist:!1,nextStartIndex:0}}}static async updatePoolRewardInfos({connection:e,apiPoolInfo:t,chainTime:n,poolLiquidity:r,rewardInfos:i}){let o=[];for(let s=0;s<i.length;s++){let a=i[s],u=t.rewardInfos[s]?.programId??(await e.getAccountInfo(a.tokenMint))?.owner;if(void 0===u)throw Error("get new reward mint info error");let c={...a,perSecond:ia.x64ToDecimal(a.emissionsPerSecondX64),remainingRewards:void 0,tokenProgramId:new m.PublicKey(u)};if(c.tokenMint.equals(m.PublicKey.default))continue;if(n<=c.openTime.toNumber()||r.eq(X)){o.push(c);continue}let l=new(h())(Math.min(c.endTime.toNumber(),n)),d=l.sub(c.lastUpdateTime),f=ia.mulDivFloor(d,c.emissionsPerSecondX64,r),p=c.rewardGrowthGlobalX64.add(f),g=ia.mulDivFloor(d,c.emissionsPerSecondX64,rL),w=c.rewardTotalEmissioned.add(g);o.push({...c,rewardGrowthGlobalX64:p,rewardTotalEmissioned:w,lastUpdateTime:l})}return o}static isOverflowDefaultTickarrayBitmap(e,t){let{maxTickBoundary:n,minTickBoundary:r}=this.tickRange(e);for(let i of t){let t=r4.getTickArrayStartIndexByTick(i,e);if(t>=n||t<r)return!0}return!1}static tickRange(e){let t=r2.maxTickInTickarrayBitmap(e),n=-t;return t>443636&&(t=r0.getArrayStartIndex(443636,e)+r0.tickCount(e)),n<-443636&&(n=r0.getArrayStartIndex(-443636,e)),{maxTickBoundary:t,minTickBoundary:n}}static get_tick_array_offset(e,t){if(!r0.checkIsValidStartIndex(e,t))throw Error("No enough initialized tickArray");return e/r0.tickCount(t)*512}}class ia{static mulDivRoundingUp(e,t,n){let r=e.mul(t),i=r.div(n);return r.mod(n).eq(X)||(i=i.add(z)),i}static mulDivFloor(e,t,n){if(n.eq(X))throw Error("division by 0");return e.mul(t).div(n)}static mulDivCeil(e,t,n){if(n.eq(X))throw Error("division by 0");return e.mul(t).add(n.sub(z)).div(n)}static x64ToDecimal(e,t){return new rI(e.toString()).div(rI.pow(2,64)).toDecimalPlaces(t)}static decimalToX64(e){return new(h())(e.mul(rI.pow(2,64)).floor().toFixed())}static wrappingSubU128(e,t){return e.add(rC).sub(t).mod(rC)}}function iu(e,t){return ic(e.mul(t),64,256)}function ic(e,t,n){let r=e.toTwos(n).shrn(t);return r.imaskn(n-t+1),r.fromTwos(n-t)}class il{static sqrtPriceX64ToPrice(e,t,n){return ia.x64ToDecimal(e).pow(2).mul(rI.pow(10,t-n))}static priceToSqrtPriceX64(e,t,n){return ia.decimalToX64(e.mul(rI.pow(10,n-t)).sqrt())}static getNextSqrtPriceX64FromInput(e,t,n,r){if(!e.gt(X))throw Error("sqrtPriceX64 must greater than 0");if(!t.gt(X))throw Error("liquidity must greater than 0");return r?this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!0):this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!0)}static getNextSqrtPriceX64FromOutput(e,t,n,r){if(!e.gt(X))throw Error("sqrtPriceX64 must greater than 0");if(!t.gt(X))throw Error("liquidity must greater than 0");return r?this.getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,!1):this.getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,!1)}static getNextSqrtPriceFromTokenAmountARoundingUp(e,t,n,r){if(n.eq(X))return e;let i=t.shln(64);if(r){let t=i.add(n.mul(e));return t.gte(i)?ia.mulDivCeil(i,e,t):ia.mulDivRoundingUp(i,z,i.div(e).add(n))}{let t=n.mul(e);if(!i.gt(t))throw Error("getNextSqrtPriceFromTokenAmountARoundingUp,liquidityLeftShift must gt amountMulSqrtPrice");let r=i.sub(t);return ia.mulDivCeil(i,e,r)}}static getNextSqrtPriceFromTokenAmountBRoundingDown(e,t,n,r){let i=n.shln(64);if(r)return e.add(i.div(t));{let n=ia.mulDivRoundingUp(i,z,t);if(!e.gt(n))throw Error("getNextSqrtPriceFromTokenAmountBRoundingDown sqrtPriceX64 must gt amountDivLiquidity");return e.sub(n)}}static getSqrtPriceX64FromTick(e){if(!Number.isInteger(e))throw Error("tick must be integer");if(e<-443636||e>443636)throw Error("tick must be in MIN_TICK and MAX_TICK");let t=e<0?-1*e:e,n=new(h())((1&t)!=0?"18445821805675395072":"18446744073709551616");return(2&t)!=0&&(n=iu(n,new(h())("18444899583751176192"))),(4&t)!=0&&(n=iu(n,new(h())("18443055278223355904"))),(8&t)!=0&&(n=iu(n,new(h())("18439367220385607680"))),(16&t)!=0&&(n=iu(n,new(h())("18431993317065453568"))),(32&t)!=0&&(n=iu(n,new(h())("18417254355718170624"))),(64&t)!=0&&(n=iu(n,new(h())("18387811781193609216"))),(128&t)!=0&&(n=iu(n,new(h())("18329067761203558400"))),(256&t)!=0&&(n=iu(n,new(h())("18212142134806163456"))),(512&t)!=0&&(n=iu(n,new(h())("17980523815641700352"))),(1024&t)!=0&&(n=iu(n,new(h())("17526086738831433728"))),(2048&t)!=0&&(n=iu(n,new(h())("16651378430235570176"))),(4096&t)!=0&&(n=iu(n,new(h())("15030750278694412288"))),(8192&t)!=0&&(n=iu(n,new(h())("12247334978884435968"))),(16384&t)!=0&&(n=iu(n,new(h())("8131365268886854656"))),(32768&t)!=0&&(n=iu(n,new(h())("3584323654725218816"))),(65536&t)!=0&&(n=iu(n,new(h())("696457651848324352"))),(131072&t)!=0&&(n=iu(n,new(h())("26294789957507116"))),(262144&t)!=0&&(n=iu(n,new(h())("37481735321082"))),e>0&&(n=rx.div(n)),n}static getTickFromPrice(e,t,n){return il.getTickFromSqrtPriceX64(il.priceToSqrtPriceX64(e,t,n))}static getTickFromSqrtPriceX64(e){if(e.gt(rR)||e.lt(rB))throw Error("Provided sqrtPrice is not within the supported sqrtPrice range.");let t=e.bitLength()-1,n=function(e,t,n){let r=e.toTwos(n).shln(32);return r.imaskn(n+1),r.fromTwos(n)}(new(h())(t-64),0,128),r=new(h())("8000000000000000","hex"),i=0,o=new(h())(0),s=t>=64?e.shrn(t-63):e.shln(63-t);for(;r.gt(new(h())(0))&&i<16;){let e=(s=s.mul(s)).shrn(127);s=s.shrn(63+e.toNumber()),o=o.add(r.mul(e)),r=r.shrn(1),i+=1}let a=o.shrn(32),u=n.add(a).mul(new(h())("59543866431248")),c=ic(u.sub(new(h())("184467440737095516")),64,128).toNumber(),l=ic(u.add(new(h())("15793534762490258745")),64,128).toNumber();return c==l?c:il.getSqrtPriceX64FromTick(l).lte(e)?l:c}}class id{static getTickWithPriceAndTickspacing(e,t,n,r){let i=il.getTickFromSqrtPriceX64(il.priceToSqrtPriceX64(e,n,r))/t;return(i=i<0?Math.floor(i):Math.ceil(i))*t}static roundPriceWithTickspacing(e,t,n,r){let i=id.getTickWithPriceAndTickspacing(e,t,n,r),o=il.getSqrtPriceX64FromTick(i);return il.sqrtPriceX64ToPrice(o,n,r)}}class im{static addDelta(e,t){return e.add(t)}static getTokenAmountAFromLiquidity(e,t,n,r){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(X))throw Error("sqrtPriceX64A must greater than 0");let i=n.ushln(64),o=t.sub(e);return r?ia.mulDivRoundingUp(ia.mulDivCeil(i,o,t),z,e):ia.mulDivFloor(i,o,t).div(e)}static getTokenAmountBFromLiquidity(e,t,n,r){if(e.gt(t)&&([e,t]=[t,e]),!e.gt(X))throw Error("sqrtPriceX64A must greater than 0");return r?ia.mulDivCeil(n,t.sub(e),rL):ia.mulDivFloor(n,t.sub(e),rL)}static getLiquidityFromTokenAmountA(e,t,n,r){e.gt(t)&&([e,t]=[t,e]);let i=n.mul(e).mul(t),o=t.sub(e),s=i.div(o);return r?ia.mulDivRoundingUp(s,z,rO):s.shrn(64)}static getLiquidityFromTokenAmountB(e,t,n){return e.gt(t)&&([e,t]=[t,e]),ia.mulDivFloor(n,rO,t.sub(e))}static getLiquidityFromTokenAmounts(e,t,n,r,i){if(t.gt(n)&&([t,n]=[n,t]),e.lte(t))return im.getLiquidityFromTokenAmountA(t,n,r,!1);if(!e.lt(n))return im.getLiquidityFromTokenAmountB(t,n,i);{let o=im.getLiquidityFromTokenAmountA(e,n,r,!1),s=im.getLiquidityFromTokenAmountB(t,e,i);return o.lt(s)?o:s}}static getAmountsFromLiquidity(e,t,n,r,i){return(t.gt(n)&&([t,n]=[n,t]),e.lte(t))?{amountA:im.getTokenAmountAFromLiquidity(t,n,r,i),amountB:new(h())(0)}:e.lt(n)?{amountA:im.getTokenAmountAFromLiquidity(e,n,r,i),amountB:im.getTokenAmountBFromLiquidity(t,e,r,i)}:{amountA:new(h())(0),amountB:im.getTokenAmountBFromLiquidity(t,n,r,i)}}static getAmountsFromLiquidityWithSlippage(e,t,n,r,i,o,s){let{amountA:a,amountB:u}=im.getAmountsFromLiquidity(e,t,n,r,o),c=i?1+s:1-s;return{amountSlippageA:new(h())(new rI(a.toString()).mul(c).toFixed(0)),amountSlippageB:new(h())(new rI(u.toString()).mul(c).toFixed(0))}}}class ip{static swapCompute(e,t,n,r,i,o,s,a,u,c,l,d,m,f,p=!1){if(d.eq(X))throw Error("amountSpecified must not be 0");if(f||(f=o?rB.add(z):rR.sub(z)),o){if(f.lt(rB))throw Error("sqrtPriceX64 must greater than MIN_SQRT_PRICE_X64");if(f.gte(l))throw Error("sqrtPriceX64 must smaller than current")}else{if(f.gt(rR))throw Error("sqrtPriceX64 must smaller than MAX_SQRT_PRICE_X64");if(f.lte(l))throw Error("sqrtPriceX64 must greater than current")}let g=d.gt(X),w={amountSpecifiedRemaining:d,amountCalculated:X,sqrtPriceX64:l,tick:u>m?Math.min(m+r0.tickCount(c)-1,u):m,accounts:[],liquidity:a,feeAmount:new(h())(0)},y=m,b=n[m],A=!o&&b.startTickIndex===w.tick;for(;!w.amountSpecifiedRemaining.eq(X)&&!w.sqrtPriceX64.eq(f);){let a;let u={};u.sqrtPriceStartX64=w.sqrtPriceX64;let l=r4.nextInitTick(b,w.tick,c,o,A)||null,d=null;if(!l?.liquidityGross.gtn(0)){let s=is.nextInitializedTickArrayStartIndex({tickCurrent:w.tick,tickSpacing:c,tickArrayBitmap:r,exBitmapInfo:i},y,o);if(!s.isExist){if(p)return{allTrade:!1,amountSpecifiedRemaining:w.amountSpecifiedRemaining,amountCalculated:w.amountCalculated,feeAmount:w.feeAmount,sqrtPriceX64:w.sqrtPriceX64,liquidity:w.liquidity,tickCurrent:w.tick,accounts:w.accounts};throw Error("swapCompute LiquidityInsufficient")}let{publicKey:a}=rj(e,t,y=s.nextStartIndex);d=a,b=n[y];try{l=r4.firstInitializedTick(b,o)}catch(e){throw Error("not found next tick info")}}if(u.tickNext=l.tick,u.initialized=l.liquidityGross.gtn(0),m!==y&&d&&(w.accounts.push(d),m=y),u.tickNext<-443636?u.tickNext=-443636:u.tickNext>443636&&(u.tickNext=443636),u.sqrtPriceNextX64=il.getSqrtPriceX64FromTick(u.tickNext),a=o&&u.sqrtPriceNextX64.lt(f)||!o&&u.sqrtPriceNextX64.gt(f)?f:u.sqrtPriceNextX64,[w.sqrtPriceX64,u.amountIn,u.amountOut,u.feeAmount]=ip.swapStepCompute(w.sqrtPriceX64,a,w.liquidity,w.amountSpecifiedRemaining,s),w.feeAmount=w.feeAmount.add(u.feeAmount),g?(w.amountSpecifiedRemaining=w.amountSpecifiedRemaining.sub(u.amountIn.add(u.feeAmount)),w.amountCalculated=w.amountCalculated.sub(u.amountOut)):(w.amountSpecifiedRemaining=w.amountSpecifiedRemaining.add(u.amountOut),w.amountCalculated=w.amountCalculated.add(u.amountIn.add(u.feeAmount))),w.sqrtPriceX64.eq(u.sqrtPriceNextX64)){if(u.initialized){let e=l.liquidityNet;o&&(e=e.mul(rP)),w.liquidity=im.addDelta(w.liquidity,e)}A=u.tickNext!=w.tick&&!o&&b.startTickIndex===u.tickNext,w.tick=o?u.tickNext-1:u.tickNext}else if(w.sqrtPriceX64!=u.sqrtPriceStartX64){let e=il.getTickFromSqrtPriceX64(w.sqrtPriceX64);A=e!=w.tick&&!o&&b.startTickIndex===e,w.tick=e}}try{let{nextStartIndex:n,isExist:s}=r0.nextInitializedTickArray(w.tick,c,o,r,i);s&&m!==n&&(w.accounts.push(rj(e,t,n).publicKey),m=n)}catch(e){}return{allTrade:!0,amountSpecifiedRemaining:X,amountCalculated:w.amountCalculated,feeAmount:w.feeAmount,sqrtPriceX64:w.sqrtPriceX64,liquidity:w.liquidity,tickCurrent:w.tick,accounts:w.accounts}}static swapStepCompute(e,t,n,r,i){let o={sqrtPriceX64Next:new(h())(0),amountIn:new(h())(0),amountOut:new(h())(0),feeAmount:new(h())(0)},s=e.gte(t),a=r.gte(X);if(a){let a=ia.mulDivFloor(r,rU.sub(new(h())(i.toString())),rU);o.amountIn=s?im.getTokenAmountAFromLiquidity(t,e,n,!0):im.getTokenAmountBFromLiquidity(e,t,n,!0),a.gte(o.amountIn)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=il.getNextSqrtPriceX64FromInput(e,n,a,s)}else o.amountOut=s?im.getTokenAmountBFromLiquidity(t,e,n,!1):im.getTokenAmountAFromLiquidity(e,t,n,!1),r.mul(rP).gte(o.amountOut)?o.sqrtPriceX64Next=t:o.sqrtPriceX64Next=il.getNextSqrtPriceX64FromOutput(e,n,r.mul(rP),s);let u=t.eq(o.sqrtPriceX64Next);return s?(u&&a||(o.amountIn=im.getTokenAmountAFromLiquidity(o.sqrtPriceX64Next,e,n,!0)),u&&!a||(o.amountOut=im.getTokenAmountBFromLiquidity(o.sqrtPriceX64Next,e,n,!1))):(o.amountIn=u&&a?o.amountIn:im.getTokenAmountBFromLiquidity(e,o.sqrtPriceX64Next,n,!0),o.amountOut=u&&!a?o.amountOut:im.getTokenAmountAFromLiquidity(e,o.sqrtPriceX64Next,n,!1)),!a&&o.amountOut.gt(r.mul(rP))&&(o.amountOut=r.mul(rP)),a&&!o.sqrtPriceX64Next.eq(t)?o.feeAmount=r.sub(o.amountIn):o.feeAmount=ia.mulDivCeil(o.amountIn,new(h())(i),rU.sub(new(h())(i))),[o.sqrtPriceX64Next,o.amountIn,o.amountOut,o.feeAmount]}}class ih{static getfeeGrowthInside(e,t,n){let r=new(h())(0),i=new(h())(0);e.tickCurrent>=t.tick?(r=t.feeGrowthOutsideX64A,i=t.feeGrowthOutsideX64B):(r=e.feeGrowthGlobalX64A.sub(t.feeGrowthOutsideX64A),i=e.feeGrowthGlobalX64B.sub(t.feeGrowthOutsideX64B));let o=new(h())(0),s=new(h())(0);return e.tickCurrent<n.tick?(o=n.feeGrowthOutsideX64A,s=n.feeGrowthOutsideX64B):(o=e.feeGrowthGlobalX64A.sub(n.feeGrowthOutsideX64A),s=e.feeGrowthGlobalX64B.sub(n.feeGrowthOutsideX64B)),{feeGrowthInsideX64A:ia.wrappingSubU128(ia.wrappingSubU128(e.feeGrowthGlobalX64A,r),o),feeGrowthInsideBX64:ia.wrappingSubU128(ia.wrappingSubU128(e.feeGrowthGlobalX64B,i),s)}}static GetPositionFees(e,t,n,r){let{feeGrowthInsideX64A:i,feeGrowthInsideBX64:o}=this.getfeeGrowthInside(e,n,r),s=ia.mulDivFloor(ia.wrappingSubU128(i,t.feeGrowthInsideLastX64A),t.liquidity,rL),a=t.tokenFeesOwedA.add(s),u=ia.mulDivFloor(ia.wrappingSubU128(o,t.feeGrowthInsideLastX64B),t.liquidity,rL);return{tokenFeeAmountA:a,tokenFeeAmountB:t.tokenFeesOwedB.add(u)}}static GetPositionRewards(e,t,n,r){let i=[],o=this.getRewardGrowthInside(e.tickCurrent,n,r,e.rewardInfos);for(let e=0;e<o.length;e++){let n=o[e],r=t.rewardInfos[e],s=ia.wrappingSubU128(n,r.growthInsideLastX64),a=ia.mulDivFloor(s,t.liquidity,rL),u=r.rewardAmountOwed.add(a);i.push(u)}return i}static getRewardGrowthInside(e,t,n,r){let i=[];for(let o=0;o<r.length;o++){let s=new(h())(0);s=t.liquidityGross.eqn(0)?r[o].rewardGrowthGlobalX64:e<t.tick?r[o].rewardGrowthGlobalX64.sub(t.rewardGrowthsOutsideX64[o]):t.rewardGrowthsOutsideX64[o];let a=new(h())(0);n.liquidityGross.eqn(0)||(a=e<n.tick?n.rewardGrowthsOutsideX64[o]:r[o].rewardGrowthGlobalX64.sub(n.rewardGrowthsOutsideX64[o])),i.push(ia.wrappingSubU128(ia.wrappingSubU128(r[o].rewardGrowthGlobalX64,s),a))}return i}}let ig=I.from("Clmm");class iw extends ta{static makeMockPoolInfo({programId:e,mint1:t,mint2:n,ammConfig:r,createPoolInstructionSimpleAddress:i,initialPrice:o,startTime:s,owner:a}){let[u,c,l]=new(h())(t.mint.toBuffer()).gt(new(h())(n.mint.toBuffer()))?[n,t,new rI(1).div(o)]:[t,n,o],d=il.priceToSqrtPriceX64(l,u.decimals,c.decimals);return{id:i.poolId,mintA:{programId:i.mintProgramIdA,mint:i.mintA,vault:i.mintAVault,decimals:u.decimals},mintB:{programId:i.mintProgramIdB,mint:i.mintB,vault:i.mintBVault,decimals:c.decimals},ammConfig:r,observationId:i.observationId,creator:a,programId:e,version:6,tickSpacing:r.tickSpacing,liquidity:X,sqrtPriceX64:d,currentPrice:l,tickCurrent:0,observationIndex:0,observationUpdateDuration:0,feeGrowthGlobalX64A:X,feeGrowthGlobalX64B:X,protocolFeesTokenA:X,protocolFeesTokenB:X,swapInAmountTokenA:X,swapOutAmountTokenB:X,swapInAmountTokenB:X,swapOutAmountTokenA:X,tickArrayBitmap:[],rewardInfos:[],day:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},week:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},month:{volume:0,volumeFee:0,feeA:0,feeB:0,feeApr:0,rewardApr:{A:0,B:0,C:0},apr:0,priceMax:0,priceMin:0},tvl:0,lookupTableAccount:m.PublicKey.default,startTime:s.toNumber(),exBitmapInfo:{poolId:i.poolId,positiveTickArrayBitmap:Array.from({length:14},()=>Array.from({length:8},()=>new(h())(0))),negativeTickArrayBitmap:Array.from({length:14},()=>Array.from({length:8},()=>new(h())(0)))}}}static async makeCreatePoolInstructionSimple({makeTxVersion:e,connection:t,programId:n,owner:r,payer:i,mint1:o,mint2:s,ammConfig:a,initialPrice:u,startTime:c,computeBudgetConfig:l,lookupTableCache:d}){let[m,f,p]=new(h())(o.mint.toBuffer()).gt(new(h())(s.mint.toBuffer()))?[s,o,new rI(1).div(u)]:[o,s,u],g=il.priceToSqrtPriceX64(p,m.decimals,f.decimals),w=await this.makeCreatePoolInstructions({connection:t,programId:n,owner:r,mintA:m,mintB:f,ammConfigId:a.id,initialPriceX64:g,startTime:c});return{address:{...w.address,mintA:m.mint,mintB:f.mint,mintProgramIdA:m.programId,mintProgramIdB:f.programId},innerTransactions:await K({connection:t,makeTxVersion:e,computeBudgetConfig:l,payer:i,innerTransaction:[w.innerTransaction],lookupTableCache:d})}}static async makeOpenPositionFromLiquidityInstructionSimple({makeTxVersion:e,connection:t,poolInfo:n,ownerInfo:r,amountMaxA:i,amountMaxB:o,tickLower:s,tickUpper:a,liquidity:u,associatedOnly:c=!0,checkCreateATAOwner:l=!1,withMetadata:d="create",getEphemeralSigners:m,computeBudgetConfig:f,lookupTableCache:p}){let h=[],g=[],w=[],y=[],b=[],A=r.useSOLBalance&&n.mintA.mint.equals(eo.WSOL.mint),S=r.useSOLBalance&&n.mintB.mint.equals(eo.WSOL.mint),k=await this._selectOrCreateTokenAccount({programId:n.mintA.programId,mint:n.mintA.mint,tokenAccounts:A?[]:r.tokenAccounts,owner:r.wallet,createInfo:A||i.eq(X)?{connection:t,payer:r.feePayer,amount:i,frontInstructions:h,endInstructions:g,frontInstructionsType:w,endInstructionsType:y,signers:b}:void 0,associatedOnly:!A&&c,checkCreateATAOwner:l}),I=await this._selectOrCreateTokenAccount({programId:n.mintB.programId,mint:n.mintB.mint,tokenAccounts:S?[]:r.tokenAccounts,owner:r.wallet,createInfo:S||o.eq(X)?{connection:t,payer:r.feePayer,amount:o,frontInstructions:h,endInstructions:g,frontInstructionsType:w,endInstructionsType:y,signers:b}:void 0,associatedOnly:!S&&c,checkCreateATAOwner:l});ig.assertArgument(void 0!==k&&void 0!==I,"cannot found target token accounts","tokenAccounts",r.tokenAccounts);let T=await this.makeOpenPositionFromLiquidityInstructions({poolInfo:n,ownerInfo:{...r,tokenAccountA:k,tokenAccountB:I},tickLower:s,tickUpper:a,liquidity:u,amountMaxA:i,amountMaxB:o,withMetadata:d,getEphemeralSigners:m});return{address:T.address,innerTransactions:await K({connection:t,makeTxVersion:e,computeBudgetConfig:f,payer:r.feePayer,innerTransaction:[{instructionTypes:w,instructions:h,signers:b},T.innerTransaction,{instructionTypes:y,instructions:g,signers:[]}],lookupTableCache:p})}}static async makeOpenPositionFromBaseInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,tickLower:r,tickUpper:i,base:o,baseAmount:s,otherAmountMax:a,associatedOnly:u=!0,checkCreateATAOwner:c=!1,computeBudgetConfig:l,withMetadata:d="create",makeTxVersion:m,lookupTableCache:f,getEphemeralSigners:p}){let h=[],g=[],w=[],y=[],b=[],A=n.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),S=n.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),k=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:A?[]:n.tokenAccounts,owner:n.wallet,createInfo:A?{connection:e,payer:n.feePayer,amount:"MintA"===o?s:a,frontInstructions:h,endInstructions:g,frontInstructionsType:w,endInstructionsType:y,signers:b}:void 0,associatedOnly:!A&&u,checkCreateATAOwner:c}),I=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:S?[]:n.tokenAccounts,owner:n.wallet,createInfo:S?{connection:e,payer:n.feePayer,amount:"MintA"===o?a:s,frontInstructions:h,endInstructions:g,frontInstructionsType:w,endInstructionsType:y,signers:b}:void 0,associatedOnly:!S&&u,checkCreateATAOwner:c});ig.assertArgument(void 0!==k&&void 0!==I,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let T=await this.makeOpenPositionFromBaseInstructions({poolInfo:t,ownerInfo:{...n,tokenAccountA:k,tokenAccountB:I},tickLower:r,tickUpper:i,base:o,baseAmount:s,otherAmountMax:a,withMetadata:d,getEphemeralSigners:p});return{address:T.address,innerTransactions:await K({connection:e,makeTxVersion:m,computeBudgetConfig:l,payer:n.feePayer,innerTransaction:[{instructionTypes:w,instructions:h,signers:b},T.innerTransaction,{instructionTypes:y,instructions:g,signers:[]}],lookupTableCache:f})}}static async makeIncreasePositionFromLiquidityInstructionSimple({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:r,amountMaxA:i,amountMaxB:o,liquidity:s,associatedOnly:a=!0,checkCreateATAOwner:u=!1,computeBudgetConfig:c,makeTxVersion:l,lookupTableCache:d}){let m=[],f=[],p=[],h=[],g=[],w=r.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),y=r.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),b=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:w?[]:r.tokenAccounts,owner:r.wallet,createInfo:w?{connection:e,payer:r.feePayer,amount:i,frontInstructions:m,endInstructions:f,frontInstructionsType:p,endInstructionsType:h,signers:g}:void 0,associatedOnly:!w&&a,checkCreateATAOwner:u}),A=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:y?[]:r.tokenAccounts,owner:r.wallet,createInfo:y?{connection:e,payer:r.feePayer,amount:o,frontInstructions:m,endInstructions:f,frontInstructionsType:p,endInstructionsType:h,signers:g}:void 0,associatedOnly:!y&&a,checkCreateATAOwner:u});ig.assertArgument(!!b||!!A,"cannot found target token accounts","tokenAccounts",r.tokenAccounts);let S=this.makeIncreasePositionFromLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:r.wallet,tokenAccountA:b,tokenAccountB:A},liquidity:s,amountMaxA:i,amountMaxB:o});return{address:S.address,innerTransactions:await K({connection:e,makeTxVersion:l,computeBudgetConfig:c,payer:r.feePayer,innerTransaction:[{instructionTypes:p,instructions:m,signers:g},S.innerTransaction,{instructionTypes:h,instructions:f,signers:[]}],lookupTableCache:d})}}static async makeIncreasePositionFromBaseInstructionSimple({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:r,base:i,baseAmount:o,otherAmountMax:s,associatedOnly:a=!0,checkCreateATAOwner:u=!1,computeBudgetConfig:c,makeTxVersion:l,lookupTableCache:d}){let m=[],f=[],p=[],h=[],g=[],w=r.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),y=r.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),b=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:w?[]:r.tokenAccounts,owner:r.wallet,createInfo:w?{connection:e,payer:r.feePayer,amount:"MintA"===i?o:s,frontInstructions:m,endInstructions:f,frontInstructionsType:p,endInstructionsType:h,signers:g}:void 0,associatedOnly:!w&&a,checkCreateATAOwner:u}),A=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:y?[]:r.tokenAccounts,owner:r.wallet,createInfo:y?{connection:e,payer:r.feePayer,amount:"MintA"===i?s:o,frontInstructions:m,endInstructions:f,frontInstructionsType:p,endInstructionsType:h,signers:g}:void 0,associatedOnly:!y&&a,checkCreateATAOwner:u});ig.assertArgument(!!b||!!A,"cannot found target token accounts","tokenAccounts",r.tokenAccounts);let S=this.makeIncreasePositionFromBaseInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:r.wallet,tokenAccountA:b,tokenAccountB:A},base:i,baseAmount:o,otherAmountMax:s});return{address:S.address,innerTransactions:await K({connection:e,makeTxVersion:l,computeBudgetConfig:c,payer:r.feePayer,innerTransaction:[{instructionTypes:p,instructions:m,signers:g},S.innerTransaction,{instructionTypes:h,instructions:f,signers:[]}],lookupTableCache:d})}}static async makeDecreaseLiquidityInstructionSimple({connection:e,poolInfo:t,ownerPosition:n,ownerInfo:r,liquidity:i,amountMinA:o,amountMinB:s,associatedOnly:a=!0,checkCreateATAOwner:u=!1,computeBudgetConfig:c,makeTxVersion:l,lookupTableCache:d}){let m=[],f=[],p=[],h=[],g=[],w=r.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),y=r.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),b=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:w?[]:r.tokenAccounts,owner:r.wallet,createInfo:{connection:e,payer:r.feePayer,amount:0,frontInstructions:m,frontInstructionsType:p,endInstructions:w?f:[],endInstructionsType:w?h:[],signers:g},associatedOnly:!w&&a,checkCreateATAOwner:u}),A=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:y?[]:r.tokenAccounts,owner:r.wallet,createInfo:{connection:e,payer:r.feePayer,amount:0,frontInstructions:m,frontInstructionsType:p,endInstructions:y?f:[],endInstructionsType:y?h:[],signers:g},associatedOnly:!y&&a,checkCreateATAOwner:u}),S=[];for(let n of t.rewardInfos){let i=r.useSOLBalance&&n.tokenMint.equals(eo.WSOL.mint),o=n.tokenMint.equals(t.mintA.mint)?b:n.tokenMint.equals(t.mintB.mint)?A:await this._selectOrCreateTokenAccount({programId:n.tokenProgramId,mint:n.tokenMint,tokenAccounts:i?[]:r.tokenAccounts,owner:r.wallet,createInfo:{connection:e,payer:r.feePayer,amount:0,frontInstructions:m,frontInstructionsType:p,endInstructions:i?f:[],endInstructionsType:i?h:[],signers:g},associatedOnly:!i&&a,checkCreateATAOwner:u});S.push(o)}ig.assertArgument(!!b||!!A,"cannot found target token accounts","tokenAccounts",r.tokenAccounts);let k=this.makeDecreaseLiquidityInstructions({poolInfo:t,ownerPosition:n,ownerInfo:{wallet:r.wallet,tokenAccountA:b,tokenAccountB:A,rewardAccounts:S},liquidity:i,amountMinA:o,amountMinB:s}),I=r.closePosition?this.makeClosePositionInstructions({poolInfo:t,ownerInfo:r,ownerPosition:n}):{address:{},innerTransaction:{instructions:[],signers:[],instructionTypes:[]}};return{address:k.address,innerTransactions:await K({connection:e,makeTxVersion:l,computeBudgetConfig:c,payer:r.feePayer,innerTransaction:[{instructionTypes:p,instructions:m,signers:g},k.innerTransaction,{instructionTypes:h,instructions:f,signers:[]},I.innerTransaction],lookupTableCache:d})}}static async makeSwapBaseInInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,inputMint:r,amountIn:i,amountOutMin:o,priceLimit:s,remainingAccounts:a,associatedOnly:u=!0,checkCreateATAOwner:c=!1,computeBudgetConfig:l,makeTxVersion:d,lookupTableCache:m}){let f;let p=[],h=[],g=[],w=[],y=[];f=!s||s.equals(new rI(0))?r.equals(t.mintA.mint)?rB.add(z):rR.sub(z):il.priceToSqrtPriceX64(s,t.mintA.decimals,t.mintB.decimals);let b=t.mintA.mint.equals(r),A=n.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),S=n.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),k=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:A?[]:n.tokenAccounts,owner:n.wallet,createInfo:A||!b?{connection:e,payer:n.feePayer,amount:b?i:0,frontInstructions:p,endInstructions:h,frontInstructionsType:g,endInstructionsType:w,signers:y}:void 0,associatedOnly:!A&&u,checkCreateATAOwner:c}),I=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:S?[]:n.tokenAccounts,owner:n.wallet,createInfo:S||b?{connection:e,payer:n.feePayer,amount:b?0:i,frontInstructions:p,endInstructions:h,frontInstructionsType:g,endInstructionsType:w,signers:y}:void 0,associatedOnly:!S&&u,checkCreateATAOwner:c});ig.assertArgument(!!k||!!I,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let T=this.makeSwapBaseInInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccountA:k,tokenAccountB:I},inputMint:r,amountIn:i,amountOutMin:o,sqrtPriceLimitX64:f,remainingAccounts:a});return{address:T.address,innerTransactions:await K({connection:e,makeTxVersion:d,computeBudgetConfig:l,payer:n.feePayer,innerTransaction:[{instructionTypes:g,instructions:p,signers:y},T.innerTransaction,{instructionTypes:w,instructions:h,signers:[]}],lookupTableCache:m})}}static async makeSwapBaseOutInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,outputMint:r,amountOut:i,amountInMax:o,priceLimit:s,remainingAccounts:a,associatedOnly:u=!0,checkCreateATAOwner:c=!1,computeBudgetConfig:l,makeTxVersion:d,lookupTableCache:m}){let f;let p=[],h=[],g=[],w=[],y=[];f=!s||s.equals(new rI(0))?r.equals(t.mintB.mint)?rB.add(z):rR.sub(z):il.priceToSqrtPriceX64(s,t.mintA.decimals,t.mintB.decimals);let b=t.mintA.mint.equals(r),A=n.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),S=n.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),k=await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:A?[]:n.tokenAccounts,owner:n.wallet,createInfo:A||!b?{connection:e,payer:n.feePayer,amount:b?o:0,frontInstructions:p,endInstructions:h,frontInstructionsType:g,endInstructionsType:w,signers:y}:void 0,associatedOnly:!A&&u,checkCreateATAOwner:c}),I=await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:S?[]:n.tokenAccounts,owner:n.wallet,createInfo:S||b?{connection:e,payer:n.feePayer,amount:b?0:o,frontInstructions:p,endInstructions:h,frontInstructionsType:g,endInstructionsType:w,signers:y}:void 0,associatedOnly:!S&&u,checkCreateATAOwner:c});ig.assertArgument(!!k||!!I,"cannot found target token accounts","tokenAccounts",n.tokenAccounts);let T=this.makeSwapBaseOutInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccountA:k,tokenAccountB:I},outputMint:r,amountOut:i,amountInMax:o,sqrtPriceLimitX64:f,remainingAccounts:a});return{address:T.address,innerTransactions:await K({connection:e,makeTxVersion:d,computeBudgetConfig:l,payer:n.feePayer,innerTransaction:[{instructionTypes:g,instructions:p,signers:y},T.innerTransaction,{instructionTypes:w,instructions:h,signers:[]}],lookupTableCache:m})}}static async makeCLosePositionInstructionSimple({poolInfo:e,ownerPosition:t,ownerInfo:n,makeTxVersion:r,lookupTableCache:i,connection:o}){let s=this.makeClosePositionInstructions({poolInfo:e,ownerInfo:n,ownerPosition:t});return{address:s.address,innerTransactions:await K({connection:o,makeTxVersion:r,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[s.innerTransaction],lookupTableCache:i})}}static async makeInitRewardInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:r,chainTime:i,associatedOnly:o=!0,checkCreateATAOwner:s=!1,makeTxVersion:a,lookupTableCache:u}){ig.assertArgument(r.endTime>r.openTime,"reward time error","rewardInfo",r),ig.assertArgument(r.openTime>i,"reward must be paid later","rewardInfo",r);let c=[],l=[],d=[],m=[],f=[],p=n.useSOLBalance&&r.mint.equals(eo.WSOL.mint),g=r.perSecond.mul(r.endTime-r.openTime),w=await this._selectOrCreateTokenAccount({programId:r.programId,mint:r.mint,tokenAccounts:p?[]:n.tokenAccounts,owner:n.wallet,createInfo:p?{connection:e,payer:n.feePayer,amount:new(h())(new rI(g.toFixed(0)).gte(g)?g.toFixed(0):g.add(1).toFixed(0)),frontInstructions:c,endInstructions:l,frontInstructionsType:d,endInstructionsType:m,signers:f}:void 0,associatedOnly:!p&&o,checkCreateATAOwner:s});ig.assertArgument(w,"no money","ownerRewardAccount",n.tokenAccounts);let y=this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:w},rewardInfo:{programId:r.programId,mint:r.mint,openTime:r.openTime,endTime:r.endTime,emissionsPerSecondX64:ia.decimalToX64(r.perSecond)}});return{address:y.address,innerTransactions:await K({connection:e,makeTxVersion:a,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:c,signers:f},y.innerTransaction,{instructionTypes:m,instructions:l,signers:[]}],lookupTableCache:u})}}static async makeInitRewardsInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:r,associatedOnly:i=!0,checkCreateATAOwner:o=!1,computeBudgetConfig:s,makeTxVersion:a,lookupTableCache:u}){for(let e of r)ig.assertArgument(e.endTime>e.openTime,"reward time error","rewardInfo",e);let c=[],l=[],d=[],m=[],f=[],p=[];for(let s of r){let r=n.useSOLBalance&&s.mint.equals(eo.WSOL.mint),a=s.perSecond.mul(s.endTime-s.openTime),u=await this._selectOrCreateTokenAccount({programId:s.programId,mint:s.mint,tokenAccounts:r?[]:n.tokenAccounts,owner:n.wallet,createInfo:r?{connection:e,payer:n.feePayer,amount:new(h())(new rI(a.toFixed(0)).gte(a)?a.toFixed(0):a.add(1).toFixed(0)),frontInstructions:c,endInstructions:l,frontInstructionsType:d,endInstructionsType:m,signers:p}:void 0,associatedOnly:!r&&i,checkCreateATAOwner:o});ig.assertArgument(u,"no money","ownerRewardAccount",n.tokenAccounts),f.push(this.makeInitRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:u},rewardInfo:{programId:s.programId,mint:s.mint,openTime:s.openTime,endTime:s.endTime,emissionsPerSecondX64:ia.decimalToX64(s.perSecond)}}))}let g={};for(let e of f)g={...g,...e.address};return{address:g,innerTransactions:await K({connection:e,makeTxVersion:a,computeBudgetConfig:s,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:c,signers:p},...f.map(e=>e.innerTransaction),{instructionTypes:m,instructions:l,signers:[]}],lookupTableCache:u})}}static async makeSetRewardInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfo:r,chainTime:i,associatedOnly:o=!0,checkCreateATAOwner:s=!1,makeTxVersion:a,lookupTableCache:u}){ig.assertArgument(r.endTime>r.openTime,"reward time error","rewardInfo",r),ig.assertArgument(r.openTime>i,"reward must be paid later","rewardInfo",r);let c=[],l=[],d=[],m=[],f=[],p=n.useSOLBalance&&r.mint.equals(eo.WSOL.mint),g=await this._selectOrCreateTokenAccount({programId:r.programId,mint:r.mint,tokenAccounts:p?[]:n.tokenAccounts,owner:n.wallet,createInfo:p?{connection:e,payer:n.feePayer,amount:new(h())(new rI(r.perSecond.sub(r.endTime-r.openTime).toFixed(0)).gte(r.perSecond.sub(r.endTime-r.openTime))?r.perSecond.sub(r.endTime-r.openTime).toFixed(0):r.perSecond.sub(r.endTime-r.openTime).add(1).toFixed(0)),frontInstructions:c,endInstructions:l,frontInstructionsType:d,endInstructionsType:m,signers:f}:void 0,associatedOnly:!p&&o,checkCreateATAOwner:s});ig.assertArgument(g,"no money","ownerRewardAccount",n.tokenAccounts);let w=this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:g},rewardInfo:{mint:r.mint,openTime:r.openTime,endTime:r.endTime,emissionsPerSecondX64:ia.decimalToX64(r.perSecond)}});return{address:w.address,innerTransactions:await K({connection:e,makeTxVersion:a,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:c,signers:f},w.innerTransaction,{instructionTypes:m,instructions:l,signers:[]}],lookupTableCache:u})}}static async makeSetRewardsInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardInfos:r,chainTime:i,associatedOnly:o=!0,checkCreateATAOwner:s=!1,computeBudgetConfig:a,makeTxVersion:u,lookupTableCache:c}){let l=[],d=[],m=[],f=[],p=[],g=[];for(let a of r){ig.assertArgument(a.endTime>a.openTime,"reward time error","rewardInfo",a),ig.assertArgument(a.openTime>i,"reward must be paid later","rewardInfo",a);let r=n.useSOLBalance&&a.mint.equals(eo.WSOL.mint),u=await this._selectOrCreateTokenAccount({programId:a.programId,mint:a.mint,tokenAccounts:r?[]:n.tokenAccounts,owner:n.wallet,createInfo:r?{connection:e,payer:n.feePayer,amount:new(h())(new rI(a.perSecond.sub(a.endTime-a.openTime).toFixed(0)).gte(a.perSecond.sub(a.endTime-a.openTime))?a.perSecond.sub(a.endTime-a.openTime).toFixed(0):a.perSecond.sub(a.endTime-a.openTime).add(1).toFixed(0)),frontInstructions:l,endInstructions:d,frontInstructionsType:m,endInstructionsType:f,signers:g}:void 0,associatedOnly:!r&&o,checkCreateATAOwner:s});ig.assertArgument(u,"no money","ownerRewardAccount",n.tokenAccounts),p.push(this.makeSetRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:u},rewardInfo:{mint:a.mint,openTime:a.openTime,endTime:a.endTime,emissionsPerSecondX64:ia.decimalToX64(a.perSecond)}}))}let w={};for(let e of p)w={...w,...e.address};return{address:w,innerTransactions:await K({connection:e,makeTxVersion:u,computeBudgetConfig:a,payer:n.feePayer,innerTransaction:[{instructionTypes:m,instructions:l,signers:g},...p.map(e=>e.innerTransaction),{instructionTypes:f,instructions:d,signers:[]}],lookupTableCache:c})}}static async makeCollectRewardInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardMint:r,associatedOnly:i=!0,checkCreateATAOwner:o=!1,computeBudgetConfig:s,makeTxVersion:a,lookupTableCache:u}){let c=[],l=[],d=[],m=[],f=[],p=t.rewardInfos.find(e=>e.tokenMint.equals(r));if(ig.assertArgument(void 0!==p,"reward mint error","not found reward mint",r),void 0===p)throw Error("reward mint error");let h=n.useSOLBalance&&r.equals(eo.WSOL.mint),g=await this._selectOrCreateTokenAccount({programId:p.tokenProgramId,mint:r,tokenAccounts:h?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,endInstructions:h?l:[],frontInstructionsType:d,endInstructionsType:m,signers:f},associatedOnly:!h&&i,checkCreateATAOwner:o});ig.assertArgument(g,"no money","ownerRewardAccount",n.tokenAccounts);let w=this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:g},rewardMint:r});return{address:w.address,innerTransactions:await K({connection:e,makeTxVersion:a,computeBudgetConfig:s,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:c,signers:f},w.innerTransaction,{instructionTypes:m,instructions:l,signers:[]}],lookupTableCache:u})}}static async makeCollectRewardsInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,rewardMints:r,associatedOnly:i=!0,checkCreateATAOwner:o=!1,computeBudgetConfig:s,makeTxVersion:a,lookupTableCache:u}){let c=[],l=[],d=[],m=[],f=[],p=[];for(let s of r){let r=t.rewardInfos.find(e=>e.tokenMint.equals(s));if(ig.assertArgument(void 0!==r,"reward mint error","not found reward mint",s),void 0===r)throw Error("reward mint error");let a=n.useSOLBalance&&s.equals(eo.WSOL.mint),u=await this._selectOrCreateTokenAccount({programId:r.tokenProgramId,mint:s,tokenAccounts:a?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:c,endInstructions:a?l:[],signers:p,frontInstructionsType:d,endInstructionsType:m},associatedOnly:!a&&i,checkCreateATAOwner:o});ig.assertArgument(u,"no money","ownerRewardAccount",n.tokenAccounts),f.push(this.makeCollectRewardInstructions({poolInfo:t,ownerInfo:{wallet:n.wallet,tokenAccount:u},rewardMint:s}))}let h={};for(let e of f)h={...h,...e.address};return{address:h,innerTransactions:await K({connection:e,makeTxVersion:a,computeBudgetConfig:s,payer:n.feePayer,innerTransaction:[{instructionTypes:d,instructions:c,signers:p},...f.map(e=>e.innerTransaction),{instructionTypes:m,instructions:l,signers:[]}],lookupTableCache:u})}}static async makeHarvestAllRewardInstructionSimple({connection:e,fetchPoolInfos:t,ownerInfo:n,associatedOnly:r=!0,checkCreateATAOwner:i=!1,makeTxVersion:o,lookupTableCache:s}){let a={};for(let e of n.tokenAccounts)r?tr(n.wallet,e.accountInfo.mint,e.programId).publicKey.equals(e.pubkey)&&(a[e.accountInfo.mint.toString()]=e.pubkey):a[e.accountInfo.mint.toString()]=e.pubkey;let u=[],c=[],l=[],d=[],m=[],f=[];for(let o of Object.values(t)){if(void 0===o.positionAccount||!o.positionAccount.find(e=>!e.tokenFeeAmountA.isZero()||!e.tokenFeeAmountB.isZero()||e.rewardInfos.find(e=>!e.pendingReward.isZero())))continue;let t=o.state,s=n.useSOLBalance&&t.mintA.mint.equals(eo.WSOL.mint),p=n.useSOLBalance&&t.mintB.mint.equals(eo.WSOL.mint),h=a[t.mintA.mint.toString()]??await this._selectOrCreateTokenAccount({programId:t.mintA.programId,mint:t.mintA.mint,tokenAccounts:s?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,frontInstructionsType:l,endInstructions:s?c:[],endInstructionsType:s?d:[],signers:f},associatedOnly:!s&&r,checkCreateATAOwner:i}),g=a[t.mintB.mint.toString()]??await this._selectOrCreateTokenAccount({programId:t.mintB.programId,mint:t.mintB.mint,tokenAccounts:p?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,frontInstructionsType:l,endInstructions:p?c:[],endInstructionsType:p?d:[],signers:f},associatedOnly:!p&&r,checkCreateATAOwner:i});a[t.mintA.mint.toString()]=h,a[t.mintB.mint.toString()]=g;let w=[];for(let o of t.rewardInfos){let t=n.useSOLBalance&&o.tokenMint.equals(eo.WSOL.mint),s=a[o.tokenMint.toString()]??await this._selectOrCreateTokenAccount({programId:o.tokenProgramId,mint:o.tokenMint,tokenAccounts:t?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.feePayer,amount:0,frontInstructions:u,endInstructions:t?c:[],frontInstructionsType:l,endInstructionsType:d,signers:f},associatedOnly:!t&&r,checkCreateATAOwner:i});a[o.tokenMint.toString()]=s,w.push(s)}for(let e of o.positionAccount)m.push(this.makeDecreaseLiquidityInstructions({poolInfo:t,ownerPosition:e,ownerInfo:{wallet:n.wallet,tokenAccountA:h,tokenAccountB:g,rewardAccounts:w},liquidity:X,amountMinA:X,amountMinB:X}))}return{address:{},innerTransactions:await K({connection:e,makeTxVersion:o,computeBudgetConfig:void 0,payer:n.feePayer,innerTransaction:[{instructionTypes:l,instructions:u,signers:f},...m.map(e=>e.innerTransaction),{instructionTypes:d,instructions:c,signers:[]}],lookupTableCache:s})}}static async makeCreatePoolInstructions({connection:e,programId:t,owner:n,mintA:r,mintB:i,ammConfigId:o,initialPriceX64:s,startTime:a}){var u,c;let l=tu({fromPublicKey:n,programId:t}),d=(u=r.mint,c=i.mint,x([rF,o.toBuffer(),u.toBuffer(),c.toBuffer()],t)).publicKey,f=rz(t,d,r.mint).publicKey,p=rz(t,d,i.mint).publicKey,h=[m.SystemProgram.createAccountWithSeed({fromPubkey:n,basePubkey:n,seed:l.seed,newAccountPubkey:l.publicKey,lamports:await e.getMinimumBalanceForRentExemption(r5.span),space:r5.span,programId:t}),function(e,t,n,r,i,o,s,a,u,c,l,d,f,p){let h=eZ([eW("sqrtPriceX64"),eF("startTime")]),g=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:P,isSigner:!1,isWritable:!1}],w=rT.alloc(h.span);h.encode({sqrtPriceX64:f,startTime:p},w);let y=rT.from([...rv.createPool,...w]);return new m.TransactionInstruction({keys:g,programId:e,data:y})}(t,d,n,o,l.publicKey,r.mint,f,r.programId,i.mint,p,i.programId,r$(t,d).publicKey,s,a)];return{address:{observationId:l.publicKey,poolId:d,mintAVault:f,mintBVault:p},innerTransaction:{instructions:h,signers:[],instructionTypes:[ne.createAccount,ne.clmmCreatePool],lookupTableAddress:[]}}}static async makeOpenPositionFromLiquidityInstructions({poolInfo:e,ownerInfo:t,tickLower:n,tickUpper:r,liquidity:i,amountMaxA:o,amountMaxB:s,withMetadata:a,getEphemeralSigners:u}){let c;let d=[];if(u)c=new m.PublicKey((await u(1))[0]);else{let e=m.Keypair.generate();d.push(e),c=e.publicKey}let f=r4.getTickArrayStartIndexByTick(n,e.ammConfig.tickSpacing),p=r4.getTickArrayStartIndexByTick(r,e.ammConfig.tickSpacing),{publicKey:h}=rj(e.programId,e.id,f),{publicKey:g}=rj(e.programId,e.id,p),{publicKey:w}=tr(t.wallet,c,l.H_),{publicKey:y}=rJ(c),{publicKey:b}=rQ(e.programId,c),{publicKey:A}=rZ(e.programId,e.id,n,r),S=function(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g,w,y,b,A,S,k,I,T,E,C,O){let x=eZ([eB("tickLowerIndex"),eB("tickUpperIndex"),eB("tickArrayLowerStartIndex"),eB("tickArrayUpperStartIndex"),eW("liquidity"),eF("amountMaxA"),eF("amountMaxB"),eG("withMetadata"),eV("optionBaseFlag"),eG("baseFlag")]),B=[...O?[{pubkey:O,isSigner:!1,isWritable:!0}]:[]],R=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l._u,isSigner:!1,isWritable:!1},{pubkey:L,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},...B],U=rT.alloc(x.span);x.encode({tickLowerIndex:b,tickUpperIndex:A,tickArrayLowerStartIndex:S,tickArrayUpperStartIndex:k,liquidity:I,amountMaxA:T,amountMaxB:E,withMetadata:"create"===C,baseFlag:!1,optionBaseFlag:0},U);let D=rT.from([...rv.openPosition,...U]);return new m.TransactionInstruction({keys:R,programId:e,data:D})}(e.programId,t.feePayer,e.id,t.wallet,c,w,y,A,h,g,b,t.tokenAccountA,t.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,n,r,f,p,i,o,s,a,is.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[f,p])?r$(e.programId,e.id).publicKey:void 0);return{address:{nftMint:c,tickArrayLower:h,tickArrayUpper:g,positionNftAccount:w,metadataAccount:y,personalPosition:b,protocolPosition:A},innerTransaction:{instructions:[S],signers:d,instructionTypes:[ne.clmmOpenPosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static async makeOpenPositionFromBaseInstructions({poolInfo:e,ownerInfo:t,tickLower:n,tickUpper:r,base:i,baseAmount:o,otherAmountMax:s,withMetadata:a,getEphemeralSigners:u}){let c;let d=[];if(u)c=new m.PublicKey((await u(1))[0]);else{let e=m.Keypair.generate();d.push(e),c=e.publicKey}let f=r4.getTickArrayStartIndexByTick(n,e.ammConfig.tickSpacing),p=r4.getTickArrayStartIndexByTick(r,e.ammConfig.tickSpacing),{publicKey:h}=rj(e.programId,e.id,f),{publicKey:g}=rj(e.programId,e.id,p),{publicKey:w}=tr(t.wallet,c,l.H_),{publicKey:y}=rJ(c),{publicKey:b}=rQ(e.programId,c),{publicKey:A}=rZ(e.programId,e.id,n,r),S=function(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g,w,y,b,A,S,k,I,T,E,C,O){let x=eZ([eB("tickLowerIndex"),eB("tickUpperIndex"),eB("tickArrayLowerStartIndex"),eB("tickArrayUpperStartIndex"),eW("liquidity"),eF("amountMaxA"),eF("amountMaxB"),eG("withMetadata"),eV("optionBaseFlag"),eG("baseFlag")]),B=[...O?[{pubkey:O,isSigner:!1,isWritable:!0}]:[]],R=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l._u,isSigner:!1,isWritable:!1},{pubkey:L,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},...B],U=rT.alloc(x.span);x.encode({tickLowerIndex:b,tickUpperIndex:A,tickArrayLowerStartIndex:S,tickArrayUpperStartIndex:k,liquidity:X,amountMaxA:"MintA"===T?E:C,amountMaxB:"MintA"===T?C:E,withMetadata:"create"===I,baseFlag:"MintA"===T,optionBaseFlag:1},U);let D=rT.from([...rv.openPosition,...U]);return new m.TransactionInstruction({keys:R,programId:e,data:D})}(e.programId,t.feePayer,e.id,t.wallet,c,w,y,A,h,g,b,t.tokenAccountA,t.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,n,r,f,p,a,i,o,s,is.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[f,p])?r$(e.programId,e.id).publicKey:void 0);return{address:{nftMint:c,tickArrayLower:h,tickArrayUpper:g,positionNftAccount:w,metadataAccount:y,personalPosition:b,protocolPosition:A},innerTransaction:{instructions:[S],signers:d,instructionTypes:[ne.clmmOpenPosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeIncreasePositionFromLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:r,amountMaxA:i,amountMaxB:o}){let s=r4.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),a=r4.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=rj(e.programId,e.id,s),{publicKey:c}=rj(e.programId,e.id,a),{publicKey:d}=tr(n.wallet,t.nftMint,l.H_),{publicKey:f}=rQ(e.programId,t.nftMint),{publicKey:p}=rZ(e.programId,e.id,t.tickLower,t.tickUpper);return{address:{tickArrayLower:u,tickArrayUpper:c,positionNftAccount:d,personalPosition:f,protocolPosition:p},innerTransaction:{instructions:[function(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g,w,y,b){let A=eZ([eW("liquidity"),eF("amountMaxA"),eF("amountMaxB"),eV("optionBaseFlag"),eG("baseFlag")]),S=[...b?[{pubkey:b,isSigner:!1,isWritable:!0}]:[]],k=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},...S],I=rT.alloc(A.span);A.encode({liquidity:g,amountMaxA:w,amountMaxB:y,optionBaseFlag:0,baseFlag:!1},I);let T=rT.from([...rv.increaseLiquidity,...I]);return new m.TransactionInstruction({keys:k,programId:e,data:T})}(e.programId,n.wallet,d,f,e.id,p,u,c,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,r,i,o,is.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[s,a])?r$(e.programId,e.id).publicKey:void 0)],signers:[],instructionTypes:[ne.clmmIncreasePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeIncreasePositionFromBaseInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,base:r,baseAmount:i,otherAmountMax:o}){let s=r4.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),a=r4.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=rj(e.programId,e.id,s),{publicKey:c}=rj(e.programId,e.id,a),{publicKey:d}=tr(n.wallet,t.nftMint,l.H_),{publicKey:f}=rQ(e.programId,t.nftMint),{publicKey:p}=rZ(e.programId,e.id,t.tickLower,t.tickUpper);return{address:{tickArrayLower:u,tickArrayUpper:c,positionNftAccount:d,personalPosition:f,protocolPosition:p},innerTransaction:{instructions:[function(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g,w,y,b){let A=eZ([eW("liquidity"),eF("amountMaxA"),eF("amountMaxB"),eV("optionBaseFlag"),eG("baseFlag")]),S=[...b?[{pubkey:b,isSigner:!1,isWritable:!0}]:[]],k=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},...S],I=rT.alloc(A.span);A.encode({liquidity:X,amountMaxA:"MintA"===g?w:y,amountMaxB:"MintA"===g?y:w,baseFlag:"MintA"===g,optionBaseFlag:1},I);let T=rT.from([...rv.increaseLiquidity,...I]);return new m.TransactionInstruction({keys:k,programId:e,data:T})}(e.programId,n.wallet,d,f,e.id,p,u,c,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,r,i,o,is.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[s,a])?r$(e.programId,e.id).publicKey:void 0)],signers:[],instructionTypes:[ne.clmmIncreasePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeDecreaseLiquidityInstructions({poolInfo:e,ownerPosition:t,ownerInfo:n,liquidity:r,amountMinA:i,amountMinB:o}){let s=r4.getTickArrayStartIndexByTick(t.tickLower,e.ammConfig.tickSpacing),a=r4.getTickArrayStartIndexByTick(t.tickUpper,e.ammConfig.tickSpacing),{publicKey:u}=rj(e.programId,e.id,s),{publicKey:c}=rj(e.programId,e.id,a),{publicKey:d}=tr(n.wallet,t.nftMint,l.H_),{publicKey:f}=rQ(e.programId,t.nftMint),{publicKey:p}=rZ(e.programId,e.id,t.tickLower,t.tickUpper),h=[];for(let t=0;t<e.rewardInfos.length;t++)h.push({poolRewardVault:e.rewardInfos[t].tokenVault,ownerRewardVault:n.rewardAccounts[t],rewardMint:e.rewardInfos[t].tokenMint});return{address:{tickArrayLower:u,tickArrayUpper:c,positionNftAccount:d,personalPosition:f,protocolPosition:p},innerTransaction:{instructions:[function(e,t,n,r,i,o,s,a,u,c,d,f,p,h,g,w,y,b,A){let S=eZ([eW("liquidity"),eF("amountMinA"),eF("amountMinB")]),k=[...A?[{pubkey:A,isSigner:!1,isWritable:!0}]:[],...g.map(e=>[{pubkey:e.poolRewardVault,isSigner:!1,isWritable:!0},{pubkey:e.ownerRewardVault,isSigner:!1,isWritable:!0},{pubkey:e.rewardMint,isSigner:!1,isWritable:!1}]).flat()],I=[{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},...k],T=rT.alloc(S.span);S.encode({liquidity:w,amountMinA:y,amountMinB:b},T);let v=rT.from([...rv.decreaseLiquidity,...T]);return new m.TransactionInstruction({keys:I,programId:e,data:v})}(e.programId,n.wallet,d,f,e.id,p,u,c,n.tokenAccountA,n.tokenAccountB,e.mintA.vault,e.mintB.vault,e.mintA.mint,e.mintB.mint,h,r,i,o,is.isOverflowDefaultTickarrayBitmap(e.tickSpacing,[s,a])?r$(e.programId,e.id).publicKey:void 0)],signers:[],instructionTypes:[ne.clmmDecreasePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeClosePositionInstructions({poolInfo:e,ownerInfo:t,ownerPosition:n}){let{publicKey:r}=tr(t.wallet,n.nftMint,l.H_),{publicKey:i}=rQ(e.programId,n.nftMint);return{address:{positionNftAccount:r,personalPosition:i},innerTransaction:{instructions:[function(e,t,n,r,i){let o=eZ([]),s=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:l.H_,isSigner:!1,isWritable:!1}],a=rT.alloc(o.span);o.encode({},a);let u=rT.from([...rv.closePosition,...a]);return new m.TransactionInstruction({keys:s,programId:e,data:u})}(e.programId,t.wallet,n.nftMint,r,i)],signers:[],instructionTypes:[ne.clmmClosePosition],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeSwapBaseInInstructions({poolInfo:e,ownerInfo:t,inputMint:n,amountIn:r,amountOutMin:i,sqrtPriceLimitX64:o,remainingAccounts:s}){let a=e.mintA.mint.equals(n);return{address:{},innerTransaction:{instructions:[rE(e.programId,t.wallet,e.id,e.ammConfig.id,a?t.tokenAccountA:t.tokenAccountB,a?t.tokenAccountB:t.tokenAccountA,a?e.mintA.vault:e.mintB.vault,a?e.mintB.vault:e.mintA.vault,a?e.mintA.mint:e.mintB.mint,a?e.mintB.mint:e.mintA.mint,s,e.observationId,r,i,o,!0,r$(e.programId,e.id).publicKey)],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[ne.clmmSwapBaseIn]}}}static makeSwapBaseOutInstructions({poolInfo:e,ownerInfo:t,outputMint:n,amountOut:r,amountInMax:i,sqrtPriceLimitX64:o,remainingAccounts:s}){let a=e.mintA.mint.equals(n);return{address:{},innerTransaction:{instructions:[rE(e.programId,t.wallet,e.id,e.ammConfig.id,a?t.tokenAccountB:t.tokenAccountA,a?t.tokenAccountA:t.tokenAccountB,a?e.mintB.vault:e.mintA.vault,a?e.mintA.vault:e.mintB.vault,a?e.mintB.mint:e.mintA.mint,a?e.mintA.mint:e.mintB.mint,s,e.observationId,r,i,o,!1,r$(e.programId,e.id).publicKey)],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[ne.clmmSwapBaseOut]}}}static makeInitRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){var r,i,o;let s=(r=e.programId,i=e.id,o=n.mint,x([rK,i.toBuffer(),o.toBuffer()],r)).publicKey,a=x([rG],e.programId).publicKey;return{address:{poolRewardVault:s,operationId:a},innerTransaction:{instructions:[function(e,t,n,r,i,o,s,a,u,c,l,d){let f=eZ([eF("openTime"),eF("endTime"),eW("emissionsPerSecondX64")]),p=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:P,isSigner:!1,isWritable:!1}],h=rT.alloc(f.span);f.encode({openTime:J(c),endTime:J(l),emissionsPerSecondX64:d},h);let g=rT.from([...rv.initReward,...h]);return new m.TransactionInstruction({keys:p,programId:e,data:g})}(e.programId,t.wallet,e.id,a,e.ammConfig.id,t.tokenAccount,n.programId,n.mint,s,n.openTime,n.endTime,n.emissionsPerSecondX64)],signers:[],instructionTypes:[ne.clmmInitReward],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeSetRewardInstructions({poolInfo:e,ownerInfo:t,rewardInfo:n}){let r,i,o;for(let t=0;t<e.rewardInfos.length;t++)e.rewardInfos[t].tokenMint.equals(n.mint)&&(r=t,i=e.rewardInfos[t].tokenVault,o=e.rewardInfos[t].tokenMint);if(void 0===r||void 0===i||void 0===o)throw Error("reward mint check error");let s=x([rG],e.programId).publicKey;return{address:{rewardVault:i,operationId:s},innerTransaction:{instructions:[function(e,t,n,r,i,o,s,a,u,c,d,f){let p=eZ([eV("rewardIndex"),eW("emissionsPerSecondX64"),eF("openTime"),eF("endTime")]),h=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0}],g=rT.alloc(p.span);p.encode({rewardIndex:u,emissionsPerSecondX64:f,openTime:J(c),endTime:J(d)},g);let w=rT.from([...rv.setRewardEmissions,...g]);return new m.TransactionInstruction({keys:h,programId:e,data:w})}(e.programId,t.wallet,e.id,s,e.ammConfig.id,t.tokenAccount,i,o,r,n.openTime,n.endTime,n.emissionsPerSecondX64)],signers:[],instructionTypes:[ne.clmmInitReward],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static makeCollectRewardInstructions({poolInfo:e,ownerInfo:t,rewardMint:n}){let r,i;for(let t=0;t<e.rewardInfos.length;t++)e.rewardInfos[t].tokenMint.equals(n)&&(r=t,i=e.rewardInfos[t].tokenVault);if(void 0===r||void 0===i)throw Error("reward mint check error");return{address:{rewardVault:i},innerTransaction:{instructions:[function(e,t,n,r,i,o,s){let a=eZ([eV("rewardIndex")]),u=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l.nA,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1}],c=rT.alloc(a.span);a.encode({rewardIndex:s},c);let d=rT.from([...rv.collectReward,...c]);return new m.TransactionInstruction({keys:u,programId:e,data:d})}(e.programId,t.wallet,e.id,t.tokenAccount,i,n,r)],signers:[],instructionTypes:[ne.clmmInitReward],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default))}}}static getLiquidityAmountOutFromAmountIn({poolInfo:e,inputA:t,tickLower:n,tickUpper:r,amount:i,slippage:o,add:s,token2022Infos:a,epochInfo:u,amountHasFee:c}){let l;let d=e.sqrtPriceX64,m=il.getSqrtPriceX64FromTick(n),f=il.getSqrtPriceX64FromTick(r),p=tf(i,a[t?e.mintA.mint.toString():e.mintB.mint.toString()]?.feeConfig,u,!c),g=new(h())(new rI(p.amount.sub(p.fee??X).toString()).mul(s?1-o:1+o).toFixed(0));if(d.lte(m))l=t?im.getLiquidityFromTokenAmountA(m,f,g,!s):new(h())(0);else if(d.lte(f)){let e=im.getLiquidityFromTokenAmountA(d,f,g,!s),n=im.getLiquidityFromTokenAmountB(m,d,g);l=t?e:n}else l=t?new(h())(0):im.getLiquidityFromTokenAmountB(m,f,g);return this.getAmountsFromLiquidity({poolInfo:e,tickLower:n,tickUpper:r,liquidity:l,slippage:o,add:s,token2022Infos:a,epochInfo:u,amountAddFee:c})}static getLiquidityFromAmounts({poolInfo:e,tickLower:t,tickUpper:n,amountA:r,amountB:i,slippage:o,add:s,token2022Infos:a,epochInfo:u,amountHasFee:c}){let[l,d,m,f]=t<n?[t,n,r,i]:[n,t,i,r],p=e.sqrtPriceX64,h=il.getSqrtPriceX64FromTick(l),g=il.getSqrtPriceX64FromTick(d),[w,y]=[tf(m,a[e.mintA.mint.toString()]?.feeConfig,u,!c),tf(f,a[e.mintB.mint.toString()]?.feeConfig,u,!c)],b=im.getLiquidityFromTokenAmounts(p,h,g,w.amount.sub(w.fee??X),y.amount.sub(y.fee??X));return this.getAmountsFromLiquidity({poolInfo:e,tickLower:t,tickUpper:n,liquidity:b,slippage:o,add:s,token2022Infos:a,epochInfo:u,amountAddFee:!c})}static getAmountsFromLiquidity({poolInfo:e,tickLower:t,tickUpper:n,liquidity:r,slippage:i,add:o,token2022Infos:s,epochInfo:a,amountAddFee:u}){let c=il.getSqrtPriceX64FromTick(t),l=il.getSqrtPriceX64FromTick(n),d=o?1+i:1-i,m=im.getAmountsFromLiquidity(e.sqrtPriceX64,c,l,r,o),[f,p]=[tf(m.amountA,s[e.mintA.mint.toString()]?.feeConfig,a,u),tf(m.amountB,s[e.mintB.mint.toString()]?.feeConfig,a,u)],[g,w]=[tf(new(h())(new rI(m.amountA.toString()).mul(d).toFixed(0)),s[e.mintA.mint.toString()]?.feeConfig,a,u),tf(new(h())(new rI(m.amountB.toString()).mul(d).toFixed(0)),s[e.mintB.mint.toString()]?.feeConfig,a,u)];return{liquidity:r,amountA:f,amountB:p,amountSlippageA:g,amountSlippageB:w,expirationTime:tp(f.expirationTime,p.expirationTime)}}static getPriceAndTick({poolInfo:e,price:t,baseIn:n}){let r=n?t:new rI(1).div(t),i=id.getTickWithPriceAndTickspacing(r,e.ammConfig.tickSpacing,e.mintA.decimals,e.mintB.decimals),o=il.getSqrtPriceX64FromTick(i),s=il.sqrtPriceX64ToPrice(o,e.mintA.decimals,e.mintB.decimals);return n?{tick:i,price:s}:{tick:i,price:new rI(1).div(s)}}static getTickPrice({poolInfo:e,tick:t,baseIn:n}){let r=il.getSqrtPriceX64FromTick(t),i=il.sqrtPriceX64ToPrice(r,e.mintA.decimals,e.mintB.decimals);return n?{tick:t,price:i,tickSqrtPriceX64:r}:{tick:t,price:new rI(1).div(i),tickSqrtPriceX64:r}}static computeAmountOutFormat({poolInfo:e,tickArrayCache:t,token2022Infos:n,epochInfo:r,amountIn:i,currencyOut:o,slippage:s,catchLiquidityInsufficient:a=!1}){let u=i instanceof eA,c=(u?i.token:eo.WSOL).mint,l=i.raw,d=s.numerator.toNumber()/s.denominator.toNumber(),{allTrade:m,realAmountIn:f,amountOut:p,minAmountOut:g,expirationTime:w,currentPrice:y,executionPrice:b,priceImpact:A,fee:S,remainingAccounts:k,executionPriceX64:I}=this.computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:c,amountIn:l,slippage:d,token2022Infos:n,epochInfo:r,catchLiquidityInsufficient:a}),T={...f,amount:u?new eA(i.token,f.amount):new eb(ei.SOL,f.amount),fee:void 0===f.fee?void 0:u?new eA(i.token,f.fee):new eb(ei.SOL,f.fee)},v={...p,amount:o instanceof eo?new eA(o,p.amount):new eb(o,p.amount),fee:void 0===p.fee?void 0:o instanceof eo?new eA(o,p.fee):new eb(o,p.fee)},E={...g,amount:o instanceof eo?new eA(o,g.amount):new eb(o,g.amount),fee:void 0===g.fee?void 0:o instanceof eo?new eA(o,g.fee):new eb(o,g.fee)};return{allTrade:m,realAmountIn:T,amountOut:v,minAmountOut:E,expirationTime:w,currentPrice:new eT(u?i.token:i.currency,new(h())(10).pow(new(h())(20+(u?i.token:i.currency).decimals)),o instanceof eo?o:eo.WSOL,y.mul(new rI(10**(20+(o instanceof eo?o:eo.WSOL).decimals))).toFixed(0)),executionPrice:new eT(u?i.token:i.currency,new(h())(10).pow(new(h())(20+(u?i.token:i.currency).decimals)),o instanceof eo?o:eo.WSOL,b.mul(new rI(10**(20+(o instanceof eo?o:eo.WSOL).decimals))).toFixed(0)),priceImpact:A,fee:u?new eA(i.token,S):new eb(i.currency,S),remainingAccounts:k,executionPriceX64:I}}static async computeAmountOutAndCheckToken({connection:e,poolInfo:t,tickArrayCache:n,baseMint:r,amountIn:i,slippage:o,priceLimit:s=new rI(0),catchLiquidityInsufficient:a=!1}){let u=await e.getEpochInfo(),c=await th({connection:e,mints:[t.mintA,t.mintB].filter(e=>e.programId.equals(l.nA)).map(e=>e.mint)});return this.computeAmountOut({poolInfo:t,tickArrayCache:n,baseMint:r,amountIn:i,slippage:o,priceLimit:s,token2022Infos:c,epochInfo:u,catchLiquidityInsufficient:a})}static computeAmountOut({poolInfo:e,tickArrayCache:t,baseMint:n,token2022Infos:r,epochInfo:i,amountIn:o,slippage:s,priceLimit:a=new rI(0),catchLiquidityInsufficient:u=!1}){let c;c=a.equals(new rI(0))?n.equals(e.mintA.mint)?rB.add(z):rR.sub(z):il.priceToSqrtPriceX64(a,e.mintA.decimals,e.mintB.decimals);let l=tf(o,r[n.toString()]?.feeConfig,i,!1),{allTrade:d,realTradeAmountIn:m,expectedAmountOut:f,remainingAccounts:p,executionPrice:g,feeAmount:w}=is.getOutputAmountAndRemainAccounts(e,t,n,l.amount.sub(l.fee??X),c,u),y=tf(m,r[n.toString()]?.feeConfig,i,!0),b=e.mintA.mint.equals(n)?e.mintB.mint:e.mintA.mint,A=tf(f,r[b.toString()]?.feeConfig,i,!1),S=il.sqrtPriceX64ToPrice(g,e.mintA.decimals,e.mintB.decimals),k=n.equals(e.mintA.mint)?S:new rI(1).div(S),I=tf(f.mul(new(h())(Math.floor((1-s)*1e10))).div(new(h())(1e10)),r[b.toString()]?.feeConfig,i,!1),T=e.mintA.mint.equals(n)?e.currentPrice:new rI(1).div(e.currentPrice),v=new rI(k).sub(T).abs(),E=new ek(new rI(v).mul(1e15).toFixed(0),new rI(T).mul(1e15).toFixed(0));return{allTrade:d,realAmountIn:y,amountOut:A,minAmountOut:I,expirationTime:tp(y.expirationTime,A.expirationTime),currentPrice:e.currentPrice,executionPrice:k,priceImpact:E,fee:w,remainingAccounts:p,executionPriceX64:g}}static async computeAmountInAndCheckToken({connection:e,poolInfo:t,tickArrayCache:n,baseMint:r,amountOut:i,slippage:o,priceLimit:s=new rI(0)}){let a=await e.getEpochInfo(),u=await th({connection:e,mints:[t.mintA,t.mintB].filter(e=>e.programId.equals(l.nA)).map(e=>e.mint)});return this.computeAmountIn({poolInfo:t,tickArrayCache:n,baseMint:r,amountOut:i,slippage:o,priceLimit:s,token2022Infos:u,epochInfo:a})}static computeAmountIn({poolInfo:e,tickArrayCache:t,baseMint:n,token2022Infos:r,epochInfo:i,amountOut:o,slippage:s,priceLimit:a=new rI(0)}){let u;u=a.equals(new rI(0))?n.equals(e.mintB.mint)?rB.add(z):rR.sub(z):il.priceToSqrtPriceX64(a,e.mintA.decimals,e.mintB.decimals);let c=tf(o,r[n.toString()]?.feeConfig,i,!0),{expectedAmountIn:l,remainingAccounts:d,executionPrice:m,feeAmount:f}=is.getInputAmountAndRemainAccounts(e,t,n,c.amount.sub(c.fee??X),u),p=e.mintA.mint.equals(n)?e.mintB.mint:e.mintA.mint,g=tf(l,r[p.toString()]?.feeConfig,i,!0),w=il.sqrtPriceX64ToPrice(m,e.mintA.decimals,e.mintB.decimals),y=n.equals(e.mintA.mint)?w:new rI(1).div(w),b=tf(l.mul(new(h())(Math.floor((1+s)*1e10))).div(new(h())(1e10)),r[p.toString()]?.feeConfig,i,!0),A=e.mintA.mint.equals(n)?e.currentPrice:new rI(1).div(e.currentPrice),S=new rI(y).sub(A).abs(),k=new ek(new rI(S).mul(1e15).toFixed(0),new rI(A).mul(1e15).toFixed(0));return{amountIn:g,maxAmountIn:b,realAmountOut:c,expirationTime:tp(g.expirationTime,c.expirationTime),currentPrice:e.currentPrice,executionPrice:y,priceImpact:k,fee:f,remainingAccounts:d}}static estimateAprsForPriceRangeMultiplier({poolInfo:e,aprType:t,positionTickLowerIndex:n,positionTickUpperIndex:r}){let i;let o=e[t],s=this.getTickPrice({poolInfo:e,tick:n,baseIn:!0}).price.toNumber(),a=this.getTickPrice({poolInfo:e,tick:r,baseIn:!0}).price.toNumber(),u=Math.max(s,o.priceMin),c=Math.min(a,o.priceMax)-u,l=a-s,d=o.priceMax-o.priceMin;return i=c<=0?0:l===c?d/c:d===c?c/l:c/d*(c/l),{feeApr:o.feeApr*i,rewardsApr:[o.rewardApr.A*i,o.rewardApr.B*i,o.rewardApr.C*i],apr:o.apr*i}}static estimateAprsForPriceRangeDelta({poolInfo:e,aprType:t,mintPrice:n,rewardMintDecimals:r,liquidity:i,positionTickLowerIndex:o,positionTickUpperIndex:s,chainTime:a}){let u=e[t],c=n[e.mintA.mint.toString()],l=n[e.mintB.mint.toString()],d=e.mintA.decimals,m=e.mintB.decimals;if(!u||!c||!l)return{feeApr:0,rewardsApr:[0,0,0],apr:0};let f=il.getSqrtPriceX64FromTick(o),p=il.getSqrtPriceX64FromTick(s),{amountSlippageA:h,amountSlippageB:g}=im.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,f,p,e.liquidity,!1,!1,0),{amountSlippageA:w,amountSlippageB:y}=im.getAmountsFromLiquidityWithSlippage(e.sqrtPriceX64,f,p,i,!1,!1,0),b=new rI(h.toString()).div(new rI(10).pow(d)).mul(c.toFixed(d)).add(new rI(g.toString()).div(new rI(10).pow(m)).mul(l.toFixed(m))),A=new rI(w.toString()).div(new rI(10).pow(d)).mul(c.toFixed(d)).add(new rI(y.toString()).div(new rI(10).pow(m)).mul(l.toFixed(m))),S=A.div(b.add(A)).div(A),k=new rI(u.volumeFee).mul(365).div("day"===t?1:"week"===t?7:"month"===t?30:0).mul(S).mul(100).toNumber(),I=e.rewardInfos.map(e=>{let t=r[e.tokenMint.toString()],i=n[e.tokenMint.toString()];return a<e.openTime.toNumber()||a>e.endTime.toNumber()||e.perSecond.equals(0)||!i||void 0===t?0:new rI(i.toFixed(t)).mul(e.perSecond.mul(31536e3)).div(new rI(10).pow(t)).mul(S).mul(100).toNumber()});return{feeApr:k,rewardsApr:I,apr:k+I.reduce((e,t)=>e+t,0)}}static async fetchMultiplePoolInfos({connection:e,poolKeys:t,ownerInfo:n,chainTime:r,batchRequest:i=!1,updateOwnerRewardAndFee:o=!0}){let s=await q(e,t.map(e=>new m.PublicKey(e.id)),{batchRequest:i}),a={};for(let e=0;e<t.length;e++){let n=t[e],r=s[e];null!==r&&(a[n.id]=r$(r.owner,new m.PublicKey(n.id)).publicKey)}let u=await this.fetchExBitmaps({connection:e,exBitmapAddress:Object.values(a),batchRequest:i}),c=[],l={},d=[];for(let i=0;i<t.length;i++){let o=t[i],f=s[i],p=u[a[o.id].toString()];if(null===f)continue;let h=r9.decode(f.data);l[o.id]={state:{id:new m.PublicKey(o.id),mintA:{programId:new m.PublicKey(o.mintProgramIdA),mint:h.mintA,vault:h.vaultA,decimals:h.mintDecimalsA},mintB:{programId:new m.PublicKey(o.mintProgramIdB),mint:h.mintB,vault:h.vaultB,decimals:h.mintDecimalsB},observationId:h.observationId,ammConfig:{...o.ammConfig,id:new m.PublicKey(o.ammConfig.id)},creator:h.creator,programId:f.owner,version:6,tickSpacing:h.tickSpacing,liquidity:h.liquidity,sqrtPriceX64:h.sqrtPriceX64,currentPrice:il.sqrtPriceX64ToPrice(h.sqrtPriceX64,h.mintDecimalsA,h.mintDecimalsB),tickCurrent:h.tickCurrent,observationIndex:h.observationIndex,observationUpdateDuration:h.observationUpdateDuration,feeGrowthGlobalX64A:h.feeGrowthGlobalX64A,feeGrowthGlobalX64B:h.feeGrowthGlobalX64B,protocolFeesTokenA:h.protocolFeesTokenA,protocolFeesTokenB:h.protocolFeesTokenB,swapInAmountTokenA:h.swapInAmountTokenA,swapOutAmountTokenB:h.swapOutAmountTokenB,swapInAmountTokenB:h.swapInAmountTokenB,swapOutAmountTokenA:h.swapOutAmountTokenA,tickArrayBitmap:h.tickArrayBitmap,rewardInfos:await is.updatePoolRewardInfos({connection:e,apiPoolInfo:o,chainTime:r,poolLiquidity:h.liquidity,rewardInfos:h.rewardInfos.filter(e=>!e.tokenMint.equals(m.PublicKey.default))}),day:o.day,week:o.week,month:o.month,tvl:o.tvl,lookupTableAccount:o.lookupTableAccount?new m.PublicKey(o.lookupTableAccount):m.PublicKey.default,startTime:h.startTime.toNumber(),exBitmapInfo:p}},n&&d.push(...l[o.id].state.rewardInfos.filter(e=>e.creator.equals(n.wallet))),c.find(e=>e.equals(f.owner))||c.push(f.owner)}if(n){let t=n.tokenAccounts.filter(e=>e.accountInfo.amount.eq(new(h())(1))).map(e=>e.accountInfo.mint),r=[];for(let e of t)for(let t of c)r.push(rQ(t,e).publicKey);let s=await q(e,r,{batchRequest:i}),a={};for(let e of s){if(null===e)continue;let t=ie.decode(e.data),n=t.poolId.toString(),r=l[n];if(void 0===r)continue;let i=r.state,o=this.getTickPrice({poolInfo:i,tick:t.tickLower,baseIn:!0}),s=this.getTickPrice({poolInfo:i,tick:t.tickUpper,baseIn:!0}),{amountA:u,amountB:c}=im.getAmountsFromLiquidity(i.sqrtPriceX64,o.tickSqrtPriceX64,s.tickSqrtPriceX64,t.liquidity,!1),d=1/(1-Math.sqrt(Math.sqrt(o.price.div(s.price).toNumber())));l[n].positionAccount=[...l[n].positionAccount??[],{poolId:t.poolId,nftMint:t.nftMint,priceLower:o.price,priceUpper:s.price,amountA:u,amountB:c,tickLower:t.tickLower,tickUpper:t.tickUpper,liquidity:t.liquidity,feeGrowthInsideLastX64A:t.feeGrowthInsideLastX64A,feeGrowthInsideLastX64B:t.feeGrowthInsideLastX64B,tokenFeesOwedA:t.tokenFeesOwedA,tokenFeesOwedB:t.tokenFeesOwedB,rewardInfos:t.rewardInfos.map(e=>({...e,pendingReward:new(h())(0)})),leverage:d,tokenFeeAmountA:new(h())(0),tokenFeeAmountB:new(h())(0)}];let m=r4.getTickArrayAddressByTick(l[n].state.programId,t.poolId,t.tickLower,l[n].state.tickSpacing),f=r4.getTickArrayAddressByTick(l[n].state.programId,t.poolId,t.tickUpper,l[n].state.tickSpacing);a[`${l[n].state.programId.toString()}-${t.poolId.toString()}-${t.tickLower}`]=m,a[`${l[n].state.programId.toString()}-${t.poolId.toString()}-${t.tickUpper}`]=f}if(o){let t=Object.values(a),n=await q(e,t,{batchRequest:i}),r={};for(let e=0;e<t.length;e++){let i=n[e];if(null===i)continue;let o=t[e];r[o.toString()]={address:o,...ir.decode(i.data)}}for(let{state:e,positionAccount:t}of Object.values(l))if(t)for(let n of t){let t=`${e.programId.toString()}-${e.id.toString()}-${n.tickLower}`,i=`${e.programId.toString()}-${e.id.toString()}-${n.tickUpper}`,o=r[a[t].toString()],s=r[a[i].toString()],u=o.ticks[r4.getTickOffsetInArray(n.tickLower,e.tickSpacing)],c=s.ticks[r4.getTickOffsetInArray(n.tickUpper,e.tickSpacing)],{tokenFeeAmountA:l,tokenFeeAmountB:d}=ih.GetPositionFees(e,n,u,c),m=ih.GetPositionRewards(e,n,u,c);n.tokenFeeAmountA=l.gte(X)&&l.lt(rD)?l:X,n.tokenFeeAmountB=d.gte(X)&&l.lt(rD)?d:X;for(let e=0;e<m.length;e++)n.rewardInfos[e].pendingReward=m[e].gte(X)&&m[e].lt(rD)?m[e]:X}}}if(d.length>0){let t=d.map(e=>e.tokenVault),n=await q(e,t,{batchRequest:i}),r={};for(let e=0;e<t.length;e++){let i=t[e].toString(),o=n[e];if(null===o)continue;let s=e$.decode(o.data);r[i]=s.amount}for(let e of d){let t=r[e.tokenVault.toString()];e.remainingRewards=void 0!==t?t.sub(e.rewardTotalEmissioned.sub(e.rewardClaimed)):X}}return l}static async fetchMultiplePoolTickArrays({connection:e,poolKeys:t,batchRequest:n}){let r={},i=[];for(let e of t){let t=r4.getTickArrayStartIndexByTick(e.tickCurrent,e.tickSpacing);for(let n of r4.getInitializedTickArrayInRange(e.tickArrayBitmap,e.exBitmapInfo,e.tickSpacing,t,7)){let{publicKey:t}=rj(e.programId,e.id,n);i.push({pubkey:t}),r[t.toString()]=e.id}}let o=await N(e,i,{batchRequest:n}),s={};for(let e of o){if(!e.accountInfo)continue;let t=r[e.pubkey.toString()];if(!t)continue;void 0===s[t.toString()]&&(s[t.toString()]={});let n=ir.decode(e.accountInfo.data);s[t.toString()][n.startTickIndex]={...n,address:e.pubkey}}return s}static async fetchExBitmaps({connection:e,exBitmapAddress:t,batchRequest:n}){let r=await N(e,t.map(e=>({pubkey:e})),{batchRequest:n}),i={};for(let e of r)null!==e.accountInfo&&(i[e.pubkey.toString()]=io.decode(e.accountInfo.data));return i}static async getWhiteListMint({connection:e,programId:t}){let n=await e.getAccountInfo(x([rG],t).publicKey);return n?ii.decode(n.data).whitelistMints.filter(e=>!e.equals(m.PublicKey.default)):[]}}let iy="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",ib=new m.PublicKey(iy),iA={[iy]:3},iS={3:ib},ik=eZ([eU(5),eU(8),eY("ownAddress"),eF("vaultSignerNonce"),eY("baseMint"),eY("quoteMint"),eY("baseVault"),eF("baseDepositsTotal"),eF("baseFeesAccrued"),eY("quoteVault"),eF("quoteDepositsTotal"),eF("quoteFeesAccrued"),eF("quoteDustThreshold"),eY("requestQueue"),eY("eventQueue"),eY("bids"),eY("asks"),eF("baseLotSize"),eF("quoteLotSize"),eF("feeRateBps"),eF("referrerRebatesAccrued"),eU(7)]),iI={3:ik};var iT=n(23663).Buffer;let iv=I.from("Serum");class iE{static getProgramId(e){let t=iS[e];return iv.assertArgument(!!t,"invalid version","version",e),t}static getVersion(e){let t=e.toBase58(),n=iA[t];return iv.assertArgument(!!n,"invalid program id","programId",t),n}static getStateLayout(e){let t=iI[e];return iv.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedAuthority({programId:e,marketId:t}){let n;let r=[t.toBuffer()],i=0;for(;i<100;){try{let t=r.concat(iT.from([i]),iT.alloc(7));n=m.PublicKey.createProgramAddressSync(t,e)}catch(e){if(e instanceof TypeError)throw e;i++;continue}return{publicKey:n,nonce:i}}return iv.throwArgumentError("unable to find a viable program address nonce","params",{programId:e,marketId:t})}}let iP=new m.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),iL=eZ([eF("x"),eF("y"),eF("price")]),iC=eZ([eF("accountType"),eF("status"),eF("multiplier"),eF("validDataCount"),eQ(iL,5e4,"DataElement")]);function iO(e,t,n){let[r,i,o]=function(e,t,n){let[r,i]=[0,49998],o=r,s=i,a=0,u=t*e.multiplier/n;for(;o<=s&&0!==(a=Math.floor((s+o)/2))&&!(a>=49998);){let t=e.DataElement[a].x*e.multiplier/e.DataElement[a].y,n=e.DataElement[a-1].x*e.multiplier/e.DataElement[a-1].y,r=e.DataElement[a+1].x*e.multiplier/e.DataElement[a+1].y;if(u===t)return[a,a,!0];if(u===n)return[a-1,a-1,!0];if(u===r)return[a+1,a+1,!0];if(u<n)s=a-1;else{if(u>n&&u<t)return[a-1,a,!0];if(u>t&&u<r)return[a,a+1,!0];o=a+1}}return[a,a,!1]}(e,t,n);if(!o)return 0;if(r===i){let n=e.DataElement[r].x;return t*e.multiplier/n}{let o=e.DataElement[r].x,s=e.DataElement[r].y,a=e.DataElement[i].x,u=e.DataElement[i].y,c=n*(a*s-o*u),l=(a-o)*(t*s-o*n)*u;return t*e.multiplier*c/(o*c+l)}}function ix(e,t,n){return t*e.multiplier/n}function iB(e,t,n){return t*n/e.multiplier}function iR(e,t,n,r){let i=r?t+n:t-n,[o,s,a]=function(e,t){let[n,r]=[0,49998],i=n,o=r,s=0;for(;i<o&&!((s=Math.floor((o+i)/2))<=0)&&!(s>49998);){let n=e.DataElement[s].x,r=e.DataElement[s-1].x,a=e.DataElement[s+1].x;if(t===n)return[s,s,!0];if(t===r)return[s-1,s-1,!0];if(t===a)return[s+1,s+1,!0];if(t<r)o=s-1;else{if(t>r&&t<n)return[s-1,s,!0];if(t>n&&t<a)return[s,s+1,!0];i=s+1}}return[s,s,!1]}(e,i);if(!a)return[0,0,!1,a];if(o===s)return[e.DataElement[s].price,e.DataElement[s].y,!1,a];{let n=e.DataElement[o].x,u=e.DataElement[s].x,c=e.DataElement[o].price,l=e.DataElement[s].price,d=e.DataElement[o].y,m=e.DataElement[s].y;if(t>=n&&t<=u)return r?[l,m,!0,a]:[c,d,!0,a];{let o,s;return r?(o=c+(l-c)*(t-n)/(u-n),s=d-(i-n)*e.multiplier/l):(o=c+(l-c)*(t-n)/(u-n),s=m+(u-i)*e.multiplier/c),[o,s,!1,a]}}}var iU=n(23663).Buffer;let iD=I.from("Liquidity"),i_={accountType:0,status:0,multiplier:0,validDataCount:0,DataElement:[]};async function iq(e){if(0===i_.validDataCount&&e){let t=await e.getAccountInfo(iP);t&&(i_=function(e){let t=iC.decode(e);return{accountType:t.accountType.toNumber(),status:t.status.toNumber(),multiplier:t.multiplier.toNumber(),validDataCount:t.validDataCount.toNumber(),DataElement:t.DataElement.map(e=>({x:e.x.toNumber(),y:e.y.toNumber(),price:e.price.toNumber()}))}}(t?.data))}}(o=u||(u={}))[o.Uninitialized=0]="Uninitialized",o[o.Initialized=1]="Initialized",o[o.Disabled=2]="Disabled",o[o.RemoveLiquidityOnly=3]="RemoveLiquidityOnly",o[o.LiquidityOnly=4]="LiquidityOnly",o[o.OrderBook=5]="OrderBook",o[o.Swap=6]="Swap",o[o.WaitingForStart=7]="WaitingForStart";let iN=new(h())(25),iV=new(h())(1e4);class iM extends ta{static getStateLayout(e){let t=tQ[e];return iD.assertArgument(!!t,"invalid version","version",e),t}static getLayouts(e){return{state:this.getStateLayout(e)}}static getAssociatedId({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("amm_associated_seed","utf-8")],e);return n}static getAssociatedAuthority({programId:e}){return x([iU.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],e)}static getAssociatedBaseVault({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("coin_vault_associated_seed","utf-8")],e);return n}static getAssociatedQuoteVault({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("pc_vault_associated_seed","utf-8")],e);return n}static getAssociatedLpMint({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("lp_mint_associated_seed","utf-8")],e);return n}static getAssociatedLpVault({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("temp_lp_token_associated_seed","utf-8")],e);return n}static getAssociatedTargetOrders({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("target_associated_seed","utf-8")],e);return n}static getAssociatedWithdrawQueue({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("withdraw_associated_seed","utf-8")],e);return n}static getAssociatedOpenOrders({programId:e,marketId:t}){let{publicKey:n}=x([e.toBuffer(),t.toBuffer(),iU.from("open_order_associated_seed","utf-8")],e);return n}static getAssociatedConfigId({programId:e}){let{publicKey:t}=x([iU.from("amm_config_account_seed","utf-8")],e);return t}static getAssociatedPoolKeys({version:e,marketVersion:t,marketId:n,baseMint:r,quoteMint:i,baseDecimals:o,quoteDecimals:s,programId:a,marketProgramId:u}){let c=this.getAssociatedId({programId:a,marketId:n}),l=this.getAssociatedLpMint({programId:a,marketId:n}),{publicKey:d,nonce:f}=this.getAssociatedAuthority({programId:a}),p=this.getAssociatedBaseVault({programId:a,marketId:n}),h=this.getAssociatedQuoteVault({programId:a,marketId:n}),g=this.getAssociatedLpVault({programId:a,marketId:n}),w=this.getAssociatedOpenOrders({programId:a,marketId:n}),y=this.getAssociatedTargetOrders({programId:a,marketId:n}),b=this.getAssociatedWithdrawQueue({programId:a,marketId:n}),{publicKey:A}=iE.getAssociatedAuthority({programId:u,marketId:n});return{id:c,baseMint:r,quoteMint:i,lpMint:l,baseDecimals:o,quoteDecimals:s,lpDecimals:o,version:e,programId:a,authority:d,nonce:f,baseVault:p,quoteVault:h,lpVault:g,openOrders:w,targetOrders:y,withdrawQueue:b,marketVersion:t,marketProgramId:u,marketId:n,marketAuthority:A,lookupTableAccount:m.PublicKey.default,configId:this.getAssociatedConfigId({programId:a})}}static async getCreatePoolFee({connection:e,programId:t}){let n=this.getAssociatedConfigId({programId:t}),r=eZ([eF("fee")]),i=await e.getAccountInfo(n,{dataSlice:{offset:536,length:8}});if(null===i)throw Error("get config account error");return r.decode(i.data).fee}static makeAddLiquidityInstruction(e){let{poolKeys:t,userKeys:n,baseAmountIn:r,quoteAmountIn:i,fixedSide:o}=e,{version:s}=t;if(4===s||5===s){let e=eZ([eV("instruction"),eF("baseAmountIn"),eF("quoteAmountIn"),eF("fixedSide")]),a=iU.alloc(e.span);e.encode({instruction:3,baseAmountIn:J(r),quoteAmountIn:J(i),fixedSide:J("base"===o?0:1)},a);let u=[R(l.H_,!1),B(t.id,!1),R(t.authority,!1),R(t.openOrders,!1),B(t.targetOrders,!1),B(t.lpMint,!1),B(t.baseVault,!1),B(t.quoteVault,!1)];return 5===s&&u.push(B(iP,!1)),u.push(R(t.marketId,!1),B(n.baseTokenAccount,!1),B(n.quoteTokenAccount,!1),B(n.lpTokenAccount,!1),R(n.owner,!0),R(t.marketEventQueue,!1)),{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:t.programId,keys:u,data:a})],signers:[],lookupTableAddress:[t.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[4===s?ne.ammV4AddLiquidity:ne.ammV5AddLiquidity]}}}return iD.throwArgumentError("invalid version","poolKeys.version",s)}static async makeAddLiquidityInstructionSimple(e){let{connection:t,poolKeys:n,userKeys:r,amountInA:i,amountInB:o,fixedSide:s,config:a,makeTxVersion:u,lookupTableCache:c,computeBudgetConfig:d}=e,{lpMint:m}=n,{tokenAccounts:f,owner:p,payer:h=p}=r;iD.debug("amountInA:",i),iD.debug("amountInB:",o),iD.assertArgument(!i.isZero()&&!o.isZero(),"amounts must greater than zero","amountInA & amountInB",{amountInA:i.toFixed(),amountInB:o.toFixed()});let{bypassAssociatedCheck:g,checkCreateATAOwner:w}={bypassAssociatedCheck:!1,checkCreateATAOwner:!1,...a},y=i instanceof eA?i.token:eo.WSOL,b=o instanceof eA?o.token:eo.WSOL,A=this._selectTokenAccount({programId:l.H_,tokenAccounts:f,mint:y.mint,owner:p,config:{associatedOnly:!1}}),S=this._selectTokenAccount({programId:l.H_,tokenAccounts:f,mint:b.mint,owner:p,config:{associatedOnly:!1}});iD.assertArgument(!!A||!!S,"cannot found target token accounts","tokenAccounts",f);let k=this._selectTokenAccount({programId:l.H_,tokenAccounts:f,mint:m,owner:p}),I=[y,b],T=[A,S],v=[i.raw,o.raw],[E]=this._getAmountsSide(i,o,n),P="base";if("quote"===E){if(I.reverse(),T.reverse(),v.reverse(),"a"===s)P="quote";else{if("b"!==s)return iD.throwArgumentError("invalid fixedSide","fixedSide",s);P="base"}}else if("base"!==E)return iD.throwArgumentError("invalid fixedSide","fixedSide",s);else if("a"===s)P="base";else{if("b"!==s)return iD.throwArgumentError("invalid fixedSide","fixedSide",s);P="quote"}let[L,C]=I,[O,x]=T,[B,R]=v,U=[],D=[],_=[],q=[],N=[],V=await this._handleTokenAccount({programId:l.H_,connection:t,side:"in",amount:B,mint:L.mint,tokenAccount:O,owner:p,payer:h,frontInstructions:U,endInstructions:D,signers:N,bypassAssociatedCheck:g,frontInstructionsType:_,endInstructionsType:q,checkCreateATAOwner:w}),M=await this._handleTokenAccount({programId:l.H_,connection:t,side:"in",amount:R,mint:C.mint,tokenAccount:x,owner:p,payer:h,frontInstructions:U,endInstructions:D,signers:N,bypassAssociatedCheck:g,frontInstructionsType:_,endInstructionsType:q,checkCreateATAOwner:w}),F=await this._handleTokenAccount({programId:l.H_,connection:t,side:"out",amount:0,mint:m,tokenAccount:k,owner:p,payer:h,frontInstructions:U,endInstructions:D,signers:N,bypassAssociatedCheck:g,frontInstructionsType:_,endInstructionsType:q,checkCreateATAOwner:w}),W=this.makeAddLiquidityInstruction({poolKeys:n,userKeys:{baseTokenAccount:V,quoteTokenAccount:M,lpTokenAccount:F,owner:p},baseAmountIn:B,quoteAmountIn:R,fixedSide:P});return{address:{lpTokenAccount:F},innerTransactions:await K({connection:t,makeTxVersion:u,computeBudgetConfig:d,payer:h,innerTransaction:[{instructionTypes:_,instructions:U,signers:N},W.innerTransaction,{instructionTypes:q,instructions:D,signers:[]}],lookupTableCache:c})}}static makeRemoveLiquidityInstruction(e){let{poolKeys:t,userKeys:n,amountIn:r}=e,{version:i}=t;if(4===i||5===i){let e=eZ([eV("instruction"),eF("amountIn")]),o=iU.alloc(e.span);e.encode({instruction:4,amountIn:J(r)},o);let s=[R(l.H_,!1),B(t.id,!1),R(t.authority,!1),B(t.openOrders,!1),B(t.targetOrders,!1),B(t.lpMint,!1),B(t.baseVault,!1),B(t.quoteVault,!1)];return 5===i?s.push(B(iP,!1)):(s.push(B(t.withdrawQueue,!1)),s.push(B(t.lpVault,!1))),s.push(R(t.marketProgramId,!1),B(t.marketId,!1),B(t.marketBaseVault,!1),B(t.marketQuoteVault,!1),R(t.marketAuthority,!1),B(n.lpTokenAccount,!1),B(n.baseTokenAccount,!1),B(n.quoteTokenAccount,!1),R(n.owner,!0),B(t.marketEventQueue,!1),B(t.marketBids,!1),B(t.marketAsks,!1)),{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:t.programId,keys:s,data:o})],signers:[],lookupTableAddress:[t.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[4===i?ne.ammV4RemoveLiquidity:ne.ammV5RemoveLiquidity]}}}return iD.throwArgumentError("invalid version","poolKeys.version",i)}static async makeRemoveLiquidityInstructionSimple(e){let{connection:t,poolKeys:n,userKeys:r,amountIn:i,config:o,makeTxVersion:s,lookupTableCache:a,computeBudgetConfig:u}=e,{baseMint:c,quoteMint:d,lpMint:m}=n,{tokenAccounts:f,owner:p,payer:h=p}=r;iD.debug("amountIn:",i),iD.assertArgument(!i.isZero(),"amount must greater than zero","amountIn",i.toFixed()),iD.assertArgument(i instanceof eA&&i.token.mint.equals(m),"amountIn's token not match lpMint","amountIn",i);let g=this._selectTokenAccount({programId:l.H_,tokenAccounts:f,mint:m,owner:p,config:{associatedOnly:!1}});if(!g)return iD.throwArgumentError("cannot found lpTokenAccount","tokenAccounts",f);let w=this._selectTokenAccount({programId:l.H_,tokenAccounts:f,mint:c,owner:p}),y=this._selectTokenAccount({programId:l.H_,tokenAccounts:f,mint:d,owner:p}),{bypassAssociatedCheck:b,checkCreateATAOwner:A}={bypassAssociatedCheck:!1,checkCreateATAOwner:!1,...o},S=[],k=[],I=[],T=[],v=await this._handleTokenAccount({programId:l.H_,connection:t,side:"out",amount:0,mint:c,tokenAccount:w,owner:p,payer:h,frontInstructions:S,endInstructions:k,signers:T,bypassAssociatedCheck:b,frontInstructionsType:I,checkCreateATAOwner:A}),E=await this._handleTokenAccount({programId:l.H_,connection:t,side:"out",amount:0,mint:d,tokenAccount:y,owner:p,payer:h,frontInstructions:S,endInstructions:k,signers:T,bypassAssociatedCheck:b,frontInstructionsType:I,checkCreateATAOwner:A}),P=this.makeRemoveLiquidityInstruction({poolKeys:n,userKeys:{lpTokenAccount:g,baseTokenAccount:v,quoteTokenAccount:E,owner:p},amountIn:i.raw});return{address:{lpTokenAccount:g},innerTransactions:await K({connection:t,makeTxVersion:s,computeBudgetConfig:u,payer:h,innerTransaction:[{instructionTypes:I,instructions:S,signers:T},P.innerTransaction,{instructionTypes:[],instructions:k,signers:[]}],lookupTableCache:a})}}static makeSwapInstruction(e){let{poolKeys:t,userKeys:n,amountIn:r,amountOut:i,fixedSide:o}=e,{version:s}=t;return 4===s||5===s?"in"===o?this.makeSwapFixedInInstruction({poolKeys:t,userKeys:n,amountIn:r,minAmountOut:i},s):"out"===o?this.makeSwapFixedOutInstruction({poolKeys:t,userKeys:n,maxAmountIn:r,amountOut:i},s):iD.throwArgumentError("invalid params","params",e):iD.throwArgumentError("invalid version","poolKeys.version",s)}static makeSwapFixedInInstruction({poolKeys:e,userKeys:t,amountIn:n,minAmountOut:r},i){let o=eZ([eV("instruction"),eF("amountIn"),eF("minAmountOut")]),s=iU.alloc(o.span);o.encode({instruction:9,amountIn:J(n),minAmountOut:J(r)},s);let a=[R(l.H_,!1),B(e.id,!1),R(e.authority,!1),B(e.openOrders,!1)];return 4===i&&a.push(B(e.targetOrders,!1)),a.push(B(e.baseVault,!1),B(e.quoteVault,!1)),5===i&&a.push(B(iP,!1)),a.push(R(e.marketProgramId,!1),B(e.marketId,!1),B(e.marketBids,!1),B(e.marketAsks,!1),B(e.marketEventQueue,!1),B(e.marketBaseVault,!1),B(e.marketQuoteVault,!1),R(e.marketAuthority,!1),B(t.tokenAccountIn,!1),B(t.tokenAccountOut,!1),R(t.owner,!0)),{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:a,data:s})],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[4===i?ne.ammV4SwapBaseIn:ne.ammV5SwapBaseIn]}}}static makeSwapFixedOutInstruction({poolKeys:e,userKeys:t,maxAmountIn:n,amountOut:r},i){let o=eZ([eV("instruction"),eF("maxAmountIn"),eF("amountOut")]),s=iU.alloc(o.span);o.encode({instruction:11,maxAmountIn:J(n),amountOut:J(r)},s);let a=[R(l.H_,!1),B(e.id,!1),R(e.authority,!1),B(e.openOrders,!1),B(e.targetOrders,!1),B(e.baseVault,!1),B(e.quoteVault,!1)];return 5===i&&a.push(B(iP,!1)),a.push(R(e.marketProgramId,!1),B(e.marketId,!1),B(e.marketBids,!1),B(e.marketAsks,!1),B(e.marketEventQueue,!1),B(e.marketBaseVault,!1),B(e.marketQuoteVault,!1),R(e.marketAuthority,!1),B(t.tokenAccountIn,!1),B(t.tokenAccountOut,!1),R(t.owner,!0)),{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:a,data:s})],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[4===i?ne.ammV4SwapBaseOut:ne.ammV5SwapBaseOut]}}}static async makeSwapInstructionSimple(e){let{connection:t,poolKeys:n,userKeys:r,amountIn:i,amountOut:o,fixedSide:s,config:a,makeTxVersion:u,lookupTableCache:c,computeBudgetConfig:d}=e,{tokenAccounts:m,owner:f,payer:p=f}=r;iD.debug("amountIn:",i),iD.debug("amountOut:",o),iD.assertArgument(!i.isZero()&&!o.isZero(),"amounts must greater than zero","currencyAmounts",{amountIn:i.toFixed(),amountOut:o.toFixed()});let{bypassAssociatedCheck:h,checkCreateATAOwner:g}={bypassAssociatedCheck:!1,checkCreateATAOwner:!1,...a},w=i instanceof eA?i.token:eo.WSOL,y=o instanceof eA?o.token:eo.WSOL,b=this._selectTokenAccount({programId:l.H_,tokenAccounts:m,mint:w.mint,owner:f,config:{associatedOnly:!1}}),A=this._selectTokenAccount({programId:l.H_,tokenAccounts:m,mint:y.mint,owner:f}),[S,k]=[i.raw,o.raw],I=[],T=[],v=[],E=[],P=await this._handleTokenAccount({programId:l.H_,connection:t,side:"in",amount:S,mint:w.mint,tokenAccount:b,owner:f,payer:p,frontInstructions:I,endInstructions:T,signers:E,bypassAssociatedCheck:h,frontInstructionsType:v,checkCreateATAOwner:g}),L=await this._handleTokenAccount({programId:l.H_,connection:t,side:"out",amount:0,mint:y.mint,tokenAccount:A,owner:f,payer:p,frontInstructions:I,endInstructions:T,signers:E,bypassAssociatedCheck:h,frontInstructionsType:v,checkCreateATAOwner:g}),C=this.makeSwapInstruction({poolKeys:n,userKeys:{tokenAccountIn:P,tokenAccountOut:L,owner:f},amountIn:S,amountOut:k,fixedSide:s});return{address:{},innerTransactions:await K({connection:t,makeTxVersion:u,computeBudgetConfig:d,payer:p,innerTransaction:[{instructionTypes:v,instructions:I,signers:E},C.innerTransaction,{instructionTypes:[],instructions:T,signers:[]}],lookupTableCache:c})}}static makeSimulatePoolInfoInstruction({poolKeys:e}){let t=eZ([eV("instruction"),eV("simulateType")]),n=iU.alloc(t.span);t.encode({instruction:12,simulateType:0},n);let r=[R(e.id,!1),R(e.authority,!1),R(e.openOrders,!1),R(e.baseVault,!1),R(e.quoteVault,!1),R(e.lpMint,!1),R(e.marketId,!1),R(e.marketEventQueue,!1)];return{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({programId:e.programId,keys:r,data:n})],signers:[],lookupTableAddress:[e.lookupTableAccount].filter(e=>e&&!e.equals(m.PublicKey.default)),instructionTypes:[4===e.version?ne.ammV4SimulatePoolInfo:ne.ammV5SimulatePoolInfo]}}}static isV4(e){return void 0!==e.withdrawQueue}static async makeCreatePoolV4InstructionV2Simple({connection:e,programId:t,marketInfo:n,baseMintInfo:r,quoteMintInfo:i,baseAmount:o,quoteAmount:s,startTime:u,ownerInfo:c,associatedOnly:d=!1,computeBudgetConfig:m,checkCreateATAOwner:f=!1,makeTxVersion:p,lookupTableCache:h,feeDestinationId:g}){let w=[],y=[],b=[],A=[],S=[],k=c.useSOLBalance&&r.mint.equals(eo.WSOL.mint),I=c.useSOLBalance&&i.mint.equals(eo.WSOL.mint),T=await this._selectOrCreateTokenAccount({programId:l.H_,mint:r.mint,tokenAccounts:k?[]:c.tokenAccounts,owner:c.wallet,createInfo:k?{connection:e,payer:c.feePayer,amount:o,frontInstructions:w,frontInstructionsType:b,endInstructions:k?y:[],endInstructionsType:k?A:[],signers:S}:void 0,associatedOnly:!k&&d,checkCreateATAOwner:f}),v=await this._selectOrCreateTokenAccount({programId:l.H_,mint:i.mint,tokenAccounts:I?[]:c.tokenAccounts,owner:c.wallet,createInfo:I?{connection:e,payer:c.feePayer,amount:s,frontInstructions:w,frontInstructionsType:b,endInstructions:I?y:[],endInstructionsType:I?A:[],signers:S}:void 0,associatedOnly:!I&&d,checkCreateATAOwner:f});if(void 0===T||void 0===v)throw Error("you don't has some token account");let E=a.getAssociatedPoolKeys({version:4,marketVersion:3,marketId:n.marketId,baseMint:r.mint,quoteMint:i.mint,baseDecimals:r.decimals,quoteDecimals:i.decimals,programId:t,marketProgramId:n.programId}),P=this.makeCreatePoolV4InstructionV2({programId:t,ammId:E.id,ammAuthority:E.authority,ammOpenOrders:E.openOrders,lpMint:E.lpMint,coinMint:E.baseMint,pcMint:E.quoteMint,coinVault:E.baseVault,pcVault:E.quoteVault,ammTargetOrders:E.targetOrders,marketProgramId:E.marketProgramId,marketId:E.marketId,userWallet:c.wallet,userCoinVault:T,userPcVault:v,userLpVault:tr(c.wallet,E.lpMint,l.H_).publicKey,ammConfigId:E.configId,feeDestinationId:g,nonce:E.nonce,openTime:u,coinAmount:o,pcAmount:s}).innerTransaction;return{address:{programId:t,ammId:E.id,ammAuthority:E.authority,ammOpenOrders:E.openOrders,lpMint:E.lpMint,coinMint:E.baseMint,pcMint:E.quoteMint,coinVault:E.baseVault,pcVault:E.quoteVault,withdrawQueue:E.withdrawQueue,ammTargetOrders:E.targetOrders,poolTempLp:E.lpVault,marketProgramId:E.marketProgramId,marketId:E.marketId},innerTransactions:await K({connection:e,makeTxVersion:p,computeBudgetConfig:m,payer:c.feePayer,innerTransaction:[{instructionTypes:b,instructions:w,signers:S},P,{instructionTypes:A,instructions:y,signers:[]}],lookupTableCache:h})}}static makeCreatePoolV4InstructionV2({programId:e,ammId:t,ammAuthority:n,ammOpenOrders:r,lpMint:i,coinMint:o,pcMint:s,coinVault:a,pcVault:u,ammTargetOrders:c,marketProgramId:d,marketId:f,userWallet:p,userCoinVault:h,userPcVault:g,userLpVault:w,nonce:y,openTime:b,coinAmount:A,pcAmount:S,lookupTableAddress:k,ammConfigId:I,feeDestinationId:T}){let E=eZ([eV("instruction"),eV("nonce"),eF("openTime"),eF("pcAmount"),eF("coinAmount")]),L=[{pubkey:l.H_,isSigner:!1,isWritable:!1},{pubkey:l._u,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:I,isSigner:!1,isWritable:!1},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!0,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0}],C=iU.alloc(E.span);return E.encode({instruction:1,nonce:y,openTime:b,coinAmount:A,pcAmount:S},C),{address:{},innerTransaction:{instructions:[new m.TransactionInstruction({keys:L,programId:e,data:C})],signers:[],lookupTableAddress:k?[k]:void 0,instructionTypes:[ne.ammV4CreatePoolV2]}}}static async makeRemoveAllLpAndCreateClmmPosition({connection:e,poolKeys:t,removeLpAmount:n,userKeys:r,clmmPoolKeys:i,createPositionInfo:o,farmInfo:s,computeBudgetConfig:a,checkCreateATAOwner:u=!1,getEphemeralSigners:c,makeTxVersion:d,lookupTableCache:m}){if(!(t.baseMint.equals(i.mintA.mint)||t.baseMint.equals(i.mintB.mint))||!(t.quoteMint.equals(i.mintA.mint)||t.quoteMint.equals(i.mintB.mint)))throw Error("mint check error");let f=[],p=[],g=[],w=[],y=[],b={};for(let e of r.tokenAccounts)(void 0===b[e.accountInfo.mint.toString()]||tr(r.owner,e.accountInfo.mint,l.H_).publicKey.equals(e.pubkey))&&(b[e.accountInfo.mint.toString()]=e.pubkey);let A=b[t.lpMint.toString()];if(void 0===A)throw Error("find lp account error in trade accounts");let S=n.add(s?.amount??new(h())(0)),k=t.baseMint.equals(eo.WSOL.mint),I=t.quoteMint.equals(eo.WSOL.mint),T=await this._selectOrCreateTokenAccount({programId:l.H_,mint:t.baseMint,tokenAccounts:r.tokenAccounts,owner:r.owner,createInfo:{connection:e,payer:r.payer??r.owner,frontInstructions:f,frontInstructionsType:g,endInstructions:k?p:[],endInstructionsType:k?w:[],signers:y},associatedOnly:!0,checkCreateATAOwner:u}),v=await this._selectOrCreateTokenAccount({programId:l.H_,mint:t.quoteMint,tokenAccounts:r.tokenAccounts,owner:r.owner,createInfo:{connection:e,payer:r.payer??r.owner,amount:0,frontInstructions:f,frontInstructionsType:g,endInstructions:I?p:[],endInstructionsType:I?w:[],signers:y},associatedOnly:!0,checkCreateATAOwner:u});b[t.baseMint.toString()]=T,b[t.quoteMint.toString()]=v;let E=this.makeRemoveLiquidityInstruction({poolKeys:t,userKeys:{lpTokenAccount:A,baseTokenAccount:T,quoteTokenAccount:v,owner:r.owner},amountIn:S}),[P,L]=t.baseMint.equals(i.mintA.mint)?[T,v]:[v,T],C=await iw.makeOpenPositionFromLiquidityInstructions({poolInfo:i,ownerInfo:{feePayer:r.payer??r.owner,wallet:r.owner,tokenAccountA:P,tokenAccountB:L},withMetadata:"create",...o,getEphemeralSigners:c}),O={instructions:[],signers:[],instructionTypes:[]};if(void 0!==s){let t=[];for(let n of s.poolKeys.rewardInfos){let i=n.rewardMint.equals(eo.WSOL.mint);t.push(b[n.rewardMint.toString()]??await this._selectOrCreateTokenAccount({programId:l.H_,mint:n.rewardMint,tokenAccounts:r.tokenAccounts,owner:r.owner,createInfo:{connection:e,payer:r.payer??r.owner,frontInstructions:f,frontInstructionsType:g,endInstructions:i?p:[],endInstructionsType:i?w:[],signers:y},associatedOnly:!0,checkCreateATAOwner:u}))}O=tz.makeWithdrawInstruction({poolKeys:s.poolKeys,amount:s.amount,userKeys:{ledger:tz.getAssociatedLedgerAccount({programId:s.poolKeys.programId,poolId:s.poolKeys.id,owner:r.owner,version:s.poolKeys.version}),lpTokenAccount:A,rewardTokenAccounts:t,owner:r.owner}}).innerTransaction}return{address:{...E.address,...C.address},innerTransactions:await K({connection:e,makeTxVersion:d,computeBudgetConfig:a,payer:r.payer??r.owner,innerTransaction:[{instructionTypes:g,instructions:f,signers:y},O,E.innerTransaction,C.innerTransaction,{instructionTypes:w,instructions:p,signers:[]}],lookupTableCache:m})}}static async fetchAllPoolKeys(e,t,n){let r=(await Promise.all(Object.entries(tQ).map(([n,r])=>{try{return e.getProgramAccounts(t[Number(n)],{filters:[{dataSize:r.span}]}).then(e=>e.map(e=>({id:e.pubkey,version:Number(n),programId:t[Number(n)],...r.decode(e.account.data)})))}catch(e){if(e instanceof Error)return iD.throwError("failed to fetch pool info",I.errors.RPC_ERROR,{message:e.message})}}))).flat(),i=r.map(e=>e.marketId),o={};try{for(let t of(await q(e,i,n))){if(null===t)continue;let e={programId:t.owner,...ik.decode(t.data)};o[e.ownAddress.toString()]=e}}catch(e){if(e instanceof Error)return iD.throwError("failed to fetch markets",I.errors.RPC_ERROR,{message:e.message})}let s={};for(let[e,n]of Object.entries(t))s[e]=this.getAssociatedAuthority({programId:n}).publicKey;let a=[];for(let e of r){if(void 0===e||e.baseMint.equals(m.PublicKey.default))continue;let t=o[e.marketId.toString()],n=t.programId;a.push({id:e.id,baseMint:e.baseMint,quoteMint:e.quoteMint,lpMint:e.lpMint,baseDecimals:e.baseDecimal.toNumber(),quoteDecimals:e.quoteDecimal.toNumber(),lpDecimals:"6kmMMacvoCKBkBrqssLEdFuEZu2wqtLdNQxh9VjtzfwT"===e.id.toString()?5:e.baseDecimal.toNumber(),version:e.version,programId:e.programId,authority:s[e.version],openOrders:e.openOrders,targetOrders:e.targetOrders,baseVault:e.baseVault,quoteVault:e.quoteVault,marketVersion:3,marketProgramId:n,marketId:t.ownAddress,marketAuthority:iE.getAssociatedAuthority({programId:n,marketId:t.ownAddress}).publicKey,marketBaseVault:t.baseVault,marketQuoteVault:t.quoteVault,marketBids:t.bids,marketAsks:t.asks,marketEventQueue:t.eventQueue,...5===e.version?{modelDataAccount:e.modelDataAccount,withdrawQueue:m.PublicKey.default,lpVault:m.PublicKey.default}:{withdrawQueue:e.withdrawQueue,lpVault:e.lpVault},lookupTableAccount:m.PublicKey.default})}return a}static async fetchInfo({connection:e,poolKeys:t}){let n=await this.fetchMultipleInfo({connection:e,pools:[t]});return iD.assertArgument(1===n.length,`fetchInfo failed, ${n.length} pools found`,"poolKeys.id",t.id),n[0]}static async fetchMultipleInfo({connection:e,pools:t,config:n}){await iq(e);let r=t.map(e=>this.makeSimulatePoolInfoInstruction({poolKeys:e}));return(await M(e,r.map(e=>e.innerTransaction.instructions).flat(),"GetPoolData")).map(e=>{let t=function(e,t){let n=e.match(/{["\w:,]+}/g);return n&&1===n.length?n[0]:_.throwArgumentError("simulate log fail to match json","keyword",t)}(e,"GetPoolData"),n=new(h())(F(t,"status")),r=Number(F(t,"coin_decimals")),i=Number(F(t,"pc_decimals")),o=Number(F(t,"lp_decimals")),s=new(h())(F(t,"pool_coin_amount")),a=new(h())(F(t,"pool_pc_amount")),u=new(h())(F(t,"pool_lp_supply")),c="0";try{c=F(t,"pool_open_time")}catch(e){}return{status:n,baseDecimals:r,quoteDecimals:i,lpDecimals:o,baseReserve:s,quoteReserve:a,lpSupply:u,startTime:new(h())(c)}})}static getEnabledFeatures(e){let{status:t}=e,n=t.toNumber();if(n===u.Uninitialized)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};if(n===u.Initialized)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n===u.Disabled)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};{if(n===u.RemoveLiquidityOnly)return{swap:!1,addLiquidity:!1,removeLiquidity:!0};if(n===u.LiquidityOnly||n===u.OrderBook)return{swap:!1,addLiquidity:!0,removeLiquidity:!0};if(n===u.Swap)return{swap:!0,addLiquidity:!0,removeLiquidity:!0};if(n!==u.WaitingForStart)return{swap:!1,addLiquidity:!1,removeLiquidity:!1};let{startTime:t}=e;return Date.now()/1e3<t.toNumber()?{swap:!1,addLiquidity:!0,removeLiquidity:!0}:{swap:!0,addLiquidity:!0,removeLiquidity:!0}}}static includesToken(e,t){let{baseMint:n,quoteMint:r}=t;return e.mint.equals(n)||e.mint.equals(r)}static _getTokenSide(e,t){let{baseMint:n,quoteMint:r}=t;return e.mint.equals(n)?"base":e.mint.equals(r)?"quote":iD.throwArgumentError("token not match with pool","params",{token:e.mint,baseMint:n,quoteMint:r})}static _getTokensSide(e,t,n){let{baseMint:r,quoteMint:i}=n,o=this._getTokenSide(e,n),s=this._getTokenSide(t,n);return iD.assertArgument(o!==s,"tokens not match with pool","params",{tokenA:e.mint,tokenB:t.mint,baseMint:r,quoteMint:i}),[o,s]}static _getAmountSide(e,t){let n=e instanceof eA?e.token:eo.WSOL;return this._getTokenSide(n,t)}static _getAmountsSide(e,t,n){let r=e instanceof eA?e.token:eo.WSOL,i=t instanceof eA?t.token:eo.WSOL;return this._getTokensSide(r,i,n)}static computeAnotherAmount({poolKeys:e,poolInfo:t,amount:n,anotherCurrency:r,slippage:i}){let{baseReserve:o,quoteReserve:s}=t;iD.debug("baseReserve:",o.toString()),iD.debug("quoteReserve:",s.toString());let a=n instanceof eA?n.token:n.currency;iD.debug("currencyIn:",a),iD.debug("amount:",n.toFixed()),iD.debug("anotherCurrency:",r),iD.debug("slippage:",`${i.toSignificant()}%`);let u=this._getAmountSide(n,e);iD.debug("input side:",u);let c=X;n.isZero()||(c="base"===u?$(n.raw.mul(s),o):$(n.raw.mul(o),s));let l=$(n.raw.mul(t.lpSupply),"base"===u?t.baseReserve:t.quoteReserve),d=new ek(z).add(i).mul(c).quotient,m=r instanceof eo?new eA(r,c):new eb(r,c),f=r instanceof eo?new eA(r,d):new eb(r,d);return iD.debug("anotheAmount:",m.toFixed()),iD.debug("maxAnotheAmount:",f.toFixed()),{anotherAmount:m,maxAnotherAmount:f,liquidity:l}}static _computePriceImpact(e,t,n){let r=e.raw.mul(t),i=r.sub(n).div(r);return new ek(i.numerator,i.denominator)}static getRate(e){let{baseReserve:t,quoteReserve:n,baseDecimals:r,quoteDecimals:i}=e;return new eT(new ei(r),t,new ei(i),n)}static computeAmountIn({poolKeys:e,poolInfo:t,amountOut:n,currencyIn:r,slippage:i}){let{baseReserve:o,quoteReserve:s}=t;iD.debug("baseReserve:",o.toString()),iD.debug("quoteReserve:",s.toString());let a=n instanceof eA?n.token:n.currency;iD.debug("currencyOut:",a),iD.debug("amountOut:",n.toFixed()),iD.debug("currencyIn:",r),iD.debug("slippage:",`${i.toSignificant()}%`);let u=[o,s],c=this._getAmountSide(n,e);"base"===c&&u.reverse(),iD.debug("output side:",c);let[l,d]=u,m=new eT(r,l,a,d);iD.debug("currentPrice:",`1 ${r.symbol}  ${m.toFixed()} ${a.symbol}`),iD.debug("currentPrice invert:",`1 ${a.symbol}  ${m.invert().toFixed()} ${r.symbol}`);let f=X,p=n.raw;if(!p.isZero()){p.gt(d)&&(p=d.sub(z));let e=d.sub(p);f=l.mul(p).div(e).mul(iV).div(iV.sub(iN))}let h=new ek(z).add(i).mul(f).quotient,g=r instanceof eo?new eA(r,f):new eb(r,f),w=r instanceof eo?new eA(r,h):new eb(r,h);iD.debug("amountIn:",g.toFixed()),iD.debug("maxAmountIn:",w.toFixed());let y=null;f.isZero()||p.isZero()||(y=new eT(r,f,a,p),iD.debug("executionPrice:",`1 ${r.symbol}  ${y.toFixed()} ${a.symbol}`),iD.debug("executionPrice invert:",`1 ${a.symbol}  ${y.invert().toFixed()} ${r.symbol}`));let b=this._computePriceImpact(m,f,p);return iD.debug("priceImpact:",`${b.toSignificant()}%`),{amountIn:g,maxAmountIn:w,currentPrice:m,executionPrice:y,priceImpact:b}}}a=iM,iM.computeAmountOut=({poolKeys:e,poolInfo:t,amountIn:n,currencyOut:r,slippage:i})=>{let o;let s=n instanceof eA?n.token:eo.WSOL,u=r instanceof eo?r:eo.WSOL;iD.assertArgument(a.includesToken(s,e)&&a.includesToken(u,e),"token not match with pool","poolKeys",{poolKeys:e,tokenIn:s,tokenOut:u});let{baseReserve:c,quoteReserve:l}=t;iD.debug("baseReserve:",c.toString()),iD.debug("quoteReserve:",l.toString());let d=n instanceof eA?n.token:n.currency;iD.debug("currencyIn:",d),iD.debug("amountIn:",n.toFixed()),iD.debug("currencyOut:",r),iD.debug("slippage:",`${i.toSignificant()}%`);let m=[c,l],f=a._getAmountSide(n,e);"quote"===f&&m.reverse(),iD.debug("input side:",f);let[p,g]=m;if(4===e.version)o=new eT(d,p,r,g);else{let e=function(e,t,n,r){let i=function(e,t){let n=iR(e,t,0,!1);return n[3]?n[0]:0}(e,ix(e,t,iO(e,t,n)))/e.multiplier;return r?i:1/i}(i_,c.toNumber(),l.toNumber(),!1);o="quote"===f?new eT(d,new(h())(1e6*e),r,new(h())(1e6)):new eT(d,new(h())(1e6),r,new(h())(1e6*e))}iD.debug("currentPrice:",`1 ${d.symbol}  ${o.toFixed()} ${r.symbol}`),iD.debug("currentPrice invert:",`1 ${r.symbol}  ${o.invert().toFixed()} ${d.symbol}`);let w=n.raw,y=X,b=X;if(!w.isZero()){if(4===e.version){b=tg(w.mul(iN),iV);let e=w.sub(b),t=p.add(e);y=g.mul(e).div(t)}else{b=w.mul(new(h())(2)).div(new(h())(1e4));let e=w.sub(b);y=new(h())("quote"===f?function(e,t,n,r){let i=iO(e,t,n),o=ix(e,t,i),s=ix(e,n,i),a=ix(e,r,i),[u,c,l,d]=iR(e,o,a,!0);return d?l?r*e.multiplier/u:iB(e,s-c,i):0}(i_,l.toNumber(),c.toNumber(),e.toNumber()):function(e,t,n,r){let i=iO(e,t,n),o=ix(e,t,i),s=ix(e,n,i),a=ix(e,r,i),[u,c,l,d]=function(e,t,n,r){let i=r?t-n:t+n,[o,s,a]=function(e,t){let[n,r]=[0,49998],i=n,o=r,s=0;for(;i<=o&&!((s=Math.floor((o+i)/2))<=0)&&!(s>=49998);){let n=e.DataElement[s].y,r=e.DataElement[s-1].y,a=e.DataElement[s+1].y;if(t===n)return[s,s,!0];if(t===r)return[s-1,s-1,!0];if(t===a)return[s+1,s+1,!0];if(t<a)i=s+1;else{if(t<r&&t>n)return[s-1,s,!0];if(t<n&&t>a)return[s,s+1,!0];o=s-1}}return[s,s,!1]}(e,i);if(!a)return[0,0,!1,a];if(o===s)return[e.DataElement[s].price,e.DataElement[s].x,!1,a];{let n=e.DataElement[o].x,u=e.DataElement[s].x,c=e.DataElement[o].price,l=e.DataElement[s].price,d=e.DataElement[o].y,m=e.DataElement[s].y;if(t>=m&&t<=d)return r?[l,u,!0,a]:[c,n,!0,a];{let o,s;return r?(o=c+(l-c)*(d-t)/(d-m),s=n+l*(d-i)/e.multiplier):(o=c+(l-c)*(d-t)/(d-m),s=u-c*(i-m)/e.multiplier),[o,s,!1,a]}}}(e,s,a,!1);return d?l?r*u/e.multiplier:iB(e,o-c,i):0}(i_,l.toNumber(),c.toNumber(),e.toNumber()))}}let A=new ek(z).add(i).invert().mul(y).quotient,S=r instanceof eo?new eA(r,y):new eb(r,y),k=r instanceof eo?new eA(r,A):new eb(r,A);iD.debug("amountOut:",S.toFixed()),iD.debug("minAmountOut:",k.toFixed());let I=new eT(d,w.sub(b),r,y);w.isZero()||y.isZero()||(I=new eT(d,w.sub(b),r,y),iD.debug("executionPrice:",`1 ${d.symbol}  ${I.toFixed()} ${r.symbol}`),iD.debug("executionPrice invert:",`1 ${r.symbol}  ${I.invert().toFixed()} ${d.symbol}`));let T=I.denominator.mul(o.numerator),v=new ek(I.numerator.mul(o.denominator).sub(T).abs(),T);return iD.debug("priceImpact:",`${v.toSignificant()}%`),{amountOut:S,minAmountOut:k,currentPrice:o,executionPrice:I,priceImpact:v,fee:d instanceof eo?new eA(d,b):new eb(d,b)}};let iF={SERUM_MARKET:new m.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),OPENBOOK_MARKET:new m.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX"),UTIL1216:new m.PublicKey("CLaimxFqjHzgTJtAGHU47NPhg6qrc5sCnpC4tBLyABQS"),FarmV3:new m.PublicKey("EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q"),FarmV5:new m.PublicKey("9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z"),FarmV6:new m.PublicKey("FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG"),AmmV4:new m.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),AmmStable:new m.PublicKey("5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h"),CLMM:new m.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),Router:new m.PublicKey("routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS")};m.PublicKey.default,new m.PublicKey("EoTcMgcDRTJVZDMZWBoU6rhYHZfkNTVEAfz3uUJRcYGj"),m.PublicKey.default,new m.PublicKey("85BFyr98MbCUU9MVTEgzx1nbhWACbJqLzho6zd6DZcWL"),new m.PublicKey("EcLzTrNg9V7qhcdyXDe2qjtPkiGzDM2UbdRaeaadU5r2"),new m.PublicKey("Farm2hJLcqPtPg8M4rR6DMrsRNc5TPm5Cs4bVQrMe2T7"),new m.PublicKey("HWy1jotHpo6UqeQxx49dpYYdQB8wj9Qk9MdxwjLvDHB8"),new m.PublicKey("DDg4VmQaJV9ogWce7LpcjBA9bv22wRp5uaTPa5pGjijF"),new m.PublicKey("devi51mZmdwUJGU9hjN27vEz64Gps7uUefqxg27EAtH"),new m.PublicKey("BVChZ3XFEwTMUk1o9i3HAf91H6mFxSwa5X2wFAWhYPhU"),n(23663).Buffer,n(23663).Buffer,eZ([eU(5),function(e="accountFlags"){let t=new eN(e);return t.addBoolean("initialized"),t.addBoolean("market"),t.addBoolean("openOrders"),t.addBoolean("requestQueue"),t.addBoolean("eventQueue"),t.addBoolean("bids"),t.addBoolean("asks"),t}("accountFlags"),eY("ownAddress"),eF("vaultSignerNonce"),eY("baseMint"),eY("quoteMint"),eY("baseVault"),eF("baseDepositsTotal"),eF("baseFeesAccrued"),eY("quoteVault"),eF("quoteDepositsTotal"),eF("quoteFeesAccrued"),eF("quoteDustThreshold"),eY("requestQueue"),eY("eventQueue"),eY("bids"),eY("asks"),eF("baseLotSize"),eF("quoteLotSize"),eF("feeRateBps"),eF("referrerRebatesAccrued"),eU(7)]);var iW=n(23663).Buffer;class iK extends ta{static getPdaPoolId(e,t){return x([this.SEED_CONFIG.pool.id,t.toBuffer()],e)}static getPdaOwnerId(e,t,n,r){return x([this.SEED_CONFIG.owner.id,t.toBuffer(),n.toBuffer(),iW.from(new(h())(r).toArray())],e)}static async getAllInfo({connection:e,programId:t,poolIds:n,wallet:r,chainTime:i}){if(0===n.length)return[];let o=n.map(e=>this.getPdaPoolId(t,e).publicKey),s=[];for(let e=0;e<this.VERSION_PROJECT.length;e++)s.push(...o.map(n=>this.getPdaOwnerId(t,n,r,e).publicKey));let a=await q(e,[...o,...s]),u=[];for(let e=0;e<a.length;e++){let r=Math.floor(e/n.length),c=e%n.length,d=o[c],m=s[e],f=a[c],p=a[n.length+e];if(!(f&&p)||f.data.length!==this.POOL_LAYOUT.span||p.data.length!==this.OWNER_LAYOUT.span)continue;let g=this.POOL_LAYOUT.decode(f.data),w=this.OWNER_LAYOUT.decode(p.data),y=g.openTime.toNumber(),b=g.endTime.toNumber(),A=3!==w.tokenInfo.map(e=>e.debtAmount.gt(new(h())(0))).filter(e=>!e).length,S=i>y&&i<b&&1===g.status,k=A&&S;u.push({programId:t,poolId:d,ammId:g.ammId,ownerAccountId:m,snapshotLpAmount:w.lpAmount,project:this.VERSION_PROJECT[r],openTime:y,endTime:b,canClaim:k,canClaimErrorType:A?S?void 0:"outOfOperationalTime":"alreadyClaimIt",tokenInfo:g.tokenInfo.map((e,t)=>({programId:l.H_,mintAddress:e.mintAddress,mintVault:e.mintVault,mintDecimals:e.mintDecimals,perLpLoss:e.perLpLoss,debtAmount:w.tokenInfo[t].debtAmount.add(w.tokenInfo[t].claimedAmount)}))})}return u}static async makeClaimInstructionSimple({connection:e,poolInfo:t,ownerInfo:n,makeTxVersion:r,lookupTableCache:i}){let o=[],s=[],a=[],u=[],c=[],l=[],d=[],m=[];for(let r of t.tokenInfo)m.push(await this._selectOrCreateTokenAccount({programId:r.programId,mint:r.mintAddress,tokenAccounts:r.mintAddress.equals(eo.WSOL.mint)?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:r.mintAddress.equals(eo.WSOL.mint)?a:[],frontInstructionsType:s,endInstructionsType:u,signers:d},associatedOnly:!r.mintAddress.equals(eo.WSOL.mint)&&n.associatedOnly,checkCreateATAOwner:n.checkCreateATAOwner}));return c.push(this.makeClaimInstruction({programId:t.programId,poolInfo:t,ownerInfo:{wallet:n.wallet,ownerPda:t.ownerAccountId,claimAddress:m}})),l.push(ne.util1216OwnerClaim),{address:{},innerTransactions:await K({connection:e,makeTxVersion:r,computeBudgetConfig:void 0,payer:n.wallet,innerTransaction:[{instructionTypes:s,instructions:o,signers:d},{instructionTypes:l,instructions:c,signers:[]},{instructionTypes:u,instructions:a,signers:[]}],lookupTableCache:i})}}static async makeClaimAllInstructionSimple({connection:e,poolInfos:t,ownerInfo:n,makeTxVersion:r,lookupTableCache:i}){let o=[],s=[],a=[],u=[],c=[],l=[],d=[],m={};for(let r of t){let t=[];for(let i of r.tokenInfo){let r=m[i.mintAddress.toString()]??await this._selectOrCreateTokenAccount({programId:i.programId,mint:i.mintAddress,tokenAccounts:i.mintAddress.equals(eo.WSOL.mint)?[]:n.tokenAccounts,owner:n.wallet,createInfo:{connection:e,payer:n.wallet,amount:0,frontInstructions:o,endInstructions:i.mintAddress.equals(eo.WSOL.mint)?a:[],frontInstructionsType:s,endInstructionsType:u,signers:d},associatedOnly:!i.mintAddress.equals(eo.WSOL.mint)&&n.associatedOnly,checkCreateATAOwner:n.checkCreateATAOwner});m[i.mintAddress.toString()]=r,t.push(r)}c.push(this.makeClaimInstruction({programId:r.programId,poolInfo:r,ownerInfo:{wallet:n.wallet,ownerPda:r.ownerAccountId,claimAddress:t}})),l.push(ne.util1216OwnerClaim)}return{address:{},innerTransactions:await K({connection:e,makeTxVersion:r,computeBudgetConfig:void 0,payer:n.wallet,innerTransaction:[{instructionTypes:s,instructions:o,signers:d},{instructionTypes:l,instructions:c,signers:[]},{instructionTypes:u,instructions:a,signers:[]}],lookupTableCache:i})}}static makeClaimInstruction({programId:e,poolInfo:t,ownerInfo:n}){let r=eZ([]),i=[{pubkey:n.wallet,isSigner:!0,isWritable:!0},{pubkey:t.poolId,isSigner:!1,isWritable:!0},{pubkey:n.ownerPda,isSigner:!1,isWritable:!0},...n.claimAddress.map(e=>({pubkey:e,isSigner:!1,isWritable:!0})),...t.tokenInfo.map(({mintVault:e})=>({pubkey:e,isSigner:!1,isWritable:!0})),{pubkey:l.H_,isSigner:!1,isWritable:!1}],o=iW.alloc(r.span);r.encode({},o);let s=iW.from([10,66,208,184,161,6,191,98,...o]);return new m.TransactionInstruction({keys:i,programId:e,data:s})}}iK.CLAIMED_NUM=3,iK.POOL_LAYOUT=eZ([eU(8),eV("bump"),eV("status"),eF("openTime"),eF("endTime"),eY("ammId"),eQ(eZ([eV("mintDecimals"),eY("mintAddress"),eY("mintVault"),eF("perLpLoss"),eF("totalClaimedAmount")]),iK.CLAIMED_NUM,"tokenInfo"),eQ(eF(),10,"padding")]),iK.OWNER_LAYOUT=eZ([eU(8),eV("bump"),eV("version"),eY("poolId"),eY("owner"),eF("lpAmount"),eQ(eZ([eY("mintAddress"),eF("debtAmount"),eF("claimedAmount")]),iK.CLAIMED_NUM,"tokenInfo"),eQ(eF(),4,"padding")]),iK.DEFAULT_POOL_ID=["58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2","6UmmUiYoBjSrhakAobJw8BvkmJtDVxaeBtbt7rxWo1mg","AVs9TA4nWDzfPJE9gGVNJMVhcQy3V9PGazuz33BfG2RA","DVa7Qmb5ct9RCpaU7UTpSaf3GVMYz17vNVU67XpdCRut","7XawhbbxtsRcQA8KTkHT9f9nc6d69UwqCDh6U5EEbEmX","6a1CsrpeZubDjEJE9s1CMVheB6HWM5d7m1cj2jkhyXhj","EoNrn8iUhwgJySD1pHu8Qxm5gSQqLK3za4m8xzD2RuEb","AceAyRTWt4PyB2pHqf2qhDgNZDtKVNaxgL8Ru3V4aN1P","6tmFJbMk5yVHFcFy7X2K8RwHjKLr6KVFLYXpgpBNeAxB"].map(e=>new m.PublicKey(e)),iK.SEED_CONFIG={pool:{id:iW.from("pool_seed","utf8")},owner:{id:iW.from("user_claim_seed","utf8")}},iK.VERSION_PROJECT=[void 0,"Francium","Tulip","Larix"]},62109:function(e,t,n){"use strict";t._O=t.Jq=t.KB=t.u8=t.cv=t.vA=t.fP=t.Ar=void 0,t.Ik=t.A9=t.pc=t.n_=t.gM=t.Xo=void 0;let r=n(23663);function i(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function o(e){return i(e),r.Buffer.from(e.buffer,e.byteOffset,e.length)}class s{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}t.Ar=s;class u extends s{isCount(){throw Error("ExternalLayout is abstract")}}class c extends u{constructor(e,t=0,n){if(!(e instanceof s))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof l||this.layout instanceof d}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}class l extends s{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readUIntLE(t,this.span)}encode(e,t,n=0){return o(t).writeUIntLE(e,n,this.span),this.span}}t.fP=l;class d extends s{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readUIntBE(t,this.span)}encode(e,t,n=0){return o(t).writeUIntBE(e,n,this.span),this.span}}class m extends s{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return o(e).readIntLE(t,this.span)}encode(e,t,n=0){return o(t).writeIntLE(e,n,this.span),this.span}}function f(e){let t=Math.floor(e/4294967296);return{hi32:t,lo32:e-4294967296*t}}function p(e,t){return 4294967296*e+t}class h extends s{constructor(e){super(8,e)}decode(e,t=0){let n=o(e),r=n.readUInt32LE(t);return p(n.readUInt32LE(t+4),r)}encode(e,t,n=0){let r=f(e),i=o(t);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}class g extends s{constructor(e){super(8,e)}decode(e,t=0){let n=o(e),r=n.readUInt32LE(t);return p(n.readInt32LE(t+4),r)}encode(e,t,n=0){let r=f(e),i=o(t);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}class w extends s{constructor(e,t,n){if(!(e instanceof s))throw TypeError("elementLayout must be a Layout");if(!(t instanceof u&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;t instanceof u||!(0<e.span)||(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof u&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i}return n}decode(e,t=0){let n=[],r=0,i=this.count;for(i instanceof u&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t,n=0){let r=this.elementLayout,i=e.reduce((e,i)=>e+r.encode(i,t,n+e),0);return this.count instanceof u&&this.count.encode(e.length,t,n),i}}class y extends s{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof s,!0)))throw TypeError("fields must be array of Layout instances");for(let r of("boolean"==typeof t&&void 0===n&&(n=t,t=void 0),e))if(0>r.span&&void 0===r.property)throw Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce((e,t)=>e+t.getSpan(),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((n,r)=>{let i=r.getSpan(e,t);return t+=i,n+i},0)}catch(e){throw RangeError("indeterminate span")}return n}decode(e,t=0){i(e);let n=this.makeDestinationObject();for(let r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){let r=n,i=0,o=0;for(let r of this.fields){let s=r.span;if(o=0<s?s:0,void 0!==r.property){let i=e[r.property];void 0!==i&&(o=r.encode(i,t,n),0>s&&(s=r.getSpan(t,n)))}i=n,n+=s}return i+o-r}fromArray(e){let t=this.makeDestinationObject();for(let n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}t.vA=y;class b{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,n){throw Error("UnionDiscriminator is abstract")}}class A extends b{constructor(e,t){if(!(e instanceof u&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class S extends s{constructor(e,t,n){let r;if(e instanceof l||e instanceof d)r=new A(new c(e));else if(e instanceof u&&e.isCount())r=new A(e);else if(e instanceof b)r=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof s))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let i=-1;t&&0<=(i=t.span)&&(e instanceof l||e instanceof d)&&(i+=r.layout.span),super(i,n),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof l||e instanceof d,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return o(e)},this.configGetSourceVariant=function(e){o=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let n=this.getVariant(e,t);if(!n)throw Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw Error("unable to infer src variant")}decode(e,t=0){let n;let r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){let o=this.defaultLayout,s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),(n=this.makeDestinationObject())[r.property]=i,n[o.property]=o.decode(e,t+s)}else n=o.decode(e,t);return n}encode(e,t,n=0){let r=this.getSourceVariant(e);if(void 0===r){let r=this.discriminator,i=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(e[r.property],t,n),o+i.encode(e[i.property],t,n+o)}return r.encode(e,t,n)}addVariant(e,t,n){let r=new k(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t=0){let n;return n=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[n]}}class k extends s{constructor(e,t,n,r){if(!(e instanceof S))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof s))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof r)throw TypeError("variant must have a String property")}let i=e.span;0>e.span&&0<=(i=n?n.span:0)&&e.usesPrefixDiscriminator&&(i+=e.discriminator.layout.span),super(i,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}decode(e,t=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function I(e){return 0>e&&(e+=4294967296),e}class T extends s{constructor(e,t,n){if(!(e instanceof l||e instanceof d))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=I(e),this},this._packedGetValue=function(){return r}}decode(e,t=0){let n=this.makeDestinationObject(),r=this.word.decode(e,t);for(let t of(this._packedSetValue(r),this.fields))void 0!==t.property&&(n[t.property]=t.decode(e));return n}encode(e,t,n=0){let r=this.word.decode(t,n);for(let t of(this._packedSetValue(r),this.fields))if(void 0!==t.property){let n=e[t.property];void 0!==n&&t.encode(n)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){let n=new v(this,e,t);return this.fields.push(n),n}addBoolean(e){let t=new E(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}class v{constructor(e,t,n){if(!(e instanceof T))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");let r=8*e.span,i=e.fields.reduce((e,t)=>e+t.bits,0);if(t+i>r)throw Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-t),this.wordMask=I(this.valueMask<<this.start),this.property=n}decode(e,t){return I(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==I(e&this.valueMask))throw TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),n=I(e<<this.start);this.container._packedSetValue(I(t&~this.wordMask)|n)}}class E extends v{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}class P extends s{constructor(e,t){if(!(e instanceof u&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof u||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),o(e).slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof u&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw TypeError(a("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>t.length)throw RangeError("encoding overruns Uint8Array");let i=o(e);return o(t).write(i.toString("hex"),n,r,"hex"),this.length instanceof u&&this.length.encode(r,t,n),r}}t.cv=(e,t,n)=>new c(e,t,n),t.u8=e=>new l(1,e),t.KB=e=>new l(2,e),t.Jq=e=>new l(4,e),t._O=e=>new h(e),t.Xo=e=>new m(4,e),t.gM=e=>new g(e),t.n_=(e,t,n)=>new y(e,t,n),t.pc=(e,t,n)=>new T(e,t,n),t.A9=(e,t,n)=>new w(e,t,n),t.Ik=(e,t)=>new P(e,t)},94762:function(e,t,n){"use strict";var r=n(47226).Buffer;e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==t[s])throw TypeError(o+" is ambiguous");t[s]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return r.alloc(0);for(var n=0,i=0,o=0;e[n]===u;)i++,n++;for(var s=(e.length-n)*c+1>>>0,l=new Uint8Array(s);e[n];){var d=t[e.charCodeAt(n)];if(255===d)return;for(var m=0,f=s-1;(0!==d||m<o)&&-1!==f;f--,m++)d+=a*l[f]>>>0,l[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw Error("Non-zero carry");o=m,n++}for(var p=s-o;p!==s&&0===l[p];)p++;var h=r.allocUnsafe(i+(s-p));h.fill(0,0,i);for(var g=i;p!==s;)h[g++]=l[p++];return h}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var c=(s-o)*l+1>>>0,d=new Uint8Array(c);o!==s;){for(var m=t[o],f=0,p=c-1;(0!==m||f<i)&&-1!==p;p--,f++)m+=256*d[p]>>>0,d[p]=m%a>>>0,m=m/a>>>0;if(0!==m)throw Error("Non-zero carry");i=f,o++}for(var h=c-i;h!==c&&0===d[h];)h++;for(var g=u.repeat(n);h<c;++h)g+=e.charAt(d[h]);return g},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+a+" character")}}}},25724:function(e,t,n){"use strict";var r=n(23663).Buffer;t.oU=function(e){{let t=r.from(e);t.reverse();let n=t.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}},t.Q5=function(e){{let t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},t.k$=function(e,t){{let n=e.toString(16),i=r.from(n.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i}},t.zP=function(e,t){{let n=e.toString(16);return r.from(n.padStart(2*t,"0").slice(0,2*t),"hex")}}},84072:function(e,t,n){"use strict";var r=n(23663).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;let c=u(n(34108)),l=u(n(98430)),d=a(n(16908)),m=new("function"!=typeof TextDecoder?d.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"==typeof e&&(e=r.from(e,"utf8")),l.default.encode(r.from(e))},t.baseDecode=function(e){return r.from(l.default.decode(e))};class f extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=f;class p{constructor(){this.buf=r.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=r.concat([this.buf,r.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(r.from(new c.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(r.from(new c.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(r.from(new c.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(r.from(new c.default(e).toArray("le",64)))}writeBuffer(e){this.buf=r.concat([r.from(this.buf.subarray(0,this.length)),e,r.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=r.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(r.from(e))}writeArray(e,t){for(let n of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}function h(e,t,n){let r=n.value;n.value=function(...e){try{return r.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new f("Reached the end of buffer when deserializing");throw e}}}t.BinaryWriter=p;class g{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new c.default(e,"le")}readU128(){let e=this.readBuffer(16);return new c.default(e,"le")}readU256(){let e=this.readBuffer(32);return new c.default(e,"le")}readU512(){let e=this.readBuffer(64);return new c.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new f(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return m.decode(t)}catch(e){throw new f(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),n=[];for(let r=0;r<t;++r)n.push(e());return n}}function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e,t,n,r,i){try{if("string"==typeof r)i[`write${w(r)}`](n);else if(r instanceof Array){if("number"==typeof r[0]){if(n.length!==r[0])throw new f(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(2===r.length&&"number"==typeof r[1]){if(n.length!==r[1])throw new f(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let t=0;t<r[1];t++)y(e,null,n[t],r[0],i)}else i.writeArray(n,n=>{y(e,t,n,r[0],i)})}else if(void 0!==r.kind)switch(r.kind){case"option":null==n?i.writeU8(0):(i.writeU8(1),y(e,t,n,r.type,i));break;case"map":i.writeU32(n.size),n.forEach((n,o)=>{y(e,t,o,r.key,i),y(e,t,n,r.value,i)});break;default:throw new f(`FieldType ${r} unrecognized`)}else b(e,n,i)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function b(e,t,n){if("function"==typeof t.borshSerialize){t.borshSerialize(n);return}let r=e.get(t.constructor);if(!r)throw new f(`Class ${t.constructor.name} is missing in schema`);if("struct"===r.kind)r.fields.map(([r,i])=>{y(e,r,t[r],i,n)});else if("enum"===r.kind){let i=t[r.field];for(let o=0;o<r.values.length;++o){let[s,a]=r.values[o];if(s===i){n.writeU8(o),y(e,s,t[s],a,n);break}}}else throw new f(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function A(e,t,n,r){try{if("string"==typeof n)return r[`read${w(n)}`]();if(n instanceof Array){if("number"==typeof n[0])return r.readFixedArray(n[0]);if("number"!=typeof n[1])return r.readArray(()=>A(e,t,n[0],r));{let t=[];for(let i=0;i<n[1];i++)t.push(A(e,null,n[0],r));return t}}if("option"===n.kind){if(r.readU8())return A(e,t,n.type,r);return}if("map"===n.kind){let i=new Map,o=r.readU32();for(let s=0;s<o;s++){let o=A(e,t,n.key,r),s=A(e,t,n.value,r);i.set(o,s)}return i}return S(e,n,r)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function S(e,t,n){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(n);let r=e.get(t);if(!r)throw new f(`Class ${t.name} is missing in schema`);if("struct"===r.kind){let r={};for(let[i,o]of e.get(t).fields)r[i]=A(e,i,o,n);return new t(r)}if("enum"===r.kind){let i=n.readU8();if(i>=r.values.length)throw new f(`Enum index: ${i} is out of range`);let[o,s]=r.values[i],a=A(e,o,s,n);return new t({[o]:a})}throw new f(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}s([h],g.prototype,"readU8",null),s([h],g.prototype,"readU16",null),s([h],g.prototype,"readU32",null),s([h],g.prototype,"readU64",null),s([h],g.prototype,"readU128",null),s([h],g.prototype,"readU256",null),s([h],g.prototype,"readU512",null),s([h],g.prototype,"readString",null),s([h],g.prototype,"readFixedArray",null),s([h],g.prototype,"readArray",null),t.BinaryReader=g,t.serialize=function(e,t,n=p){let r=new n;return b(e,t,r),r.toArray()},t.deserialize=function(e,t,n,r=g){let i=new r(n),o=S(e,t,i);if(i.offset<n.length)throw new f(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return o},t.deserializeUnchecked=function(e,t,n,r=g){return S(e,t,new r(n))}},98430:function(e,t,n){var r=n(94762);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},6122:function(e,t,n){var r;/*! decimal.js-light v2.5.1 https://github.com/MikeMcl/decimal.js-light/LICENCE */!function(i){"use strict";var o,s={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},a=!0,u="[DecimalError] ",c=u+"Invalid argument: ",l=u+"Exponent out of range: ",d=Math.floor,m=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=d(1286742750677284.5),h={};function g(e,t){var n,r,i,o,s,u,c,l,d=e.constructor,m=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),a?E(t,m):t;if(c=e.d,l=t.d,s=e.e,i=t.e,c=c.slice(),o=s-i){for(o<0?(r=c,o=-o,u=l.length):(r=l,i=s,u=c.length),o>(u=(s=Math.ceil(m/7))>u?s+1:u+1)&&(o=u,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((u=c.length)-(o=l.length)<0&&(o=u,r=l,l=c,c=r),n=0;o;)n=(c[--o]=c[o]+l[o]+n)/1e7|0,c[o]%=1e7;for(n&&(c.unshift(n),++i),u=c.length;0==c[--u];)c.pop();return t.d=c,t.e=i,a?E(t,m):t}function w(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function y(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(o+=I(n)),o+=r;(n=7-(r=(s=e[t])+"").length)&&(o+=I(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}h.absoluteValue=h.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},h.comparedTo=h.cmp=function(e){var t,n,r,i;if(e=new this.constructor(e),this.s!==e.s)return this.s||-e.s;if(this.e!==e.e)return this.e>e.e^this.s<0?1:-1;for(t=0,n=(r=this.d.length)<(i=e.d.length)?r:i;t<n;++t)if(this.d[t]!==e.d[t])return this.d[t]>e.d[t]^this.s<0?1:-1;return r===i?0:r>i^this.s<0?1:-1},h.decimalPlaces=h.dp=function(){var e=this.d.length-1,t=(e-this.e)*7;if(e=this.d[e])for(;e%10==0;e/=10)t--;return t<0?0:t},h.dividedBy=h.div=function(e){return b(this,new this.constructor(e))},h.dividedToIntegerBy=h.idiv=function(e){var t=this.constructor;return E(b(this,new t(e),0,1),t.precision)},h.equals=h.eq=function(e){return!this.cmp(e)},h.exponent=function(){return S(this)},h.greaterThan=h.gt=function(e){return this.cmp(e)>0},h.greaterThanOrEqualTo=h.gte=function(e){return this.cmp(e)>=0},h.isInteger=h.isint=function(){return this.e>this.d.length-2},h.isNegative=h.isneg=function(){return this.s<0},h.isPositive=h.ispos=function(){return this.s>0},h.isZero=function(){return 0===this.s},h.lessThan=h.lt=function(e){return 0>this.cmp(e)},h.lessThanOrEqualTo=h.lte=function(e){return 1>this.cmp(e)},h.logarithm=h.log=function(e){var t,n=this.constructor,r=n.precision,i=r+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(o))throw Error(u+"NaN");if(this.s<1)throw Error(u+(this.s?"NaN":"-Infinity"));return this.eq(o)?new n(0):(a=!1,t=b(T(this,i),T(e,i),i),a=!0,E(t,r))},h.minus=h.sub=function(e){return e=new this.constructor(e),this.s==e.s?P(this,e):g(this,(e.s=-e.s,e))},h.modulo=h.mod=function(e){var t,n=this.constructor,r=n.precision;if(!(e=new n(e)).s)throw Error(u+"NaN");return this.s?(a=!1,t=b(this,e,0,1).times(e),a=!0,this.minus(t)):E(new n(this),r)},h.naturalExponential=h.exp=function(){return A(this)},h.naturalLogarithm=h.ln=function(){return T(this)},h.negated=h.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},h.plus=h.add=function(e){return e=new this.constructor(e),this.s==e.s?g(this,e):P(this,(e.s=-e.s,e))},h.precision=h.sd=function(e){var t,n,r;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(c+e);if(t=S(this)+1,n=7*(r=this.d.length-1)+1,r=this.d[r]){for(;r%10==0;r/=10)n--;for(r=this.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},h.squareRoot=h.sqrt=function(){var e,t,n,r,i,o,s,c=this.constructor;if(this.s<1){if(!this.s)return new c(0);throw Error(u+"NaN")}for(e=S(this),a=!1,0==(i=Math.sqrt(+this))||i==1/0?(((t=y(this.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new c(i.toString()),i=s=(n=c.precision)+3;;)if(r=(o=r).plus(b(this,o,s+2)).times(.5),y(o.d).slice(0,s)===(t=y(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&"4999"==t){if(E(o,n+1,0),o.times(o).eq(this)){r=o;break}}else if("9999"!=t)break;s+=4}return a=!0,E(r,n)},h.times=h.mul=function(e){var t,n,r,i,o,s,u,c,l,d=this.constructor,m=this.d,f=(e=new d(e)).d;if(!this.s||!e.s)return new d(0);for(e.s*=this.s,n=this.e+e.e,(c=m.length)<(l=f.length)&&(o=m,m=f,f=o,s=c,c=l,l=s),o=[],r=s=c+l;r--;)o.push(0);for(r=l;--r>=0;){for(t=0,i=c+r;i>r;)u=o[i]+f[r]*m[i-r-1]+t,o[i--]=u%1e7|0,t=u/1e7|0;o[i]=(o[i]+t)%1e7|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,a?E(e,d.precision):e},h.toDecimalPlaces=h.todp=function(e,t){var n=this,r=n.constructor;return(n=new r(n),void 0===e)?n:(w(e,0,1e9),void 0===t?t=r.rounding:w(t,0,8),E(n,e+S(n)+1,t))},h.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=L(r,!0):(w(e,0,1e9),void 0===t?t=i.rounding:w(t,0,8),n=L(r=E(new i(r),e+1,t),!0,e+1)),n},h.toFixed=function(e,t){var n,r,i=this.constructor;return void 0===e?L(this):(w(e,0,1e9),void 0===t?t=i.rounding:w(t,0,8),n=L((r=E(new i(this),e+S(this)+1,t)).abs(),!1,e+S(r)+1),this.isneg()&&!this.isZero()?"-"+n:n)},h.toInteger=h.toint=function(){var e=this.constructor;return E(new e(this),S(this)+1,e.rounding)},h.toNumber=function(){return+this},h.toPower=h.pow=function(e){var t,n,r,i,s,c,l=this,m=l.constructor,f=+(e=new m(e));if(!e.s)return new m(o);if(!(l=new m(l)).s){if(e.s<1)throw Error(u+"Infinity");return l}if(l.eq(o))return l;if(r=m.precision,e.eq(o))return E(l,r);if(c=(t=e.e)>=(n=e.d.length-1),s=l.s,c){if((n=f<0?-f:f)<=9007199254740991){for(i=new m(o),t=Math.ceil(r/7+4),a=!1;n%2&&C((i=i.times(l)).d,t),0!==(n=d(n/2));)C((l=l.times(l)).d,t);return a=!0,e.s<0?new m(o).div(i):E(i,r)}}else if(s<0)throw Error(u+"NaN");return s=s<0&&1&e.d[Math.max(t,n)]?-1:1,l.s=1,a=!1,i=e.times(T(l,r+12)),a=!0,(i=A(i)).s=s,i},h.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?(n=S(i),r=L(i,n<=o.toExpNeg||n>=o.toExpPos)):(w(e,1,1e9),void 0===t?t=o.rounding:w(t,0,8),n=S(i=E(new o(i),e,t)),r=L(i,e<=n||n<=o.toExpNeg,e)),r},h.toSignificantDigits=h.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(w(e,1,1e9),void 0===t?t=n.rounding:w(t,0,8)),E(new n(this),e,t)},h.toString=h.valueOf=h.val=h.toJSON=function(){var e=S(this),t=this.constructor;return L(this,e<=t.toExpNeg||e>=t.toExpPos)};var b=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%1e7|0,r=n/1e7|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=1e7*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,s){var a,c,l,d,m,f,p,h,g,w,y,b,A,k,I,T,v,P,L=r.constructor,C=r.s==i.s?1:-1,O=r.d,x=i.d;if(!r.s)return new L(r);if(!i.s)throw Error(u+"Division by zero");for(l=0,c=r.e-i.e,v=x.length,I=O.length,h=(p=new L(C)).d=[];x[l]==(O[l]||0);)++l;if(x[l]>(O[l]||0)&&--c,(b=null==o?o=L.precision:s?o+(S(r)-S(i))+1:o)<0)return new L(0);if(b=b/7+2|0,l=0,1==v)for(d=0,x=x[0],b++;(l<I||d)&&b--;l++)A=1e7*d+(O[l]||0),h[l]=A/x|0,d=A%x|0;else{for((d=1e7/(x[0]+1)|0)>1&&(x=e(x,d),O=e(O,d),v=x.length,I=O.length),k=v,w=(g=O.slice(0,v)).length;w<v;)g[w++]=0;(P=x.slice()).unshift(0),T=x[0],x[1]>=1e7/2&&++T;do d=0,(a=t(x,g,v,w))<0?(y=g[0],v!=w&&(y=1e7*y+(g[1]||0)),(d=y/T|0)>1?(d>=1e7&&(d=1e7-1),f=(m=e(x,d)).length,w=g.length,1==(a=t(m,g,f,w))&&(d--,n(m,v<f?P:x,f))):(0==d&&(a=d=1),m=x.slice()),(f=m.length)<w&&m.unshift(0),n(g,m,w),-1==a&&(w=g.length,(a=t(x,g,v,w))<1&&(d++,n(g,v<w?P:x,w))),w=g.length):0===a&&(d++,g=[0]),h[l++]=d,a&&g[0]?g[w++]=O[k]||0:(g=[O[k]],w=1);while((k++<I||void 0!==g[0])&&b--)}return h[0]||h.shift(),p.e=c,E(p,s?o+S(p)+1:o)}}();function A(e,t){var n,r,i,s,u,c=0,d=0,f=e.constructor,p=f.precision;if(S(e)>16)throw Error(l+S(e));if(!e.s)return new f(o);for(null==t?(a=!1,u=p):u=t,s=new f(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(u+=Math.log(m(2,d))/Math.LN10*2+5|0,n=r=i=new f(o),f.precision=u;;){if(r=E(r.times(e),u),n=n.times(++c),y((s=i.plus(b(r,n,u))).d).slice(0,u)===y(i.d).slice(0,u)){for(;d--;)i=E(i.times(i),u);return f.precision=p,null==t?(a=!0,E(i,p)):i}i=s}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function k(e,t,n){if(t>e.LN10.sd())throw a=!0,n&&(e.precision=n),Error(u+"LN10 precision limit exceeded");return E(new e(e.LN10),t)}function I(e){for(var t="";e--;)t+="0";return t}function T(e,t){var n,r,i,s,c,l,d,m,f,p=1,h=e,g=h.d,w=h.constructor,A=w.precision;if(h.s<1)throw Error(u+(h.s?"NaN":"-Infinity"));if(h.eq(o))return new w(0);if(null==t?(a=!1,m=A):m=t,h.eq(10))return null==t&&(a=!0),k(w,m);if(m+=10,w.precision=m,r=(n=y(g)).charAt(0),!(15e14>Math.abs(s=S(h))))return d=k(w,m+2,A).times(s+""),h=T(new w(r+"."+n.slice(1)),m-10).plus(d),w.precision=A,null==t?(a=!0,E(h,A)):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=y((h=h.times(e)).d)).charAt(0),p++;for(s=S(h),r>1?(h=new w("0."+n),s++):h=new w(r+"."+n.slice(1)),l=c=h=b(h.minus(o),h.plus(o),m),f=E(h.times(h),m),i=3;;){if(c=E(c.times(f),m),y((d=l.plus(b(c,new w(i),m))).d).slice(0,m)===y(l.d).slice(0,m))return l=l.times(2),0!==s&&(l=l.plus(k(w,m+2,A).times(s+""))),l=b(l,new w(p),m),w.precision=A,null==t?(a=!0,E(l,A)):l;l=d,i+=2}}function v(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),a&&(e.e>p||e.e<-p))throw Error(l+n)}else e.s=0,e.e=0,e.d=[0];return e}function E(e,t,n){var r,i,o,s,u,c,f,h,g=e.d;for(s=1,o=g[0];o>=10;o/=10)s++;if((r=t-s)<0)r+=7,i=t,f=g[h=0];else{if((h=Math.ceil((r+1)/7))>=(o=g.length))return e;for(s=1,f=o=g[h];o>=10;o/=10)s++;r%=7,i=r-7+s}if(void 0!==n&&(u=f/(o=m(10,s-i-1))%10|0,c=t<0||void 0!==g[h+1]||f%o,c=n<4?(u||c)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||c||6==n&&(r>0?i>0?f/m(10,s-i):0:g[h-1])%10&1||n==(e.s<0?8:7))),t<1||!g[0])return c?(o=S(e),g.length=1,t=t-o-1,g[0]=m(10,(7-t%7)%7),e.e=d(-t/7)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(0==r?(g.length=h,o=1,h--):(g.length=h+1,o=m(10,7-r),g[h]=i>0?(f/m(10,s-i)%m(10,i)|0)*o:0),c)for(;;){if(0==h){1e7==(g[0]+=o)&&(g[0]=1,++e.e);break}if(g[h]+=o,1e7!=g[h])break;g[h--]=0,o=1}for(r=g.length;0===g[--r];)g.pop();if(a&&(e.e>p||e.e<-p))throw Error(l+S(e));return e}function P(e,t){var n,r,i,o,s,u,c,l,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),a?E(t,p):t;if(c=e.d,m=t.d,r=t.e,l=e.e,c=c.slice(),s=l-r){for((d=s<0)?(n=c,s=-s,u=m.length):(n=m,r=l,u=c.length),s>(i=Math.max(Math.ceil(p/7),u)+2)&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(u=m.length))&&(u=i),i=0;i<u;i++)if(c[i]!=m[i]){d=c[i]<m[i];break}s=0}for(d&&(n=c,c=m,m=n,t.s=-t.s),u=c.length,i=m.length-u;i>0;--i)c[u++]=0;for(i=m.length;i>s;){if(c[--i]<m[i]){for(o=i;o&&0===c[--o];)c[o]=1e7-1;--c[o],c[i]+=1e7}c[i]-=m[i]}for(;0===c[--u];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,a?E(t,p):t):new f(0)}function L(e,t,n){var r,i=S(e),o=y(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+I(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+I(-i-1)+o,n&&(r=n-s)>0&&(o+=I(r))):i>=s?(o+=I(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+I(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=I(r))),e.s<0?"-"+o:o}function C(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!=typeof e)throw Error(u+"Object expected");var t,n,r,i=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(d(r)===r&&r>=i[t+1]&&r<=i[t+2])this[n]=r;else throw Error(c+n+": "+r)}if(void 0!==(r=e[n="LN10"])){if(r==Math.LN10)this[n]=new this(r);else throw Error(c+n+": "+r)}return this}(s=function e(t){var n,r,i;function o(e){if(!(this instanceof o))return new o(e);if(this.constructor=o,e instanceof o){this.s=e.s,this.e=e.e,this.d=(e=e.d)?e.slice():e;return}if("number"==typeof e){if(0*e!=0)throw Error(c+e);if(e>0)this.s=1;else if(e<0)e=-e,this.s=-1;else{this.s=0,this.e=0,this.d=[0];return}if(e===~~e&&e<1e7){this.e=0,this.d=[e];return}return v(this,e.toString())}if("string"!=typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),this.s=-1):this.s=1,f.test(e))v(this,e);else throw Error(c+e)}if(o.prototype=h,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=O,void 0===t&&(t={}),t)for(n=0,i=["precision","rounding","toExpNeg","toExpPos","LN10"];n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(s)).default=s.Decimal=s,o=new s(1),void 0!==(r=(function(){return s}).call(t,n,t,e))&&(e.exports=r)}(0)},54967:function(e,t,n){"use strict";let r=n(51602).v4,i=n(91856),o=function(e,t){if(!(this instanceof o))return new o(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return r()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=o,o.prototype.request=function(e,t,n,r){let o;let s=this,a=null,u=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&u)throw TypeError("JSON-RPC 1.0 does not support batching");let c=!u&&e&&"object"==typeof e&&"function"==typeof t;if(u||c)r=t,a=e;else{"function"==typeof n&&(r=n,n=void 0);let o="function"==typeof r;try{a=i(e,t,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(o)return r(e);throw e}if(!o)return a}try{o=JSON.stringify(a,this.options.replacer)}catch(e){return r(e)}return this.callServer(o,function(e,t){s._parseResponse(e,t,r)}),a},o.prototype._parseResponse=function(e,t,n){let r;if(e){n(e);return}if(!t)return n();try{r=JSON.parse(t,this.options.reviver)}catch(e){return n(e)}if(3===n.length){if(!Array.isArray(r))return n(null,r.error,r.result);{let e=function(e){return void 0!==e.error};return n(null,r.filter(e),r.filter(function(t){return!e(t)}))}}n(null,r)}},91856:function(e,t,n){"use strict";let r=n(51602).v4;e.exports=function(e,t,n,i){if("string"!=typeof e)throw TypeError(e+" must be a string");let o="number"==typeof(i=i||{}).version?i.version:2;if(1!==o&&2!==o)throw TypeError(o+" must be 1 or 2");let s={method:e};if(2===o&&(s.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw TypeError(t+" must be an object, array or omitted");s.params=t}if(void 0===n){let e="function"==typeof i.generator?i.generator:function(){return r()};s.id=e(s,i)}else 2===o&&null===n?i.notificationIdNull&&(s.id=null):s.id=n;return s}},67014:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw TypeError("The listener must be a function");var a=new i(r,o||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,s),!0}for(c=1,u=Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var m,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(m=1,u=Array(d-1);m<d;m++)u[m-1]=arguments[m];l[c].fn.apply(l[c].context,u)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var u=0,c=[],l=a.length;u<l;u++)(a[u].fn!==t||i&&!a[u].once||r&&a[u].context!==r)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},47226:function(e,t,n){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r=n(23663),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}},16908:function(e,t){"use strict";function n(e,t,n){return t<=e&&e<=n}function r(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){this.tokens=[].slice.call(e)}function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var s="utf-8";function a(e,t){if(!(this instanceof a))return new a(e,t);if((e=void 0!==e?String(e).toLowerCase():s)!==s)throw Error("Encoding not supported. Only utf-8 is supported");t=r(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(e,t){if(!(this instanceof u))return new u(e,t);if((e=void 0!==e?String(e).toLowerCase():s)!==s)throw Error("Encoding not supported. Only utf-8 is supported");t=r(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function c(e){var t=e.fatal,r=0,i=0,s=0,a=128,u=191;this.handler=function(e,c){if(-1===c&&0!==s)return s=0,o(t);if(-1===c)return -1;if(0===s){if(n(c,0,127))return c;if(n(c,194,223))s=1,r=c-192;else if(n(c,224,239))224===c&&(a=160),237===c&&(u=159),s=2,r=c-224;else{if(!n(c,240,244))return o(t);240===c&&(a=144),244===c&&(u=143),s=3,r=c-240}return r<<=6*s,null}if(!n(c,a,u))return r=s=i=0,a=128,u=191,e.prepend(c),o(t);if(a=128,u=191,i+=1,r+=c-128<<6*(s-i),i!==s)return null;var l=r;return r=s=i=0,l}}function l(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(n(t,0,127))return t;n(t,128,2047)?(r=1,i=192):n(t,2048,65535)?(r=2,i=224):n(t,65536,1114111)&&(r=3,i=240);for(var r,i,o=[(t>>6*r)+i];r>0;){var s=t>>6*(r-1);o.push(128|63&s),r-=1}return o}}a.prototype={decode:function(e,t){n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=r(t),this._streaming||(this._decoder=new c({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var n,o,s=new i(n),a=[];!s.endOfStream()&&-1!==(o=this._decoder.handler(s,s.read()));)null!==o&&(Array.isArray(o)?a.push.apply(a,o):a.push(o));if(!this._streaming){do{if(-1===(o=this._decoder.handler(s,s.read())))break;if(null===o)continue;Array.isArray(o)?a.push.apply(a,o):a.push(o)}while(!s.endOfStream());this._decoder=null}return!a.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(1023&r)+56320))}return t}(a)}},u.prototype={encode:function(e,t){e=e?String(e):"",t=r(t),this._streaming||(this._encoder=new l(this._options)),this._streaming=!!t.stream;for(var n,o=[],s=new i(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var o=t.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319){if(r===n-1)i.push(65533);else{var s=e.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=1023&o,u=1023&s;i.push(65536+(a<<10)+u),r+=1}else i.push(65533)}}r+=1}return i}(e));!s.endOfStream()&&-1!==(n=this._encoder.handler(s,s.read()));)Array.isArray(n)?o.push.apply(o,n):o.push(n);if(!this._streaming){for(;-1!==(n=this._encoder.handler(s,s.read()));)Array.isArray(n)?o.push.apply(o,n):o.push(n);this._encoder=null}return new Uint8Array(o)}},t.TextEncoder=u,t.TextDecoder=a},96635:function(e){e.exports&&(e.exports=function(e){return e.prototype.toFormat=function(e,t,n){if(!this.e&&0!==this.e)return this.toString();var r,i,o,s,a,u,c,l,d,m,f,p,h,g,w,y=this.format||{},b=this.constructor.format||{};if(e!=a?"object"==typeof e?(n=e,e=a):t!=a?"object"==typeof t?(n=t,t=a):"object"!=typeof n&&(n={}):n={}:n={},l=(r=this.toFixed(e,t).split("."))[0],d=r[1],u=(c=this.s<0?l.slice(1):l).length,(m=n.decimalSeparator)==a&&(m=y.decimalSeparator)==a&&(m=b.decimalSeparator)==a&&(m="."),(f=n.groupSeparator)==a&&(f=y.groupSeparator)==a&&(f=b.groupSeparator),f&&((p=n.groupSize)==a&&(p=y.groupSize)==a&&(p=b.groupSize)==a&&(p=0),(h=n.secondaryGroupSize)==a&&(h=y.secondaryGroupSize)==a&&(h=b.secondaryGroupSize)==a&&(h=0),h?(i=+h,u-=o=+p):(i=+p,o=+h),i>0&&u>0)){for(s=u%i||i,l=c.substr(0,s);s<u;s+=i)l+=f+c.substr(s,i);o>0&&(l+=f+c.slice(s)),this.s<0&&(l="-"+l)}return d?((g=n.fractionGroupSeparator)==a&&(g=y.fractionGroupSeparator)==a&&(g=b.fractionGroupSeparator),g&&((w=n.fractionGroupSize)==a&&(w=y.fractionGroupSize)==a&&(w=b.fractionGroupSize)==a&&(w=0),(w=+w)&&(d=d.replace(RegExp("\\d{"+w+"}\\B","g"),"$&"+g))),l+m+d):l},e.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},e})},51602:function(e,t,n){"use strict";n.d(t,{v4:function(){return c}});for(var r,i=new Uint8Array(16),o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!("string"==typeof n&&o.test(n)))throw TypeError("Stringified UUID is invalid");return n},c=function(e,t,n){var o=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=o[s];return t}return u(o)}},42875:function(e,t,n){"use strict";n.d(t,{K:function(){return u},M:function(){return a}});var r=n(52401),i=n(87642);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let o=BigInt(0),s=BigInt(1);function a(e,t){let n=(e,t)=>{let n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>o;)n&s&&(r=r.add(i)),i=i.double(),n>>=s;return r},precomputeWindow(e,t){let{windows:n,windowSize:i}=r(t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){let{windows:a,windowSize:u}=r(t),c=e.ZERO,l=e.BASE,d=BigInt(2**t-1),m=2**t,f=BigInt(t);for(let e=0;e<a;e++){let t=e*u,r=Number(o&d);o>>=f,r>u&&(r-=m,o+=s);let a=t+Math.abs(r)-1,p=e%2!=0,h=r<0;0===r?l=l.add(n(p,i[t])):c=c.add(n(h,i[a]))}return{p:c,f:l}},wNAFCached(e,t,n,r){let i=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,r(o))),this.wNAF(i,o,n)}}}function u(e){return(0,r.OP)(e.Fp),(0,i.FF)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.kK)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},52401:function(e,t,n){"use strict";n.d(t,{OP:function(){return g},PS:function(){return A},Tu:function(){return p},U_:function(){return f},Us:function(){return S},gN:function(){return y},kK:function(){return w},oA:function(){return m},wQ:function(){return d}});var r=n(87642);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),u=BigInt(4),c=BigInt(5),l=BigInt(8);function d(e,t){let n=e%t;return n>=i?n:t+n}function m(e,t,n){let r=e;for(;t-- >i;)r*=r,r%=n;return r}function f(e,t){if(e===i||t<=i)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=d(e,t),r=t,s=i,a=o,u=o,c=i;for(;n!==i;){let e=r/n,t=r%n,i=s-u*e,o=a-c*e;r=n,n=t,s=u,a=c,u=i,c=o}if(r!==o)throw Error("invert: does not exist");return d(s,t)}BigInt(9),BigInt(16);let p=(e,t)=>(d(e,t)&o)===o,h=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function g(e){let t=h.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.FF)(e,t)}function w(e,t){let n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function y(e,t,n=!1,m={}){if(e<=i)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:p,nByteLength:h}=w(e,t);if(h>2048)throw Error("Field lengths over 2048 bytes are not supported");let g=function(e){if(e%u===a){let t=(e+o)/u;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}if(e%l===c){let t=(e-c)/l;return function(e,n){let r=e.mul(n,s),i=e.pow(r,t),o=e.mul(n,i),a=e.mul(e.mul(o,s),i),u=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(u),n))throw Error("Cannot find square root");return u}}return function(e){let t,n,r;let a=(e-o)/s;for(t=e-o,n=0;t%s===i;t/=s,n++);for(r=s;r<e&&function(e,t,n){if(n<=i||t<i)throw Error("Expected power/modulo > 0");if(n===o)return i;let r=o;for(;t>i;)t&o&&(r=r*e%n),e=e*e%n,t>>=o;return r}(r,a,e)!==e-o;r++);if(1===n){let t=(e+o)/u;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}let c=(t+o)/s;return function(e,i){if(e.pow(i,a)===e.neg(e.ONE))throw Error("Cannot find square root");let s=n,u=e.pow(e.mul(e.ONE,r),t),l=e.pow(i,c),d=e.pow(i,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);let n=e.pow(u,o<<BigInt(s-t-1));u=e.sqr(n),l=e.mul(l,n),d=e.mul(d,u),s=t}return l}}(e)}(e),y=Object.freeze({ORDER:e,BITS:p,BYTES:h,MASK:(0,r.dQ)(p),ZERO:i,ONE:o,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&o)===o,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,n)=>d(t+n,e),sub:(t,n)=>d(t-n,e),mul:(t,n)=>d(t*n,e),pow:(e,t)=>(function(e,t,n){if(n<i)throw Error("Expected power > 0");if(n===i)return e.ONE;if(n===o)return t;let r=e.ONE,s=t;for(;n>i;)n&o&&(r=e.mul(r,s)),s=e.sqr(s),n>>=o;return r})(y,e,t),div:(t,n)=>d(t*f(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:m.sqrt||(e=>g(y,e)),invertBatch:e=>(function(e,t){let n=Array(t.length),r=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),i=e.inv(r);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),i),n})(y,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,r.S5)(e,h):(0,r.tL)(e,h),fromBytes:e=>{if(e.length!==h)throw Error(`Fp.fromBytes: expected ${h}, got ${e.length}`);return n?(0,r.ty)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(y)}function b(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function A(e){let t=b(e);return t+Math.ceil(t/2)}function S(e,t,n=!1){let i=e.length,s=b(t),a=A(t);if(i<16||i<a||i>1024)throw Error(`expected ${a}-1024 bytes of input, got ${i}`);let u=d(n?(0,r.bytesToNumberBE)(e):(0,r.ty)(e),t-o)+o;return n?(0,r.S5)(u,s):(0,r.tL)(u,s)}},87642:function(e,t,n){"use strict";n.d(t,{FF:function(){return T},S5:function(){return g},_t:function(){return o},bytesToNumberBE:function(){return f},ci:function(){return u},dQ:function(){return b},eV:function(){return y},gk:function(){return s},hexToBytes:function(){return m},n$:function(){return k},ql:function(){return w},tL:function(){return h},ty:function(){return p}});let r=BigInt(1),i=BigInt(2);function o(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(e){if(!o(e))throw Error("Uint8Array expected")}let a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function u(e){s(e);let t="";for(let n=0;n<e.length;n++)t+=a[e[n]];return t}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}let l={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function d(e){return e>=l._0&&e<=l._9?e-l._0:e>=l._A&&e<=l._F?e-(l._A-10):e>=l._a&&e<=l._f?e-(l._a-10):void 0}function m(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){let n=d(e.charCodeAt(i)),o=d(e.charCodeAt(i+1));if(void 0===n||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);r[t]=16*n+o}return r}function f(e){return c(u(e))}function p(e){return s(e),c(u(Uint8Array.from(e).reverse()))}function h(e,t){return m(e.toString(16).padStart(2*t,"0"))}function g(e,t){return h(e,t).reverse()}function w(e,t,n){let r;if("string"==typeof t)try{r=m(t)}catch(n){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else if(o(t))r=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=r.length;if("number"==typeof n&&i!==n)throw Error(`${e} expected ${n} bytes, got ${i}`);return r}function y(...e){let t=0;for(let n=0;n<e.length;n++){let r=e[n];s(r),t+=r.length}let n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){let i=e[t];n.set(i,r),r+=i.length}return n}let b=e=>(i<<BigInt(e-1))-r,A=e=>new Uint8Array(e),S=e=>Uint8Array.from(e);function k(e,t,n){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof n)throw Error("hmacFn must be a function");let r=A(e),i=A(e),o=0,s=()=>{r.fill(1),i.fill(0),o=0},a=(...e)=>n(i,r,...e),u=(e=A())=>{i=a(S([0]),e),r=a(),0!==e.length&&(i=a(S([1]),e),r=a())},c=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,n=[];for(;e<t;){let t=(r=a()).slice();n.push(t),e+=r.length}return y(...n)};return(e,t)=>{let n;for(s(),u(e);!(n=t(c()));)u();return s(),n}}let I={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function T(e,t,n={}){let r=(t,n,r)=>{let i=I[n];if("function"!=typeof i)throw Error(`Invalid validator "${n}", expected function`);let o=e[t];if((!r||void 0!==o)&&!i(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)};for(let[e,n]of Object.entries(t))r(e,n,!1);for(let[e,t]of Object.entries(n))r(e,t,!0);return e}},42306:function(e,t,n){"use strict";n.d(t,{UN:function(){return C}});var r=n(717),i=n(94248),o=n(61176);let[s,a]=i.ZP.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),u=new Uint32Array(80),c=new Uint32Array(80);class l extends r.VR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:u,El:c,Fh:l,Fl:d,Gh:m,Gl:f,Hh:p,Hl:h}=this;return[e,t,n,r,i,o,s,a,u,c,l,d,m,f,p,h]}set(e,t,n,r,i,o,s,a,u,c,l,d,m,f,p,h){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|d,this.Gh=0|m,this.Gl=0|f,this.Hh=0|p,this.Hl=0|h}process(e,t){for(let n=0;n<16;n++,t+=4)u[n]=e.getUint32(t),c[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|u[e-15],n=0|c[e-15],r=i.ZP.rotrSH(t,n,1)^i.ZP.rotrSH(t,n,8)^i.ZP.shrSH(t,n,7),o=i.ZP.rotrSL(t,n,1)^i.ZP.rotrSL(t,n,8)^i.ZP.shrSL(t,n,7),s=0|u[e-2],a=0|c[e-2],l=i.ZP.rotrSH(s,a,19)^i.ZP.rotrBH(s,a,61)^i.ZP.shrSH(s,a,6),d=i.ZP.rotrSL(s,a,19)^i.ZP.rotrBL(s,a,61)^i.ZP.shrSL(s,a,6),m=i.ZP.add4L(o,d,c[e-7],c[e-16]),f=i.ZP.add4H(m,r,l,u[e-7],u[e-16]);u[e]=0|f,c[e]=0|m}let{Ah:n,Al:r,Bh:o,Bl:l,Ch:d,Cl:m,Dh:f,Dl:p,Eh:h,El:g,Fh:w,Fl:y,Gh:b,Gl:A,Hh:S,Hl:k}=this;for(let e=0;e<80;e++){let t=i.ZP.rotrSH(h,g,14)^i.ZP.rotrSH(h,g,18)^i.ZP.rotrBH(h,g,41),I=i.ZP.rotrSL(h,g,14)^i.ZP.rotrSL(h,g,18)^i.ZP.rotrBL(h,g,41),T=h&w^~h&b,v=g&y^~g&A,E=i.ZP.add5L(k,I,v,a[e],c[e]),P=i.ZP.add5H(E,S,t,T,s[e],u[e]),L=0|E,C=i.ZP.rotrSH(n,r,28)^i.ZP.rotrBH(n,r,34)^i.ZP.rotrBH(n,r,39),O=i.ZP.rotrSL(n,r,28)^i.ZP.rotrBL(n,r,34)^i.ZP.rotrBL(n,r,39),x=n&o^n&d^o&d,B=r&l^r&m^l&m;S=0|b,k=0|A,b=0|w,A=0|y,w=0|h,y=0|g,({h:h,l:g}=i.ZP.add(0|f,0|p,0|P,0|L)),f=0|d,p=0|m,d=0|o,m=0|l,o=0|n,l=0|r;let R=i.ZP.add3L(L,O,B);n=i.ZP.add3H(R,P,C,x),r=0|R}({h:n,l:r}=i.ZP.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:l}=i.ZP.add(0|this.Bh,0|this.Bl,0|o,0|l)),({h:d,l:m}=i.ZP.add(0|this.Ch,0|this.Cl,0|d,0|m)),({h:f,l:p}=i.ZP.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:h,l:g}=i.ZP.add(0|this.Eh,0|this.El,0|h,0|g)),({h:w,l:y}=i.ZP.add(0|this.Fh,0|this.Fl,0|w,0|y)),({h:b,l:A}=i.ZP.add(0|this.Gh,0|this.Gl,0|b,0|A)),({h:S,l:k}=i.ZP.add(0|this.Hh,0|this.Hl,0|S,0|k)),this.set(n,r,o,l,d,m,f,p,h,g,w,y,b,A,S,k)}roundClean(){u.fill(0),c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let d=(0,o.hE)(()=>new l);var m=n(42875),f=n(52401),p=n(87642);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let h=BigInt(0),g=BigInt(1),w=BigInt(2),y=BigInt(8),b={zip215:!0},A=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),S=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),k=BigInt(0),I=BigInt(1),T=BigInt(2);BigInt(3);let v=BigInt(5),E=BigInt(8);function P(e,t){let n=(0,f.wQ)(t*t*t,A),r=function(e){let t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=e*e%A*e%A,s=(0,f.oA)(o,T,A)*o%A,a=(0,f.oA)(s,I,A)*e%A,u=(0,f.oA)(a,v,A)*a%A,c=(0,f.oA)(u,t,A)*u%A,l=(0,f.oA)(c,n,A)*c%A,d=(0,f.oA)(l,r,A)*l%A,m=(0,f.oA)(d,i,A)*d%A,p=(0,f.oA)(m,i,A)*d%A,h=(0,f.oA)(p,t,A)*u%A;return{pow_p_5_8:(0,f.oA)(h,T,A)*e%A,b2:o}}(e*(0,f.wQ)(n*n*t,A)).pow_p_5_8,i=(0,f.wQ)(e*n*r,A),o=(0,f.wQ)(t*i*i,A),s=i,a=(0,f.wQ)(i*S,A),u=o===e,c=o===(0,f.wQ)(-e,A),l=o===(0,f.wQ)(-e*S,A);return u&&(i=s),(c||l)&&(i=a),(0,f.Tu)(i,A)&&(i=(0,f.wQ)(-i,A)),{isValid:u||c,value:i}}let L=(0,f.gN)(A,void 0,!0),C=function(e){let t=function(e){let t=(0,m.K)(e);return p.FF(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:u}=t,c=w<<BigInt(8*a)-g,l=n.create,d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch(e){return{isValid:!1,value:h}}}),A=t.adjustScalarBytes||(e=>e),S=t.domain||((e,t,n)=>{if(t.length||n)throw Error("Contexts/pre-hash are not supported");return e}),k=e=>"bigint"==typeof e&&h<e,I=(e,t)=>k(e)&&k(t)&&e<t,T=e=>e===h||I(e,c);function v(e,t){if(I(e,t))return e;throw Error(`Expected valid scalar < ${t}, got ${typeof e} ${e}`)}function E(e){return e===h?e:v(e,r)}let P=new Map;function L(e){if(!(e instanceof C))throw Error("ExtendedPoint expected")}class C{constructor(e,t,n,r){if(this.ex=e,this.ey=t,this.ez=n,this.et=r,!T(e))throw Error("x required");if(!T(t))throw Error("y required");if(!T(n))throw Error("z required");if(!T(r))throw Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof C)throw Error("extended point not allowed");let{x:t,y:n}=e||{};if(!T(t)||!T(n))throw Error("invalid affine point");return new C(t,n,g,l(t*n))}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.ez));return e.map((e,n)=>e.toAffine(t[n])).map(C.fromAffine)}_setWindowSize(e){this._WINDOW_SIZE=e,P.delete(this)}assertValidity(){let{a:e,d:n}=t;if(this.is0())throw Error("bad point: ZERO");let{ex:r,ey:i,ez:o,et:s}=this,a=l(r*r),u=l(i*i),c=l(o*o),d=l(c*c),m=l(a*e);if(l(c*l(m+u))!==l(d+l(n*l(a*u))))throw Error("bad point: equation left != right (1)");if(l(r*i)!==l(o*s))throw Error("bad point: equation left != right (2)")}equals(e){L(e);let{ex:t,ey:n,ez:r}=this,{ex:i,ey:o,ez:s}=e,a=l(t*s),u=l(i*r),c=l(n*s),d=l(o*r);return a===u&&c===d}is0(){return this.equals(C.ZERO)}negate(){return new C(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:e}=t,{ex:n,ey:r,ez:i}=this,o=l(n*n),s=l(r*r),a=l(w*l(i*i)),u=l(e*o),c=n+r,d=l(l(c*c)-o-s),m=u+s,f=m-a,p=u-s,h=l(d*f),g=l(m*p),y=l(d*p);return new C(h,g,l(f*m),y)}add(e){L(e);let{a:n,d:r}=t,{ex:i,ey:o,ez:s,et:a}=this,{ex:u,ey:c,ez:d,et:m}=e;if(n===BigInt(-1)){let e=l((o-i)*(c+u)),t=l((o+i)*(c-u)),n=l(t-e);if(n===h)return this.double();let r=l(s*w*m),f=l(a*w*d),p=f+r,g=t+e,y=f-r,b=l(p*n),A=l(g*y),S=l(p*y);return new C(b,A,l(n*g),S)}let f=l(i*u),p=l(o*c),g=l(a*r*m),y=l(s*d),b=l((i+o)*(u+c)-f-p),A=y-g,S=y+g,k=l(p-n*f),I=l(b*A),T=l(S*k),v=l(b*k);return new C(I,T,l(A*S),v)}subtract(e){return this.add(e.negate())}wNAF(e){return B.wNAFCached(this,P,e,C.normalizeZ)}multiply(e){let{p:t,f:n}=this.wNAF(v(e,r));return C.normalizeZ([t,n])[0]}multiplyUnsafe(e){let t=E(e);return t===h?x:this.equals(x)||t===g?this:this.equals(O)?this.wNAF(t).p:B.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return B.unsafeLadder(this,r).is0()}toAffine(e){let{ex:t,ey:r,ez:i}=this,o=this.is0();null==e&&(e=o?y:n.inv(i));let s=l(t*e),a=l(r*e),u=l(i*e);if(o)return{x:h,y:g};if(u!==g)throw Error("invZ was invalid");return{x:s,y:a}}clearCofactor(){let{h:e}=t;return e===g?this:this.multiplyUnsafe(e)}static fromHex(e,r=!1){let{d:i,a:o}=t,s=n.BYTES,a=(e=(0,p.ql)("pointHex",e,s)).slice(),u=e[s-1];a[s-1]=-129&u;let m=p.ty(a);m===h||(r?v(m,c):v(m,n.ORDER));let f=l(m*m),{isValid:w,value:y}=d(l(f-g),l(i*f-o));if(!w)throw Error("Point.fromHex: invalid y coordinate");let b=(y&g)===g,A=(128&u)!=0;if(!r&&y===h&&A)throw Error("Point.fromHex: x=0 and x_0=1");return A!==b&&(y=l(-y)),C.fromAffine({x:y,y:m})}static fromPrivateKey(e){return U(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=p.S5(t,n.BYTES);return r[r.length-1]|=e&g?128:0,r}toHex(){return p.ci(this.toRawBytes())}}C.BASE=new C(t.Gx,t.Gy,g,l(t.Gx*t.Gy)),C.ZERO=new C(h,g,g,h);let{BASE:O,ZERO:x}=C,B=(0,m.M)(C,8*a);function R(e){var t;return t=p.ty(e),(0,f.wQ)(t,r)}function U(e){e=(0,p.ql)("private key",e,a);let t=(0,p.ql)("hashed private key",o(e),2*a),n=A(t.slice(0,a)),r=t.slice(a,2*a),i=R(n),s=O.multiply(i),u=s.toRawBytes();return{head:n,prefix:r,scalar:i,point:s,pointBytes:u}}function D(e=new Uint8Array,...t){return R(o(S(p.eV(...t),(0,p.ql)("context",e),!!i)))}return O._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return U(e).pointBytes},sign:function(e,t,o={}){var s;e=(0,p.ql)("message",e),i&&(e=i(e));let{prefix:u,scalar:c,pointBytes:l}=U(t),d=D(o.context,u,e),m=O.multiply(d).toRawBytes(),h=(s=d+D(o.context,m,l,e)*c,(0,f.wQ)(s,r));E(h);let g=p.eV(m,p.S5(h,n.BYTES));return(0,p.ql)("result",g,2*a)},verify:function(e,t,r,o=b){let s,a,u;let{context:c,zip215:l}=o,d=n.BYTES;e=(0,p.ql)("signature",e,2*d),t=(0,p.ql)("message",t),i&&(t=i(t));let m=p.ty(e.slice(d,2*d));try{s=C.fromHex(r,l),a=C.fromHex(e.slice(0,d),l),u=O.multiplyUnsafe(m)}catch(e){return!1}if(!l&&s.isSmallOrder())return!1;let f=D(c,a.toRawBytes(),s.toRawBytes(),t);return a.add(s.multiplyUnsafe(f)).subtract(u).clearCofactor().equals(C.ZERO)},ExtendedPoint:C,utils:{getExtendedPublicKey:U,randomPrivateKey:()=>s(n.BYTES),precompute:(e=8,t=C.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:L,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:E,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:d,randomBytes:o.O6,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:P});function O(e){if(!(e instanceof U))throw Error("RistrettoPoint expected")}let x=e=>P(I,e),B=e=>C.CURVE.Fp.create(null&bytesToNumberLE(e));function R(e){let{d:t}=C.CURVE,n=C.CURVE.Fp.ORDER,r=C.CURVE.Fp.create,i=r(null*e*e),o=r((i+I)*null),s=BigInt(-1),a=r((s-t*i)*r(i+t)),{isValid:u,value:c}=P(o,a),l=r(c*e);isNegativeLE(l,n)||(l=r(-l)),u||(c=l),u||(s=i);let d=r(s*(i-I)*null-a),m=c*c,f=r((c+c)*a),p=r(null*d),h=r(I-m),g=r(I+m);return new C.ExtendedPoint(r(f*g),r(h*p),r(p*g),r(f*h))}class U{constructor(e){this.ep=e}static fromAffine(e){return new U(C.ExtendedPoint.fromAffine(e))}static hashToCurve(e){let t=R(B((e=ensureBytes("ristrettoHash",e,64)).slice(0,32))),n=R(B(e.slice(32,64)));return new U(t.add(n))}static fromHex(e){e=ensureBytes("ristrettoHex",e,32);let{a:t,d:n}=C.CURVE,r=C.CURVE.Fp.ORDER,i=C.CURVE.Fp.create,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=B(e);if(!equalBytes(numberToBytesLE(s,32),e)||isNegativeLE(s,r))throw Error(o);let a=i(s*s),u=i(I+t*a),c=i(I-t*a),l=i(u*u),d=i(c*c),m=i(t*n*l-d),{isValid:f,value:p}=x(i(m*d)),h=i(p*c),g=i(p*h*m),w=i((s+s)*h);isNegativeLE(w,r)&&(w=i(-w));let y=i(u*g),b=i(w*y);if(!f||isNegativeLE(b,r)||y===k)throw Error(o);return new U(new C.ExtendedPoint(w,y,I,b))}toRawBytes(){let e,{ex:t,ey:n,ez:r,et:i}=this.ep,o=C.CURVE.Fp.ORDER,s=C.CURVE.Fp.create,a=s(s(r+n)*s(r-n)),u=s(t*n),c=s(u*u),{value:l}=x(s(a*c)),d=s(l*a),m=s(l*u),f=s(d*m*i);if(isNegativeLE(i*f,o)){let r=s(null*n),i=s(null*t);t=r,n=i,e=s(null*d)}else e=m;isNegativeLE(t*f,o)&&(n=s(-n));let p=s((r-n)*e);return isNegativeLE(p,o)&&(p=s(-p)),numberToBytesLE(p,32)}toHex(){return bytesToHex(this.toRawBytes())}toString(){return this.toHex()}equals(e){O(e);let{ex:t,ey:n}=this.ep,{ex:r,ey:i}=e.ep,o=C.CURVE.Fp.create,s=o(t*i)===o(n*r),a=o(n*i)===o(t*r);return s||a}add(e){return O(e),new U(this.ep.add(e.ep))}subtract(e){return O(e),new U(this.ep.subtract(e.ep))}multiply(e){return new U(this.ep.multiply(e))}multiplyUnsafe(e){return new U(this.ep.multiplyUnsafe(e))}double(){return new U(this.ep.double())}negate(){return new U(this.ep.negate())}}},38923:function(e,t,n){"use strict";n.d(t,{kA:function(){return I}});var r=n(53940),i=n(34374),o=n(61176);class s extends o.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,i.vp)(e);let n=(0,o.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,i.Gg)(this),this.iHash.update(e),this}digestInto(e){(0,i.Gg)(this),(0,i.aI)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let a=(e,t,n)=>new s(e,t).update(n).digest();a.create=(e,t)=>new s(e,t);var u=n(42875),c=n(52401),l=n(87642);let{bytesToNumberBE:d,hexToBytes:m}=l,f={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=f;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:d(r),l:e.subarray(n+2)}},toSig(e){let{Err:t}=f,n="string"==typeof e?m(e):e;l.gk(n);let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=f._parseInt(n.subarray(2)),{d:s,l:a}=f._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,s=i.length/2,a=n(o),u=n(s);return`30${n(s+o+4)}02${u}${i}02${a}${r}`}},p=BigInt(0),h=BigInt(1),g=(BigInt(2),BigInt(3));BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let w=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),y=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),b=BigInt(1),A=BigInt(2),S=(e,t)=>(e+t/A)/t,k=(0,c.gN)(w,void 0,void 0,{sqrt:function(e){let t=BigInt(3),n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),u=e*e*e%w,l=u*u*e%w,d=(0,c.oA)(l,t,w)*l%w,m=(0,c.oA)(d,t,w)*l%w,f=(0,c.oA)(m,A,w)*u%w,p=(0,c.oA)(f,r,w)*f%w,h=(0,c.oA)(p,i,w)*p%w,g=(0,c.oA)(h,s,w)*h%w,y=(0,c.oA)(g,a,w)*g%w,b=(0,c.oA)(y,s,w)*h%w,S=(0,c.oA)(b,t,w)*l%w,I=(0,c.oA)(S,o,w)*p%w,T=(0,c.oA)(I,n,w)*u%w,v=(0,c.oA)(T,A,w);if(!k.eql(k.sqr(v),e))throw Error("Cannot find square root");return v}}),I=function(e,t){let n=t=>(function(e){let t=function(e){let t=(0,u.K)(e);return l.FF(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function s(e){return c.wQ(e,r)}function a(e){return c.U_(e,r)}let{ProjectivePoint:d,normPrivateKeyToScalar:m,weierstrassEquation:w,isWithinCurveOrder:y}=function(e){let t=/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function(e){let t=(0,u.K)(e);l.FF(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{let i=t.toAffine();return l.eV(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){let{a:r,b:i}=t,o=n.sqr(e),s=n.mul(o,e);return n.add(n.add(s,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&p<e&&e<t.n}function a(e){if(!s(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function d(e){let n;let{allowedPrivateKeyLengths:r,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(r&&"bigint"!=typeof e){if(l._t(e)&&(e=l.ci(e)),"string"!=typeof e||!r.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{n="bigint"==typeof e?e:l.bytesToNumberBE((0,l.ql)("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return o&&(n=c.wQ(n,s)),a(n),n}let m=new Map;function f(e){if(!(e instanceof w))throw Error("ProjectivePoint expected")}class w{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw Error("x required");if(null==t||!n.isValid(t))throw Error("y required");if(null==r||!n.isValid(r))throw Error("z required")}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof w)throw Error("projective point not allowed");let i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?w.ZERO:new w(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(w.fromAffine)}static fromHex(e){let t=w.fromAffine(i((0,l.ql)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return w.BASE.multiply(d(e))}_setWindowSize(e){this._WINDOW_SIZE=e,m.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw Error("bad point: x or y not FE");let i=n.sqr(r),s=o(e);if(!n.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){f(e);let{px:t,py:r,pz:i}=this,{px:o,py:s,pz:a}=e,u=n.eql(n.mul(t,a),n.mul(o,i)),c=n.eql(n.mul(r,a),n.mul(s,i));return u&&c}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){let{a:e,b:r}=t,i=n.mul(r,g),{px:o,py:s,pz:a}=this,u=n.ZERO,c=n.ZERO,l=n.ZERO,d=n.mul(o,o),m=n.mul(s,s),f=n.mul(a,a),p=n.mul(o,s);return p=n.add(p,p),l=n.mul(o,a),l=n.add(l,l),u=n.mul(e,l),c=n.mul(i,f),c=n.add(u,c),u=n.sub(m,c),c=n.add(m,c),c=n.mul(u,c),u=n.mul(p,u),l=n.mul(i,l),f=n.mul(e,f),p=n.sub(d,f),p=n.mul(e,p),p=n.add(p,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,f),d=n.mul(d,p),c=n.add(c,d),f=n.mul(s,a),f=n.add(f,f),d=n.mul(f,p),u=n.sub(u,d),l=n.mul(f,m),l=n.add(l,l),new w(u,c,l=n.add(l,l))}add(e){f(e);let{px:r,py:i,pz:o}=this,{px:s,py:a,pz:u}=e,c=n.ZERO,l=n.ZERO,d=n.ZERO,m=t.a,p=n.mul(t.b,g),h=n.mul(r,s),y=n.mul(i,a),b=n.mul(o,u),A=n.add(r,i),S=n.add(s,a);A=n.mul(A,S),S=n.add(h,y),A=n.sub(A,S),S=n.add(r,o);let k=n.add(s,u);return S=n.mul(S,k),k=n.add(h,b),S=n.sub(S,k),k=n.add(i,o),c=n.add(a,u),k=n.mul(k,c),c=n.add(y,b),k=n.sub(k,c),d=n.mul(m,S),c=n.mul(p,b),d=n.add(c,d),c=n.sub(y,d),d=n.add(y,d),l=n.mul(c,d),y=n.add(h,h),y=n.add(y,h),b=n.mul(m,b),S=n.mul(p,S),y=n.add(y,b),b=n.sub(h,b),b=n.mul(m,b),S=n.add(S,b),h=n.mul(y,S),l=n.add(l,h),h=n.mul(k,S),c=n.mul(A,c),c=n.sub(c,h),h=n.mul(A,y),d=n.mul(k,d),new w(c,l,d=n.add(d,h))}subtract(e){return this.add(e.negate())}is0(){return this.equals(w.ZERO)}wNAF(e){return b.wNAFCached(this,m,e,e=>{let t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(w.fromAffine)})}multiplyUnsafe(e){let r=w.ZERO;if(e===p)return r;if(a(e),e===h)return this;let{endo:i}=t;if(!i)return b.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:u,k2:c}=i.splitScalar(e),l=r,d=r,m=this;for(;s>p||c>p;)s&h&&(l=l.add(m)),c&h&&(d=d.add(m)),m=m.double(),s>>=h,c>>=h;return o&&(l=l.negate()),u&&(d=d.negate()),d=new w(n.mul(d.px,i.beta),d.py,d.pz),l.add(d)}multiply(e){let r,i;a(e);let{endo:o}=t;if(o){let{k1neg:t,k1:s,k2neg:a,k2:u}=o.splitScalar(e),{p:c,f:l}=this.wNAF(s),{p:d,f:m}=this.wNAF(u);c=b.constTimeNegate(t,c),d=b.constTimeNegate(a,d),d=new w(n.mul(d.px,o.beta),d.py,d.pz),r=c.add(d),i=l.add(m)}else{let{p:t,f:n}=this.wNAF(e);r=t,i=n}return w.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){let r=w.BASE,i=(e,t)=>t!==p&&t!==h&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){let{px:t,py:r,pz:i}=this,o=this.is0();null==e&&(e=o?n.ONE:n.inv(i));let s=n.mul(t,e),a=n.mul(r,e),u=n.mul(i,e);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){let{h:e,isTorsionFree:n}=t;if(e===h)return!0;if(n)return n(w,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:n}=t;return e===h?this:n?n(w,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(w,this,e)}toHex(e=!0){return l.ci(this.toRawBytes(e))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);let y=t.nBitLength,b=(0,u.M)(w,t.endo?Math.ceil(y/2):y);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:s}}({...t,toBytes(e,t,r){let i=t.toAffine(),o=n.toBytes(i.x),s=l.eV;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes(e){let t=e.length,r=e[0],s=e.subarray(1);if(t===i&&(2===r||3===r)){let e;let t=l.bytesToNumberBE(s);if(!(p<t&&t<n.ORDER))throw Error("Point is not on curve");let i=w(t);try{e=n.sqrt(i)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&h)===h)&&(e=n.neg(e)),{x:t,y:e}}if(t===o&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),b=e=>l.ci(l.tL(e,t.nByteLength)),A=(e,t,n)=>l.bytesToNumberBE(e.slice(t,n));class S{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){let n=t.nByteLength;return new S(A(e=(0,l.ql)("compactSignature",e,2*n),0,n),A(e,n,2*n))}static fromDER(e){let{r:t,s:n}=f.toSig((0,l.ql)("DER",e));return new S(t,n)}assertValidity(){if(!y(this.r))throw Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){let{r,s:i,recovery:o}=this,u=T((0,l.ql)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let c=2===o||3===o?r+t.n:r;if(c>=n.ORDER)throw Error("recovery id 2 or 3 invalid");let m=(1&o)==0?"02":"03",f=d.fromHex(m+b(c)),p=a(c),h=s(-u*p),g=s(i*p),w=d.BASE.multiplyAndAddUnsafe(f,h,g);if(!w)throw Error("point at infinify");return w.assertValidity(),w}hasHighS(){return this.s>r>>h}normalizeS(){return this.hasHighS()?new S(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return l.hexToBytes(this.toDERHex())}toDERHex(){return f.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return l.hexToBytes(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}function k(e){let t=l._t(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===o:n?r===2*i||r===2*o:e instanceof d}let I=t.bits2int||function(e){let n=l.bytesToNumberBE(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},T=t.bits2int_modN||function(e){return s(I(e))},v=l.dQ(t.nBitLength);function E(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(p<=e&&e<v))throw Error(`bigint expected < 2^${t.nBitLength}`);return l.tL(e,t.nByteLength)}let P={lowS:t.lowS,prehash:!1},L={lowS:t.lowS,prehash:!1};return d.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return d.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(k(e))throw Error("first arg must be private key");if(!k(t))throw Error("second arg must be public key");return d.fromHex(t).multiply(m(e)).toRawBytes(n)},sign:function(e,i,o=P){let{seed:u,k2sig:c}=function(e,i,o=P){if(["recovered","canonical"].some(e=>e in o))throw Error("sign() legacy options not supported");let{hash:u,randomBytes:c}=t,{lowS:f,prehash:g,extraEntropy:w}=o;null==f&&(f=!0),e=(0,l.ql)("msgHash",e),g&&(e=(0,l.ql)("prehashed msgHash",u(e)));let b=T(e),A=m(i),k=[E(A),E(b)];if(null!=w&&!1!==w){let e=!0===w?c(n.BYTES):w;k.push((0,l.ql)("extraEntropy",e))}return{seed:l.eV(...k),k2sig:function(e){let t=I(e);if(!y(t))return;let n=a(t),i=d.BASE.multiply(t).toAffine(),o=s(i.x);if(o===p)return;let u=s(n*s(b+o*A));if(u===p)return;let c=(i.x===o?0:2)|Number(i.y&h),l=u;if(f&&u>r>>h)l=u>r>>h?s(-u):u,c^=1;return new S(o,l,c)}}}(e,i,o);return l.n$(t.hash.outputLen,t.nByteLength,t.hmac)(u,c)},verify:function(e,n,r,i=L){let o,u;if(n=(0,l.ql)("msgHash",n),r=(0,l.ql)("publicKey",r),"strict"in i)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:m}=i;try{if("string"==typeof e||l._t(e))try{u=S.fromDER(e)}catch(t){if(!(t instanceof f.Err))throw t;u=S.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:n}=e;u=new S(t,n)}else throw Error("PARSE");o=d.fromHex(r)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&u.hasHighS())return!1;m&&(n=t.hash(n));let{r:p,s:h}=u,g=T(n),w=a(h),y=s(g*w),b=s(p*w),A=d.BASE.multiplyAndAddUnsafe(o,y,b)?.toAffine();return!!A&&s(A.x)===p},ProjectivePoint:d,Signature:S,utils:{isValidPrivateKey(e){try{return m(e),!0}catch(e){return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{let e=c.PS(t.n);return c.Us(t.randomBytes(e),t.n)},precompute:(e=8,t=d.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...n)=>a(t,e,(0,o.eV)(...n)),randomBytes:o.O6});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:k,n:y,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-b*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),o=S(t*e,y),s=S(-n*e,y),a=(0,c.wQ)(e-o*t-s*r,y),u=(0,c.wQ)(-o*n-s*t,y),l=a>i,d=u>i;if(l&&(a=y-a),d&&(u=y-u),a>i||u>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:a,k2neg:d,k2:u}}}},r.J);BigInt(0),I.ProjectivePoint},34374:function(e,t,n){"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){i(e);let n=t.outputLen;if(e.length<n)throw Error(`digestInto() expects output buffer of length at least ${n}`)}n.d(t,{Gg:function(){return s},J8:function(){return a},Rx:function(){return r},aI:function(){return i},vp:function(){return o}})},717:function(e,t,n){"use strict";n.d(t,{VR:function(){return a},bc:function(){return o},l3:function(){return s}});var r=n(34374),i=n(61176);let o=(e,t,n)=>e&t^~e&n,s=(e,t,n)=>e&t^e&n^t&n;class a extends i.kb{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.GL)(this.buffer)}update(e){(0,r.Gg)(this);let{view:t,buffer:n,blockLen:o}=this,s=(e=(0,i.O0)(e)).length;for(let r=0;r<s;){let a=Math.min(o-this.pos,s-r);if(a===o){let t=(0,i.GL)(e);for(;o<=s-r;r+=o)this.process(t,r);continue}n.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.Gg)(this),(0,r.J8)(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:o,isLE:s}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let e=a;e<o;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),u=r?4:0,c=r?0:4;e.setUint32(t+u,s,r),e.setUint32(t+c,a,r)}(n,o-8,BigInt(8*this.length),s),this.process(n,0);let u=(0,i.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,d=this.get();if(l>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)u.setUint32(4*e,d[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return e.length=r,e.pos=s,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}}},94248:function(e,t,n){"use strict";n.d(t,{EP:function(){return a},SD:function(){return c},Vl:function(){return s},gm:function(){return u},mk:function(){return l}});let r=BigInt(4294967296-1),i=BigInt(32);function o(e,t=!1){return t?{h:Number(e&r),l:Number(e>>i&r)}:{h:0|Number(e>>i&r),l:0|Number(e&r)}}function s(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:s,l:a}=o(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}let a=(e,t,n)=>e<<n|t>>>32-n,u=(e,t,n)=>t<<n|e>>>32-n,c=(e,t,n)=>t<<n-32|e>>>64-n,l=(e,t,n)=>e<<n-32|t>>>64-n;t.ZP={fromBig:o,split:s,toBig:(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:a,rotlSL:u,rotlBH:c,rotlBL:l,add:function(e,t,n,r){let i=(t>>>0)+(r>>>0);return{h:e+n+(i/4294967296|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/4294967296|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/4294967296|0)|0,add5H:(e,t,n,r,i,o)=>t+n+r+i+o+(e/4294967296|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)}},53940:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var r=n(717),i=n(61176);let o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class u extends r.VR{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[e,t,n,r,i,o,s,a]}set(e,t,n,r,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)a[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=a[e-15],n=a[e-2],r=(0,i.np)(t,7)^(0,i.np)(t,18)^t>>>3,o=(0,i.np)(n,17)^(0,i.np)(n,19)^n>>>10;a[e]=o+a[e-7]+r+a[e-16]|0}let{A:n,B:s,C:u,D:c,E:l,F:d,G:m,H:f}=this;for(let e=0;e<64;e++){let t=f+((0,i.np)(l,6)^(0,i.np)(l,11)^(0,i.np)(l,25))+(0,r.bc)(l,d,m)+o[e]+a[e]|0,p=((0,i.np)(n,2)^(0,i.np)(n,13)^(0,i.np)(n,22))+(0,r.l3)(n,s,u)|0;f=m,m=d,d=l,l=c+t|0,c=u,u=s,s=n,n=t+p|0}n=n+this.A|0,s=s+this.B|0,u=u+this.C|0,c=c+this.D|0,l=l+this.E|0,d=d+this.F|0,m=m+this.G|0,f=f+this.H|0,this.set(n,s,u,c,l,d,m,f)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let c=(0,i.hE)(()=>new u)},29400:function(e,t,n){"use strict";n.d(t,{fr:function(){return A}});var r=n(34374),i=n(94248),o=n(61176);let s=[],a=[],u=[],c=BigInt(0),l=BigInt(1),d=BigInt(2),m=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=l,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],s.push(2*(5*r+n)),a.push((e+1)*(e+2)/2%64);let i=c;for(let e=0;e<7;e++)(t=(t<<l^(t>>m)*p)%f)&d&&(i^=l<<(l<<BigInt(e))-l);u.push(i)}let[h,g]=(0,i.Vl)(u,!0),w=(e,t,n)=>n>32?(0,i.SD)(e,t,n):(0,i.EP)(e,t,n),y=(e,t,n)=>n>32?(0,i.mk)(e,t,n):(0,i.gm)(e,t,n);class b extends o.kb{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.Rx)(n),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,o.Jq)(this.state)}keccak(){o.iA||(0,o.l1)(this.state32),function(e,t=24){let n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let r=(t+8)%10,i=(t+2)%10,o=n[i],s=n[i+1],a=w(o,s,1)^n[r],u=y(o,s,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=u}let t=e[2],i=e[3];for(let n=0;n<24;n++){let r=a[n],o=w(t,i,r),u=y(t,i,r),c=s[n];t=e[c],i=e[c+1],e[c]=o,e[c+1]=u}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=h[r],e[1]^=g[r]}n.fill(0)}(this.state32,this.rounds),o.iA||(0,o.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,r.Gg)(this);let{blockLen:t,state:n}=this,i=(e=(0,o.O0)(e)).length;for(let r=0;r<i;){let o=Math.min(t-this.pos,i-r);for(let t=0;t<o;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,(128&t)!=0&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,r.Gg)(this,!1),(0,r.aI)(e),this.finish();let t=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,r.Rx)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,r.J8)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new b(t,n,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}let A=(0,o.hE)(()=>new b(136,1,32))},61176:function(e,t,n){"use strict";n.d(t,{kb:function(){return f},l1:function(){return l},eV:function(){return m},GL:function(){return s},iA:function(){return u},O6:function(){return h},np:function(){return a},O0:function(){return d},Jq:function(){return o},hE:function(){return p}});let r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=n(34374);let o=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),a=(e,t)=>e<<32-t|e>>>t,u=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],c=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function l(e){for(let t=0;t<e.length;t++)e[t]=c(e[t])}function d(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,i.aI)(e),e}function m(...e){let t=0;for(let n=0;n<e.length;n++){let r=e[n];(0,i.aI)(r),t+=r.length}let n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){let i=e[t];n.set(i,r),r+=i.length}return n}class f{clone(){return this._cloneInto()}}function p(e){let t=t=>e().update(d(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function h(e=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}},74564:function(e,t,n){"use strict";n.d(t,{Xg:function(){return I},ZL:function(){return v},AW:function(){return c}});var r=n(62109),i=n(25724);let o=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)});var s=n(23663).Buffer;let a=e=>t=>{let n=(0,r.Ik)(e,t),{encode:a,decode:u}=o(n);return n.decode=(e,t)=>{let n=u(e,t);return(0,i.oU)(s.from(n))},n.encode=(t,n,r)=>a((0,i.k$)(t,e),n,r),n},u=e=>t=>{let n=(0,r.Ik)(e,t),{encode:a,decode:u}=o(n);return n.decode=(e,t)=>{let n=u(e,t);return(0,i.Q5)(s.from(n))},n.encode=(t,n,r)=>a((0,i.zP)(t,e),n,r),n},c=a(8);u(8),a(16),u(16),a(24),u(24),a(32),u(32);var l=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,d=Math.ceil,m=Math.floor,f="[BigNumber Error] ",p=f+"Number primitive has more than 15 significant digits: ",h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function g(e){var t=0|e;return e>0||e===t?t:t-1}function w(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(n=14-(t=e[r++]+"").length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function y(e,t){var n,r,i=e.c,o=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(s=0,a=(u=i.length)<(c=o.length)?u:c;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return u==c?0:u>c^n?1:-1}function b(e,t,n,r){if(e<t||e>n||e!==m(e))throw Error(f+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function A(e){var t=e.c.length-1;return g(e.e/14)==t&&e.c[t]%2!=0}function S(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}new(function e(t){var n,r,i,o,s,a,u,c,I,T=N.prototype={constructor:N,toString:null,valueOf:null},v=new N(1),E=20,P=4,L=-7,C=21,O=-1e7,x=1e7,B=!1,R=1,U=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},_="0123456789abcdefghijklmnopqrstuvwxyz",q=!0;function N(e,t){var n,r,i,o,s,a,u,d,f=this;if(!(f instanceof N))return new N(e,t);if(null==t){if(e&&!0===e._isBigNumber){f.s=e.s,!e.c||e.e>x?f.c=f.e=null:e.e<O?f.c=[f.e=0]:(f.e=e.e,f.c=e.c.slice());return}if((a="number"==typeof e)&&0*e==0){if(f.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,s=e;s>=10;s/=10,o++);o>x?f.c=f.e=null:(f.e=o,f.c=[e]);return}d=String(e)}else{if(!l.test(d=String(e)))return I(f,d,a);f.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(o=d.indexOf("."))>-1&&(d=d.replace(".","")),(s=d.search(/e/i))>0?(o<0&&(o=s),o+=+d.slice(s+1),d=d.substring(0,s)):o<0&&(o=d.length)}else{if(b(t,2,_.length,"Base"),10==t&&q)return W(f=new N(e),E+f.e+1,P);if(d=String(e),a="number"==typeof e){if(0*e!=0)return I(f,d,a,t);if(f.s=1/e<0?(d=d.slice(1),-1):1,N.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(p+e)}else f.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=_.slice(0,t),o=s=0,u=d.length;s<u;s++)if(0>n.indexOf(r=d.charAt(s))){if("."==r){if(s>o){o=u;continue}}else if(!i&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){i=!0,s=-1,o=0;continue}return I(f,String(e),a,t)}a=!1,(o=(d=c(d,t,10,f.s)).indexOf("."))>-1?d=d.replace(".",""):o=d.length}for(s=0;48===d.charCodeAt(s);s++);for(u=d.length;48===d.charCodeAt(--u););if(d=d.slice(s,++u)){if(u-=s,a&&N.DEBUG&&u>15&&(e>9007199254740991||e!==m(e)))throw Error(p+f.s*e);if((o=o-s-1)>x)f.c=f.e=null;else if(o<O)f.c=[f.e=0];else{if(f.e=o,f.c=[],s=(o+1)%14,o<0&&(s+=14),s<u){for(s&&f.c.push(+d.slice(0,s)),u-=14;s<u;)f.c.push(+d.slice(s,s+=14));s=14-(d=d.slice(s)).length}else s-=u;for(;s--;d+="0");f.c.push(+d)}}else f.c=[f.e=0]}function V(e,t,n,r){var i,o,s,a,u;if(null==n?n=P:b(n,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)u=w(e.c),u=1==r||2==r&&(s<=L||s>=C)?S(u,s):k(u,s,"0");else if(o=(e=W(new N(e),t,n)).e,a=(u=w(e.c)).length,1==r||2==r&&(t<=o||o<=L)){for(;a<t;u+="0",a++);u=S(u,o)}else if(t-=s,u=k(u,o,"0"),o+1>a){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-a)>0)for(o+1==a&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function M(e,t){for(var n,r,i=1,o=new N(e[0]);i<e.length;i++)(r=new N(e[i])).s&&(n=y(o,r))!==t&&(0!==n||o.s!==t)||(o=r);return o}function F(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+14*n-1)>x?e.c=e.e=null:n<O?e.c=[e.e=0]:(e.e=n,e.c=t),e}function W(e,t,n,r){var i,o,s,a,u,c,l,f=e.c;if(f){e:{for(i=1,a=f[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=14,s=t,l=m((u=f[c=0])/h[i-s-1]%10);else if((c=d((o+1)/14))>=f.length){if(r){for(;f.length<=c;f.push(0));u=l=0,i=1,o%=14,s=o-14+1}else break e}else{for(i=1,u=a=f[c];a>=10;a/=10,i++);o%=14,l=(s=o-14+i)<0?0:m(u/h[i-s-1]%10)}if(r=r||t<0||null!=f[c+1]||(s<0?u:u%h[i-s-1]),r=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?s>0?u/h[i-s]:0:f[c-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,r?(t-=e.e+1,f[0]=h[(14-t%14)%14],e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=c,a=1,c--):(f.length=c+1,a=h[14-o],f[c]=s>0?m(u/h[i-s]%h[s])*a:0),r)for(;;){if(0==c){for(o=1,s=f[0];s>=10;s/=10,o++);for(s=f[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,1e14==f[0]&&(f[0]=1));break}if(f[c]+=a,1e14!=f[c])break;f[c--]=0,a=1}for(o=f.length;0===f[--o];f.pop());}e.e>x?e.c=e.e=null:e.e<O&&(e.c=[e.e=0])}return e}function K(e){var t,n=e.e;return null===n?e.toString():(t=w(e.c),t=n<=L||n>=C?S(t,n):k(t,n,"0"),e.s<0?"-"+t:t)}return N.clone=e,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(e){var t,n;if(null!=e){if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(n=e[t],0,1e9,t),E=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(n=e[t],0,8,t),P=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(b(n[0],-1e9,0,t),b(n[1],0,1e9,t),L=n[0],C=n[1]):(b(n,-1e9,1e9,t),L=-(C=n<0?-n:n))),e.hasOwnProperty(t="RANGE")){if((n=e[t])&&n.pop)b(n[0],-1e9,-1,t),b(n[1],1,1e9,t),O=n[0],x=n[1];else if(b(n,-1e9,1e9,t),n)O=-(x=n<0?-n:n);else throw Error(f+t+" cannot be zero: "+n)}if(e.hasOwnProperty(t="CRYPTO")){if(!!(n=e[t])===n){if(n){if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))B=n;else throw B=!n,Error(f+"crypto unavailable")}else B=n}else throw Error(f+t+" not true or false: "+n)}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(n=e[t],0,9,t),R=n),e.hasOwnProperty(t="POW_PRECISION")&&(b(n=e[t],0,1e9,t),U=n),e.hasOwnProperty(t="FORMAT")){if("object"==typeof(n=e[t]))D=n;else throw Error(f+t+" not an object: "+n)}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(f+t+" invalid: "+n);q="0123456789"==n.slice(0,10),_=n}}else throw Error(f+"Object expected: "+e)}return{DECIMAL_PLACES:E,ROUNDING_MODE:P,EXPONENTIAL_AT:[L,C],RANGE:[O,x],CRYPTO:B,MODULO_MODE:R,POW_PRECISION:U,FORMAT:D,ALPHABET:_}},N.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!N.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"==({}).toString.call(r)){if((1===o||-1===o)&&i>=-1e9&&i<=1e9&&i===m(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%14)<1&&(t+=14),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=1e14||n!==m(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(f+"Invalid BigNumber: "+e)},N.maximum=N.max=function(){return M(arguments,-1)},N.minimum=N.min=function(){return M(arguments,1)},N.random=(n=9007199254740992*Math.random()&2097151?function(){return m(9007199254740992*Math.random())}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)},function(e){var t,r,i,o,s,a=0,u=[],c=new N(v);if(null==e?e=E:b(e,0,1e9),o=d(e/14),B){if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(s=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(u.push(s%1e14),a+=2);a=o/2}else if(crypto.randomBytes){for(t=crypto.randomBytes(o*=7);a<o;)(s=(31&t[a])*281474976710656+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(u.push(s%1e14),a+=7);a=o/7}else throw B=!1,Error(f+"crypto unavailable")}if(!B)for(;a<o;)(s=n())<9e15&&(u[a++]=s%1e14);for(o=u[--a],e%=14,o&&e&&(s=h[14-e],u[a]=m(o/s)*s);0===u[a];u.pop(),a--);if(a<0)u=[i=0];else{for(i=-1;0===u[0];u.splice(0,1),i-=14);for(a=1,s=u[0];s>=10;s/=10,a++);a<14&&(i-=14-a)}return c.e=i,c.c=u,c}),N.sum=function(){for(var e=1,t=arguments,n=new N(t[0]);e<t.length;)n=n.plus(t[e++]);return n},c=function(){var e="0123456789";function t(e,t,n,r){for(var i,o,s=[0],a=0,u=e.length;a<u;){for(o=s.length;o--;s[o]*=t);for(s[0]+=r.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(n,r,i,o,s){var a,c,l,d,m,f,p,h,g=n.indexOf("."),y=E,b=P;for(g>=0&&(d=U,U=0,n=n.replace(".",""),f=(h=new N(r)).pow(n.length-g),U=d,h.c=t(k(w(f.c),f.e,"0"),10,i,e),h.e=h.c.length),l=d=(p=t(n,r,i,s?(a=_,e):(a=e,_))).length;0==p[--d];p.pop());if(!p[0])return a.charAt(0);if(g<0?--l:(f.c=p,f.e=l,f.s=o,p=(f=u(f,h,y,b,i)).c,m=f.r,l=f.e),g=p[c=l+y+1],d=i/2,m=m||c<0||null!=p[c+1],m=b<4?(null!=g||m)&&(0==b||b==(f.s<0?3:2)):g>d||g==d&&(4==b||m||6==b&&1&p[c-1]||b==(f.s<0?8:7)),c<1||!p[0])n=m?k(a.charAt(1),-y,a.charAt(0)):a.charAt(0);else{if(p.length=c,m)for(--i;++p[--c]>i;)p[c]=0,c||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(g=0,n="";g<=d;n+=a.charAt(p[g++]));n=k(n,l,a.charAt(0))}return n}}(),u=function(){function e(e,t,n){var r,i,o,s,a=0,u=e.length,c=t%1e7,l=t/1e7|0;for(e=e.slice();u--;)r=l*(o=e[u]%1e7)+(s=e[u]/1e7|0)*c,a=((i=c*o+r%1e7*1e7+a)/n|0)+(r/1e7|0)+l*s,e[u]=i%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,o,s,a){var u,c,l,d,f,p,h,w,y,b,A,S,k,I,T,v,E,P=r.s==i.s?1:-1,L=r.c,C=i.c;if(!L||!L[0]||!C||!C[0])return new N(r.s&&i.s&&(L?!C||L[0]!=C[0]:C)?L&&0==L[0]||!C?0*P:P/0:NaN);for(y=(w=new N(P)).c=[],P=o+(c=r.e-i.e)+1,a||(a=1e14,c=g(r.e/14)-g(i.e/14),P=P/14|0),l=0;C[l]==(L[l]||0);l++);if(C[l]>(L[l]||0)&&c--,P<0)y.push(1),d=!0;else{for(I=L.length,v=C.length,l=0,P+=2,(f=m(a/(C[0]+1)))>1&&(C=e(C,f,a),L=e(L,f,a),v=C.length,I=L.length),k=v,A=(b=L.slice(0,v)).length;A<v;b[A++]=0);E=[0].concat(E=C.slice()),T=C[0],C[1]>=a/2&&T++;do{if(f=0,(u=t(C,b,v,A))<0){if(S=b[0],v!=A&&(S=S*a+(b[1]||0)),(f=m(S/T))>1)for(f>=a&&(f=a-1),h=(p=e(C,f,a)).length,A=b.length;1==t(p,b,h,A);)f--,n(p,v<h?E:C,h,a),h=p.length,u=1;else 0==f&&(u=f=1),h=(p=C.slice()).length;if(h<A&&(p=[0].concat(p)),n(b,p,A,a),A=b.length,-1==u)for(;1>t(C,b,v,A);)f++,n(b,v<A?E:C,A,a),A=b.length}else 0===u&&(f++,b=[0]);y[l++]=f,b[0]?b[A++]=L[k]||0:(b=[L[k]],A=1)}while((k++<I||null!=b[0])&&P--);d=null!=b[0],y[0]||y.splice(0,1)}if(1e14==a){for(l=1,P=y[0];P>=10;P/=10,l++);W(w,o+(w.e=l+14*c-1)+1,s,d)}else w.e=c,w.r=+d;return w}}(),r=/^(-?)0([xbo])(?=\w[\w.]*$)/i,i=/^([^.]+)\.$/,o=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g,I=function(e,t,n,u){var c,l=n?t:t.replace(a,"");if(s.test(l))e.s=isNaN(l)?null:l<0?-1:1;else{if(!n&&(l=l.replace(r,function(e,t,n){return c="x"==(n=n.toLowerCase())?16:"b"==n?2:8,u&&u!=c?e:t}),u&&(c=u,l=l.replace(i,"$1").replace(o,"0.$1")),t!=l))return new N(l,c);if(N.DEBUG)throw Error(f+"Not a"+(u?" base "+u:"")+" number: "+t);e.s=null}e.c=e.e=null},T.absoluteValue=T.abs=function(){var e=new N(this);return e.s<0&&(e.s=1),e},T.comparedTo=function(e,t){return y(this,new N(e,t))},T.decimalPlaces=T.dp=function(e,t){var n,r,i;if(null!=e)return b(e,0,1e9),null==t?t=P:b(t,0,8),W(new N(this),e+this.e+1,t);if(!(n=this.c))return null;if(r=((i=n.length-1)-g(this.e/14))*14,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},T.dividedBy=T.div=function(e,t){return u(this,new N(e,t),E,P)},T.dividedToIntegerBy=T.idiv=function(e,t){return u(this,new N(e,t),0,1)},T.exponentiatedBy=T.pow=function(e,t){var n,r,i,o,s,a,u,c,l,p=this;if((e=new N(e)).c&&!e.isInteger())throw Error(f+"Exponent not an integer: "+K(e));if(null!=t&&(t=new N(t)),a=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return l=new N(Math.pow(+K(p),a?e.s*(2-A(e)):+K(e))),t?l.mod(t):l;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new N(NaN);(r=!u&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||a&&p.c[1]>=24e7:p.c[0]<8e13||a&&p.c[0]<=9999975e7)))return o=p.s<0&&A(e)?-0:0,p.e>-1&&(o=1/o),new N(u?1/o:o);U&&(o=d(U/14+2))}for(a?(n=new N(.5),u&&(e.s=1),c=A(e)):c=(i=Math.abs(+K(e)))%2,l=new N(v);;){if(c){if(!(l=l.times(p)).c)break;o?l.c.length>o&&(l.c.length=o):r&&(l=l.mod(t))}if(i){if(0===(i=m(i/2)))break;c=i%2}else if(W(e=e.times(n),e.e+1,1),e.e>14)c=A(e);else{if(0==(i=+K(e)))break;c=i%2}p=p.times(p),o?p.c&&p.c.length>o&&(p.c.length=o):r&&(p=p.mod(t))}return r?l:(u&&(l=v.div(l)),t?l.mod(t):o?W(l,U,P,s):l)},T.integerValue=function(e){var t=new N(this);return null==e?e=P:b(e,0,8),W(t,t.e+1,e)},T.isEqualTo=T.eq=function(e,t){return 0===y(this,new N(e,t))},T.isFinite=function(){return!!this.c},T.isGreaterThan=T.gt=function(e,t){return y(this,new N(e,t))>0},T.isGreaterThanOrEqualTo=T.gte=function(e,t){return 1===(t=y(this,new N(e,t)))||0===t},T.isInteger=function(){return!!this.c&&g(this.e/14)>this.c.length-2},T.isLessThan=T.lt=function(e,t){return 0>y(this,new N(e,t))},T.isLessThanOrEqualTo=T.lte=function(e,t){return -1===(t=y(this,new N(e,t)))||0===t},T.isNaN=function(){return!this.s},T.isNegative=function(){return this.s<0},T.isPositive=function(){return this.s>0},T.isZero=function(){return!!this.c&&0==this.c[0]},T.minus=function(e,t){var n,r,i,o,s=this.s;if(t=(e=new N(e,t)).s,!s||!t)return new N(NaN);if(s!=t)return e.s=-t,this.plus(e);var a=this.e/14,u=e.e/14,c=this.c,l=e.c;if(!a||!u){if(!c||!l)return c?(e.s=-t,e):new N(l?this:NaN);if(!c[0]||!l[0])return l[0]?(e.s=-t,e):new N(c[0]?this:3==P?-0:0)}if(a=g(a),u=g(u),c=c.slice(),s=a-u){for((o=s<0)?(s=-s,i=c):(u=a,i=l),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(r=(o=(s=c.length)<(t=l.length))?s:t,s=t=0;t<r;t++)if(c[t]!=l[t]){o=c[t]<l[t];break}if(o&&(i=c,c=l,l=i,e.s=-e.s),(t=(r=l.length)-(n=c.length))>0)for(;t--;c[n++]=0);for(t=1e14-1;r>s;){if(c[--r]<l[r]){for(n=r;n&&!c[--n];c[n]=t);--c[n],c[r]+=1e14}c[r]-=l[r]}for(;0==c[0];c.splice(0,1),--u);return c[0]?F(e,c,u):(e.s=3==P?-1:1,e.c=[e.e=0],e)},T.modulo=T.mod=function(e,t){var n,r;return(e=new N(e,t),this.c&&e.s&&(!e.c||e.c[0]))?e.c&&(!this.c||this.c[0])?(9==R?(r=e.s,e.s=1,n=u(this,e,0,3),e.s=r,n.s*=r):n=u(this,e,0,R),(e=this.minus(n.times(e))).c[0]||1!=R||(e.s=this.s),e):new N(this):new N(NaN)},T.multipliedBy=T.times=function(e,t){var n,r,i,o,s,a,u,c,l,d,m,f,p,h=this.c,w=(e=new N(e,t)).c;if(!h||!w||!h[0]||!w[0])return this.s&&e.s&&(!h||h[0]||w)&&(!w||w[0]||h)?(e.s*=this.s,h&&w?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(r=g(this.e/14)+g(e.e/14),e.s*=this.s,(u=h.length)<(d=w.length)&&(p=h,h=w,w=p,i=u,u=d,d=i),i=u+d,p=[];i--;p.push(0));for(i=d;--i>=0;){for(n=0,m=w[i]%1e7,f=w[i]/1e7|0,o=i+(s=u);o>i;)a=f*(c=h[--s]%1e7)+(l=h[s]/1e7|0)*m,n=((c=m*c+a%1e7*1e7+p[o]+n)/1e14|0)+(a/1e7|0)+f*l,p[o--]=c%1e14;p[o]=n}return n?++r:p.splice(0,1),F(e,p,r)},T.negated=function(){var e=new N(this);return e.s=-e.s||null,e},T.plus=function(e,t){var n,r=this.s;if(t=(e=new N(e,t)).s,!r||!t)return new N(NaN);if(r!=t)return e.s=-t,this.minus(e);var i=this.e/14,o=e.e/14,s=this.c,a=e.c;if(!i||!o){if(!s||!a)return new N(r/0);if(!s[0]||!a[0])return a[0]?e:new N(s[0]?this:0*r)}if(i=g(i),o=g(o),s=s.slice(),r=i-o){for(r>0?(o=i,n=a):(r=-r,n=s),n.reverse();r--;n.push(0));n.reverse()}for((r=s.length)-(t=a.length)<0&&(n=a,a=s,s=n,t=r),r=0;t;)r=(s[--t]=s[t]+a[t]+r)/1e14|0,s[t]=1e14===s[t]?0:s[t]%1e14;return r&&(s=[r].concat(s),++o),F(e,s,o)},T.precision=T.sd=function(e,t){var n,r,i;if(null!=e&&!!e!==e)return b(e,1,1e9),null==t?t=P:b(t,0,8),W(new N(this),e,t);if(!(n=this.c))return null;if(r=14*(i=n.length-1)+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&this.e+1>r&&(r=this.e+1),r},T.shiftedBy=function(e){return b(e,-9007199254740991,9007199254740991),this.times("1e"+e)},T.squareRoot=T.sqrt=function(){var e,t,n,r,i,o=this.c,s=this.s,a=this.e,c=E+4,l=new N("0.5");if(1!==s||!o||!o[0])return new N(!s||s<0&&(!o||o[0])?NaN:o?this:1/0);if(0==(s=Math.sqrt(+K(this)))||s==1/0?(((t=w(o)).length+a)%2==0&&(t+="0"),s=Math.sqrt(+t),a=g((a+1)/2)-(a<0||a%2),n=new N(t=s==1/0?"5e"+a:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+a)):n=new N(s+""),n.c[0]){for((s=(a=n.e)+c)<3&&(s=0);;)if(i=n,n=l.times(i.plus(u(this,i,c,1))),w(i.c).slice(0,s)===(t=w(n.c)).slice(0,s)){if(n.e<a&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(n,n.e+E+2,1),e=!n.times(n).eq(this));break}if(!r&&(W(i,i.e+E+2,0),i.times(i).eq(this))){n=i;break}c+=4,s+=4,r=1}}return W(n,n.e+E+1,P,e)},T.toExponential=function(e,t){return null!=e&&(b(e,0,1e9),e++),V(this,e,t,1)},T.toFixed=function(e,t){return null!=e&&(b(e,0,1e9),e=e+this.e+1),V(this,e,t)},T.toFormat=function(e,t,n){var r;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=D;else if("object"!=typeof n)throw Error(f+"Argument not an object: "+n);if(r=this.toFixed(e,t),this.c){var i,o=r.split("."),s=+n.groupSize,a=+n.secondaryGroupSize,u=n.groupSeparator||"",c=o[0],l=o[1],d=this.s<0,m=d?c.slice(1):c,p=m.length;if(a&&(i=s,s=a,a=i,p-=i),s>0&&p>0){for(i=p%s||s,c=m.substr(0,i);i<p;i+=s)c+=u+m.substr(i,s);a>0&&(c+=u+m.slice(i)),d&&(c="-"+c)}r=l?c+(n.decimalSeparator||"")+((a=+n.fractionGroupSize)?l.replace(RegExp("\\d{"+a+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):l):c}return(n.prefix||"")+r+(n.suffix||"")},T.toFraction=function(e){var t,n,r,i,o,s,a,c,l,d,m,p,g=this.c;if(null!=e&&(!(a=new N(e)).isInteger()&&(a.c||1!==a.s)||a.lt(v)))throw Error(f+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+K(a));if(!g)return new N(this);for(t=new N(v),l=n=new N(v),r=c=new N(v),p=w(g),o=t.e=p.length-this.e-1,t.c[0]=h[(s=o%14)<0?14+s:s],e=!e||a.comparedTo(t)>0?o>0?t:l:a,s=x,x=1/0,a=new N(p),c.c[0]=0;d=u(a,t,0,1),1!=(i=n.plus(d.times(r))).comparedTo(e);)n=r,r=i,l=c.plus(d.times(i=l)),c=i,t=a.minus(d.times(i=t)),a=i;return i=u(e.minus(n),r,0,1),c=c.plus(i.times(l)),n=n.plus(i.times(r)),c.s=l.s=this.s,o*=2,m=1>u(l,r,o,P).minus(this).abs().comparedTo(u(c,n,o,P).minus(this).abs())?[l,r]:[c,n],x=s,m},T.toNumber=function(){return+K(this)},T.toPrecision=function(e,t){return null!=e&&b(e,1,1e9),V(this,e,t,2)},T.toString=function(e){var t,n=this,r=n.s,i=n.e;return null===i?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=i<=L||i>=C?S(w(n.c),i):k(w(n.c),i,"0"):10===e&&q?t=k(w((n=W(new N(n),E+i+1,P)).c),n.e,"0"):(b(e,2,_.length,"Base"),t=c(k(w(n.c),i,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},T.valueOf=T.toJSON=function(){return K(this)},T._isBigNumber=!0,T[Symbol.toStringTag]="BigNumber",T[Symbol.for("nodejs.util.inspect.custom")]=T.valueOf,null!=t&&N.set(t),N}())("1e+18");let I=e=>{let t=(0,r.u8)(e),{encode:n,decode:i}=o(t);return t.decode=(e,t)=>!!i(e,t),t.encode=(e,t,r)=>n(Number(e),t,r),t};var T=n(37355);let v=e=>{let t=(0,r.Ik)(32,e),{encode:n,decode:i}=o(t);return t.decode=(e,t)=>{let n=i(e,t);return new T.PublicKey(n)},t.encode=(e,t,r)=>n(e.toBuffer(),t,r),t}},38669:function(e,t,n){"use strict";n.d(t,{H_:function(){return i},_u:function(){return s},nA:function(){return o}});var r=n(37355);let i=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),o=new r.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),s=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new r.PublicKey("So11111111111111111111111111111111111111112"),new r.PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP")},12458:function(e,t,n){"use strict";n.d(t,{$O:function(){return a},Gl:function(){return c},Or:function(){return s},We:function(){return i},iK:function(){return o},iT:function(){return u}});class r extends Error{constructor(e){super(e)}}class i extends r{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class o extends r{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class s extends r{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class a extends r{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class u extends r{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class c extends r{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}},20335:function(e,t,n){"use strict";var r,i;n.d(t,{Q:function(){return r},t:function(){return o}}),(i=r||(r={}))[i.Uninitialized=0]="Uninitialized",i[i.Mint=1]="Mint",i[i.Account=2]="Account";let o=1},9309:function(e,t,n){"use strict";n.d(t,{Ek:function(){return s}});var r=n(37355),i=n(38669),o=n(23663).Buffer;function s(e,t,n,s,a=i.H_,u=i._u){return function(e,t,n,o,s,a=i.H_,u=i._u){let c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:r.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1}];return new r.TransactionInstruction({keys:c,programId:u,data:s})}(e,t,n,s,o.alloc(0),a,u)}},42819:function(e,t,n){"use strict";n.d(t,{D0:function(){return p},lZ:function(){return f},p0:function(){return m}});var r,i,o=n(62109),s=n(74564),a=n(38669),u=n(12458),c=n(20335),l=n(72813),d=n(23663).Buffer;(r=i||(i={}))[r.Uninitialized=0]="Uninitialized",r[r.Initialized=1]="Initialized",r[r.Frozen=2]="Frozen";let m=(0,o.n_)([(0,s.ZL)("mint"),(0,s.ZL)("owner"),(0,s.AW)("amount"),(0,o.Jq)("delegateOption"),(0,s.ZL)("delegate"),(0,o.u8)("state"),(0,o.Jq)("isNativeOption"),(0,s.AW)("isNative"),(0,s.AW)("delegatedAmount"),(0,o.Jq)("closeAuthorityOption"),(0,s.ZL)("closeAuthority")]),f=m.span;async function p(e,t,n,r=a.H_){let o=await e.getAccountInfo(t,n);return function(e,t,n=a.H_){if(!t)throw new u.We;if(!t.owner.equals(n))throw new u.Or;if(t.data.length<f)throw new u.$O;let r=m.decode(t.data.slice(0,f)),o=d.alloc(0);if(t.data.length>f){if(t.data.length===l.Wx)throw new u.$O;if(t.data[f]!=c.Q.Account)throw new u.iK;o=t.data.slice(f+c.t)}return{address:e,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==i.Uninitialized,isFrozen:r.state===i.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:o}}(t,o,r)}},59327:function(e,t,n){"use strict";n.d(t,{Am:function(){return h},rs:function(){return p}});var r=n(62109),i=n(74564),o=n(37355),s=n(38669),a=n(12458),u=n(20335),c=n(42819),l=n(72813),d=n(23663).Buffer;let m=(0,r.n_)([(0,r.Jq)("mintAuthorityOption"),(0,i.ZL)("mintAuthority"),(0,i.AW)("supply"),(0,r.u8)("decimals"),(0,i.Xg)("isInitialized"),(0,r.Jq)("freezeAuthorityOption"),(0,i.ZL)("freezeAuthority")]),f=m.span;function p(e,t,n=s.H_){if(!t)throw new a.We;if(!t.owner.equals(n))throw new a.Or;if(t.data.length<f)throw new a.$O;let r=m.decode(t.data.slice(0,f)),i=d.alloc(0);if(t.data.length>f){if(t.data.length<=c.lZ||t.data.length===l.Wx)throw new a.$O;if(t.data[c.lZ]!=u.Q.Mint)throw new a.iT;i=t.data.slice(c.lZ+u.t)}return{address:e,mintAuthority:r.mintAuthorityOption?r.mintAuthority:null,supply:r.supply,decimals:r.decimals,isInitialized:r.isInitialized,freezeAuthority:r.freezeAuthorityOption?r.freezeAuthority:null,tlvData:i}}async function h(e,t,n=!1,r=s.H_,i=s._u){if(!n&&!o.PublicKey.isOnCurve(t.toBuffer()))throw new a.Gl;let[u]=await o.PublicKey.findProgramAddress([t.toBuffer(),r.toBuffer(),e.toBuffer()],i);return u}},72813:function(e,t,n){"use strict";n.d(t,{Wx:function(){return o}});var r=n(62109),i=n(74564);let o=(0,r.n_)([(0,r.u8)("m"),(0,r.u8)("n"),(0,i.Xg)("isInitialized"),(0,i.ZL)("signer1"),(0,i.ZL)("signer2"),(0,i.ZL)("signer3"),(0,i.ZL)("signer4"),(0,i.ZL)("signer5"),(0,i.ZL)("signer6"),(0,i.ZL)("signer7"),(0,i.ZL)("signer8"),(0,i.ZL)("signer9"),(0,i.ZL)("signer10"),(0,i.ZL)("signer11")]).span},57862:function(e,t,n){"use strict";var r="[big.js] ",i=r+"Invalid ",o=i+"decimal places",s=i+"rounding mode",a=r+"Division by zero",u={},c=void 0,l=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function d(e,t,n,r){var i=e.c;if(n===c&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(s);if(t<1)r=3===n&&(r||!!i[0])||0===t&&(1===n&&i[0]>=5||2===n&&(i[0]>5||5===i[0]&&(r||i[1]!==c))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=1===n&&i[t]>=5||2===n&&(i[t]>5||5===i[t]&&(r||i[t+1]!==c||1&i[t-1]))||3===n&&(r||!!i[0]),i.length=t,r){for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}}for(t=i.length;!i[--t];)i.pop()}return e}function m(e,t,n){var r=e.e,i=e.c.join(""),o=i.length;if(t)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0){if(++r>o)for(r-=o;r--;)i+="0";else r<o&&(i=i.slice(0,r)+"."+i.slice(r))}else o>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&n?"-"+i:i}u.abs=function(){var e=new this.constructor(this);return e.s=1,e},u.cmp=function(e){var t,n=this.c,r=(e=new this.constructor(e)).c,i=this.s,o=e.s,s=this.e,a=e.e;if(!n[0]||!r[0])return n[0]?i:r[0]?-o:0;if(i!=o)return i;if(t=i<0,s!=a)return s>a^t?1:-1;for(i=-1,o=(s=n.length)<(a=r.length)?s:a;++i<o;)if(n[i]!=r[i])return n[i]>r[i]^t?1:-1;return s==a?0:s>a^t?1:-1},u.div=function(e){var t=this.constructor,n=this.c,r=(e=new t(e)).c,i=this.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>1e6)throw Error(o);if(!r[0])throw Error(a);if(!n[0])return e.s=i,e.c=[e.e=0],e;var u,l,m,f,p,h=r.slice(),g=u=r.length,w=n.length,y=n.slice(0,u),b=y.length,A=e,S=A.c=[],k=0,I=s+(A.e=this.e-e.e)+1;for(A.s=i,i=I<0?0:I,h.unshift(0);b++<u;)y.push(0);do{for(m=0;m<10;m++){if(u!=(b=y.length))f=u>b?1:-1;else for(p=-1,f=0;++p<u;)if(r[p]!=y[p]){f=r[p]>y[p]?1:-1;break}if(f<0){for(l=b==u?r:h;b;){if(y[--b]<l[b]){for(p=b;p&&!y[--p];)y[p]=9;--y[p],y[b]+=10}y[b]-=l[b]}for(;!y[0];)y.shift()}else break}S[k++]=f?m:++m,y[0]&&f?y[b]=n[g]||0:y=[n[g]]}while((g++<w||y[0]!==c)&&i--);return!S[0]&&1!=k&&(S.shift(),A.e--,I--),k>I&&d(A,I,t.RM,y[0]!==c),A},u.eq=function(e){return 0===this.cmp(e)},u.gt=function(e){return this.cmp(e)>0},u.gte=function(e){return this.cmp(e)>-1},u.lt=function(e){return 0>this.cmp(e)},u.lte=function(e){return 1>this.cmp(e)},u.minus=u.sub=function(e){var t,n,r,i,o=this.constructor,s=this.s,a=(e=new o(e)).s;if(s!=a)return e.s=-a,this.plus(e);var u=this.c.slice(),c=this.e,l=e.c,d=e.e;if(!u[0]||!l[0])return l[0]?e.s=-a:u[0]?e=new o(this):e.s=1,e;if(s=c-d){for((i=s<0)?(s=-s,r=u):(d=c,r=l),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else for(n=((i=u.length<l.length)?u:l).length,s=a=0;a<n;a++)if(u[a]!=l[a]){i=u[a]<l[a];break}if(i&&(r=u,u=l,l=r,e.s=-e.s),(a=(n=l.length)-(t=u.length))>0)for(;a--;)u[t++]=0;for(a=t;n>s;){if(u[--n]<l[n]){for(t=n;t&&!u[--t];)u[t]=9;--u[t],u[n]+=10}u[n]-=l[n]}for(;0===u[--a];)u.pop();for(;0===u[0];)u.shift(),--d;return u[0]||(e.s=1,u=[d=0]),e.c=u,e.e=d,e},u.mod=function(e){var t,n=this,r=n.constructor,i=n.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(a);return(n.s=e.s=1,t=1==e.cmp(n),n.s=i,e.s=o,t)?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=o,this.minus(n.times(e)))},u.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},u.plus=u.add=function(e){var t,n,r,i=this.constructor;if(e=new i(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var o=this.e,s=this.c,a=e.e,u=e.c;if(!s[0]||!u[0])return u[0]||(s[0]?e=new i(this):e.s=this.s),e;if(s=s.slice(),t=o-a){for(t>0?(a=o,r=u):(t=-t,r=s),r.reverse();t--;)r.push(0);r.reverse()}for(s.length-u.length<0&&(r=u,u=s,s=r),t=u.length,n=0;t;s[t]%=10)n=(s[--t]=s[t]+u[t]+n)/10|0;for(n&&(s.unshift(n),++a),t=s.length;0===s[--t];)s.pop();return e.c=s,e.e=a,e},u.pow=function(e){var t=this,n=new t.constructor("1"),r=n,o=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(i+"exponent");for(o&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return o?n.div(r):r},u.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");return d(new this.constructor(this),e,t)},u.round=function(e,t){if(e===c)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(o);return d(new this.constructor(this),e+this.e+1,t)},u.sqrt=function(){var e,t,n,i=this.constructor,o=this.s,s=this.e,a=new i("0.5");if(!this.c[0])return new i(this);if(o<0)throw Error(r+"No square root");0===(o=Math.sqrt(this+""))||o===1/0?((t=this.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new i(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new i(o+""),s=e.e+(i.DP+=4);do n=e,e=a.times(n.plus(this.div(n)));while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return d(e,(i.DP-=4)+e.e+1,i.RM)},u.times=u.mul=function(e){var t,n=this.constructor,r=this.c,i=(e=new n(e)).c,o=r.length,s=i.length,a=this.e,u=e.e;if(e.s=this.s==e.s?1:-1,!r[0]||!i[0])return e.c=[e.e=0],e;for(e.e=a+u,o<s&&(t=r,r=i,i=t,u=o,o=s,s=u),t=Array(u=o+s);u--;)t[u]=0;for(a=s;a--;){for(s=0,u=o+a;u>a;)s=t[u]+i[a]*r[u-a-1]+s,t[u--]=s%10,s=s/10|0;t[u]=s}for(s?++e.e:t.shift(),a=t.length;!t[--a];)t.pop();return e.c=t,e},u.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==c){if(e!==~~e||e<0||e>1e6)throw Error(o);for(n=d(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return m(n,!0,!!r)},u.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==c){if(e!==~~e||e<0||e>1e6)throw Error(o);for(n=d(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return m(n,!1,!!r)},u[Symbol.for("nodejs.util.inspect.custom")]=u.toJSON=u.toString=function(){var e=this.constructor;return m(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},u.toNumber=function(){var e=Number(m(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(r+"Imprecise conversion");return e},u.toPrecision=function(e,t){var n=this,r=n.constructor,o=n.c[0];if(e!==c){if(e!==~~e||e<1||e>1e6)throw Error(i+"precision");for(n=d(new r(n),e,t);n.c.length<e;)n.c.push(0)}return m(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!o)},u.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(r+"valueOf disallowed");return m(this,this.e<=e.NE||this.e>=e.PE,!0)};var f=function e(){function t(n){if(!(this instanceof t))return n===c?e():new t(n);if(n instanceof t)this.s=n.s,this.e=n.e,this.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(i+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,o;if(!l.test(t))throw Error(i+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),o=t.length,r=0;r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else{for(;o>0&&"0"==t.charAt(--o););for(e.e=n-r-1,e.c=[],n=0;r<=o;)e.c[n++]=+t.charAt(r++)}}(this,n)}this.constructor=t}return t.prototype=u,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();t.Z=f},14477:function(e,t,n){"use strict";n.d(t,{Ey:function(){return u},XY:function(){return s}});var r=n(23663),i=n(67014),o=class extends i{socket;constructor(e,t,n){super(),this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,n){let r=n||t;try{this.socket.send(e),r()}catch(e){r(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function s(e,t){return new o(e,t)}var a=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},u=class extends i{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:r=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...s}={},u,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=u||(()=>++this.rpc_id),c?this.dataPack=c:this.dataPack=new a,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,r){return r||"object"!=typeof n||(r=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(Error("socket not ready"));let s=this.generate_request_id(e,t);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t||void 0,id:s}),r,e=>{if(e)return o(e);this.queue[s]={promise:[i,o]},n&&(this.queue[s].timeout=setTimeout(()=>{delete this.queue[s],o(Error("reply timeout"))},n))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,r)=>{if(!this.ready)return r(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t}),e=>{if(e)return r(e);n()})})}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=r.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);let t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let n=0;n<e.params.length;n++)t.push(e.params[n]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:n,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",n,r),0),this.ready=!1,this.socket=void 0,1e3!==n&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}}},1544:function(e,t,n){"use strict";n.d(t,{AG:function(){return b},G0:function(){return E},IM:function(){return k},IX:function(){return h},O7:function(){return g},Rx:function(){return A},Ue:function(){return d},Yj:function(){return p},Z_:function(){return I},_4:function(){return P},bc:function(){return T},dt:function(){return v},eE:function(){return w},hu:function(){return l},i0:function(){return y},jt:function(){return S},oQ:function(){return L}});class r extends TypeError{constructor(e,t){let n;let{message:r,explanation:i,...o}=e,{path:s}=e,a=0===s.length?r:`At path: ${s.join(".")} -- ${r}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function i(e){return"object"==typeof e&&null!=e}function o(e){return i(e)&&!Array.isArray(e)}function s(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*a(e,t,n,r){var o;for(let a of(i(o=e)&&"function"==typeof o[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:i,branch:o}=t,{type:a}=n,{refinement:u,message:c=`Expected a value of type \`${a}\`${u?` with refinement \`${u}\``:""}, but received: \`${s(r)}\``}=e;return{value:r,type:a,refinement:u,key:i[i.length-1],path:i,branch:o,...e,message:c}}(a,t,n,r);e&&(yield e)}}function*u(e,t,n={}){let{path:r=[],branch:o=[e],coerce:s=!1,mask:a=!1}=n,c={path:r,branch:o,mask:a};s&&(e=t.coercer(e,c));let l="valid";for(let r of t.validator(e,c))r.explanation=n.message,l="not_valid",yield[r,void 0];for(let[d,m,f]of t.entries(e,c))for(let t of u(m,f,{path:void 0===d?r:[...r,d],branch:void 0===d?o:[...o,m],coerce:s,mask:a,message:n.message}))t[0]?(l=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):s&&(m=t[1],void 0===d?e=m:e instanceof Map?e.set(d,m):e instanceof Set?e.add(m):i(e)&&(void 0!==m||d in e)&&(e[d]=m));if("not_valid"!==l)for(let r of t.refiner(e,c))r.explanation=n.message,l="not_refined",yield[r,void 0];"valid"===l&&(yield[void 0,e])}class c{constructor(e){let{type:t,schema:n,validator:r,refiner:i,coercer:o=e=>e,entries:s=function*(){}}=e;this.type=t,this.schema=n,this.entries=s,this.coercer=o,r?this.validator=(e,t)=>a(r(e,t),t,this,e):this.validator=()=>[],i?this.refiner=(e,t)=>a(i(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){return l(e,this,t)}create(e,t){return d(e,this,t)}is(e){return!m(e,this)[0]}mask(e,t){return function(e,t,n){let r=m(e,t,{coerce:!0,mask:!0,message:n});if(!r[0])return r[1];throw r[0]}(e,this,t)}validate(e,t={}){return m(e,this,t)}}function l(e,t,n){let r=m(e,t,{message:n});if(r[0])throw r[0]}function d(e,t,n){let r=m(e,t,{coerce:!0,message:n});if(!r[0])return r[1];throw r[0]}function m(e,t,n={}){let i=u(e,t,n),o=function(e){let{done:t,value:n}=e.next();return t?void 0:n}(i);return o[0]?[new r(o[0],function*(){for(let e of i)e[0]&&(yield e[0])}),void 0]:[void 0,o[1]]}function f(e,t){return new c({type:e,schema:null,validator:t})}function p(){return f("any",()=>!0)}function h(e){return new c({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${s(e)}`})}function g(){return f("boolean",e=>"boolean"==typeof e)}function w(e){return f("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${s(t)}`)}function y(e){let t=s(e),n=typeof e;return new c({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${s(n)}`})}function b(e){return new c({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function A(){return f("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${s(e)}`)}function S(e){return new c({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function k(e,t){return new c({type:"record",schema:null,*entries(n){if(i(n))for(let r in n){let i=n[r];yield[r,r,e],yield[r,i,t]}},validator:e=>o(e)||`Expected an object, but received: ${s(e)}`,coercer:e=>o(e)?{...e}:e})}function I(){return f("string",e=>"string"==typeof e||`Expected a string, but received: ${s(e)}`)}function T(e){let t=f("never",()=>!1);return new c({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){let r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${s(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function v(e){let t=Object.keys(e);return new c({type:"type",schema:e,*entries(n){if(i(n))for(let r of t)yield[r,n[r],e[r]]},validator:e=>o(e)||`Expected an object, but received: ${s(e)}`,coercer:e=>o(e)?{...e}:e})}function E(e){let t=e.map(e=>e.type).join(" | ");return new c({type:"union",schema:null,coercer(t,n){for(let r of e){let[e,i]=r.validate(t,{coerce:!0,mask:n.mask});if(!e)return i}return t},validator(n,r){let i=[];for(let t of e){let[...e]=u(n,t,r),[o]=e;if(!o[0])return[];for(let[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${s(n)}`,...i]}})}function P(){return f("unknown",()=>!0)}function L(e,t,n){return new c({...e,coercer:(r,i)=>m(r,t)[0]?e.coercer(r,i):e.coercer(n(r,i),i)})}}}]);